{"id":"wf-10f","title":"Show dependencies in waif in-progress: Intake brief","description":"Linked PRD: docs/dev/PRD-command-in-progress.md\nRelated PRD: docs/dev/CLI_PRD.md (console table output requirements)\n\nProblem\n- `waif in-progress` currently prints a table of in-progress Beads issues, but it does not show which specific issues are blocking each in-progress item.\n- Users have to run `bd show` or manually inspect dependencies to learn what is blocking active work.\n\nUsers\n- Primary: Producer/PM using the WAIF CLI to monitor active work and quickly identify what needs to be closed to unblock work.\n- Secondary: workflow agents/maintainers who want inline visibility into blockers without additional commands.\n\nSuccess criteria\n- Running `waif in-progress` (human output) prints the existing in-progress table, and then for **each** in-progress issue prints an indented follow-up section:\n  - If the issue has one or more `blocks` dependencies whose target issue status is **not terminal** (`closed`, `done`, `tombstone`), print an indented sub-table listing those blocking issues.\n  - If there are zero such blockers, print an indented line: `No blockers`.\n- The blocker sub-table must:\n  - Use the same table rendering function/format as the main table.\n  - Be indented by **2 spaces** on every line.\n  - Be sorted by blocking issue ID.\n- Fallback: if dependency details/status cannot be resolved, still list the dependency (treat as blocking).\n- `waif in-progress --json` output remains unchanged.\n\nConstraints\n- Default behavior: blocker sub-tables / `No blockers` are shown by default (no flag required).\n- Risk tolerance: low; prefer reusing proven dependency-enrichment logic (e.g., from `waif next`).\n\nExisting state (current behavior)\n- `src/commands/inProgress.ts` loads in-progress issues via `bd list --status in_progress --json` when `bd` is available (with `.beads/issues.jsonl` fallback).\n- It prints a single table via `renderIssuesTable(issues)`.\n\nDesired change (new behavior)\n- Enhance `waif in-progress` human output by rendering per-issue blocker sections as specified above.\n\nRelated code/docs\n- PRD: docs/dev/PRD-command-in-progress.md\n- src/commands/inProgress.ts\n- src/commands/next.ts (example dependency enrichment)\n- src/lib/table.ts (`renderIssuesTable`)\n- tests/inProgress.test.ts\n\nProposed next step\n- Implement behavior per PRD in `src/commands/inProgress.ts` plus tests; keep `--json` unchanged.","notes":"PR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md\n\n---\n\nPR merged via #46\n\n---\n\nPR merged via #46\n\n---\n\nCleanup completed:\n- Updated wf-10f issue description to point Linked PRD to docs/dev/PRD-command-in-progress.md.\n- Removed/resolved clarifying questions from intake brief; moved locked decisions into Success criteria section.\n\nCommands executed:\n- bd update wf-10f --description ...\n- bd close wf-hn4 --reason ...\n\nDocs referenced:\n- docs/dev/PRD-command-in-progress.md\n- docs/dev/CLI_PRD.md","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-22T10:59:35.054233135-08:00","updated_at":"2025-12-22T16:31:06.87121382-08:00","closed_at":"2025-12-22T15:59:16.360246215-08:00","comments":[{"id":1,"issue_id":"wf-10f","author":"rogardle","text":"Stopped PRD drafting per producer request; intake brief captured and issue remains open for later.","created_at":"2025-12-24T00:43:53Z"},{"id":2,"issue_id":"wf-10f","author":"rogardle","text":"Implementation session stopped per producer request before branching/claiming. Working tree was dirty (.beads/issues.jsonl, package-lock.json); no code changes made for wf-10f.","created_at":"2025-12-24T00:43:53Z"},{"id":3,"issue_id":"wf-10f","author":"rogardle","text":"PRD session stopped per producer request (no PRD file edits made).","created_at":"2025-12-24T00:43:53Z"},{"id":4,"issue_id":"wf-10f","author":"rogardle","text":"Linked PRD: docs/dev/PRD-command-in-progress.md","created_at":"2025-12-24T00:43:53Z"},{"id":5,"issue_id":"wf-10f","author":"rogardle","text":"PR opened: https://github.com/SorraTheOrc/waif/pull/42","created_at":"2025-12-24T00:43:53Z"}]}
{"id":"wf-1at","title":"in th beads summary table the blocks calcualtion is incorrect, see wf-cvz for example","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T17:21:12.358497986-08:00","updated_at":"2025-12-23T17:21:12.358497986-08:00"}
{"id":"wf-1mv","title":"Add lint script + minimal linter config","description":"Problem\\n- The repository has no npm run lint script, but workflow docs expect it as a standard quality gate.\\n\\nGoal\\n- Implement a minimal lint configuration and add an npm run lint script that can be run locally and in CI.\\n\\nScope\\n- Keep changes minimal and low-risk; prefer TypeScript-aware linting if feasible.\\n- Avoid large rule debates; start with a small ruleset and iterate.\\n\\nDeliverables\\n- package.json: add lint script\\n- Add minimal config files (e.g., eslint config)\\n- Update docs to reference the actual lint command and what it enforces\\n- Optionally add CI job/context for branch protection\\n\\nNotes\\n- This should only proceed after wf-z3v decides to implement lint rather than removing/gating lint references.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T23:26:31.296193972-08:00","updated_at":"2025-12-22T23:27:10.965145178-08:00","dependencies":[{"issue_id":"wf-1mv","depends_on_id":"wf-z3v","type":"discovered-from","created_at":"2025-12-22T23:27:27.446599928-08:00","created_by":"daemon"}]}
{"id":"wf-1ne","title":"Spike: collect tmux probe data for ooda","status":"closed","priority":1,"issue_type":"task","assignee":"ship","created_at":"2025-12-23T17:13:16.966870001-08:00","updated_at":"2025-12-23T17:19:52.24844601-08:00","closed_at":"2025-12-23T17:19:52.24844601-08:00","close_reason":"Replaced by hierarchical child wf-cvz.1","dependencies":[{"issue_id":"wf-1ne","depends_on_id":"wf-cvz","type":"discovered-from","created_at":"2025-12-23T17:13:16.971044534-08:00","created_by":"daemon"},{"issue_id":"wf-1ne","depends_on_id":"wf-cvz","type":"blocks","created_at":"2025-12-23T17:16:32.554763826-08:00","created_by":"daemon"}]}
{"id":"wf-1xt","title":"Add waif in-progress command","description":"Add a waif in-progress command that prints a table (or emits --json) of all beads issues with status=in_progress. Use bd list --status in_progress --json when bd is available; otherwise parse .beads/issues.jsonl. Include tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T16:08:35.088717087-08:00","updated_at":"2025-12-19T16:11:47.584412718-08:00","closed_at":"2025-12-19T16:11:47.584412718-08:00"}
{"id":"wf-20x","title":"Testing Critical Bugs","status":"tombstone","priority":0,"issue_type":"bug","created_at":"2025-12-16T11:09:08.456046263-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"wf-2ch","title":"Feature: Beads DB compaction","description":"Beads DB compaction\n\nSummary\n\nImplement a Beads (bd) feature that supports safe, configurable database compaction workflows based on the recommendations and example scripts from the upstream beads examples (https://github.com/steveyegge/beads/tree/main/examples/compaction). The feature should provide both interactive and fully-automated workflows, support tiered compaction levels, thresholds to avoid low-value runs, and clear observability (logs, stats, cost estimates).\n\nMotivation\n\nCompact sqlite-backed beads DBs periodically to reclaim space, reduce query costs/latency, and keep the JSONL/DB authoritative state tidy for long-running repositories. The upstream examples include workflow.sh (interactive), cron-compact.sh (cron automation) and auto-compact.sh (thresholded automation). Re-implement and integrate these recommendations into this project so teams can run safe compaction as part of maintenance, CI, or scheduled jobs.\n\nScope / Proposed features\n\n- Command surface: provide a 'bd compact' command (or extend existing compact support) with subcommands/modes:\n  - preview / dry-run: list candidate objects and show estimated reclaimable size and issue counts without changing DB\n  - run / execute: perform compaction, with tier option (tier 1 = safe/light, tier 2 = aggressive/deep)\n  - stats: print post-compact statistics and costs (issues compacted, bytes reclaimed, estimated $ cost)\n\n- Automation scripts: add example scripts (interactive workflow.sh, cron-compact.sh, auto-compact.sh) to examples/ or docs/ demonstrating safe usage patterns. These scripts should follow upstream recommendations:\n  - cron-compact: pulls latest changes, runs compact, logs output (BD_LOG_FILE), auto-commits and pushes when compact modifies repo (opt-in)\n  - auto-compact: thresholded runs (only compact when \u003e= N eligible items), supports --tier and --dry-run\n  - workflow.sh: interactive confirmations and preview before committing\n\n- Configuration \u0026 env vars:\n  - ANTHROPIC_API_KEY: only required if using any AI preview helpers from upstream examples (optional)\n  - BD_REPO_PATH: repo path for cron/script usage\n  - BD_LOG_FILE: where to write compaction logs\n  - CLI flags: --tier, --threshold, --dry-run, --yes/--confirm to bypass prompts, --log-file\n\n- Safety \u0026 defaults:\n  - Default to dry-run unless explicit --yes/--commit flag is provided\n  - Provide preview output and require explicit confirmation for any auto-commit/push\n  - Provide idempotent behavior and clear revert guidance in runbook\n\n- Tiering \u0026 thresholds:\n  - Tier 1: Quick compacting of easy candidates; low-risk, suitable for CI/auto mode\n  - Tier 2: Ultra-compression / deep compaction; higher risk/time, suitable for scheduled maintenance\n  - Thresholds to avoid noisy runs (e.g., only run if \u003e= 50 eligible items by default)\n\n- Observability / cost monitoring:\n  - bd compact --stats to show counts, bytes reclaimed, and cost estimate\n  - Log file output and exit codes for CI/crontab\n\n- Testing \u0026 docs:\n  - Provide manual test instructions (how to run dry-run, how to run cron-compact.sh locally)\n  - Add runbook to history/ (or docs/ if intended to be permanent) with recommended schedules by project size (small/medium/large/high-velocity)\n\nOut of scope\n\n- Changes to underlying beads DB schema or the beads core sqlite engine other than invoking existing compact/rewrite mechanisms.\n\nReferences\n\n- Upstream examples: https://github.com/steveyegge/beads/tree/main/examples/compaction\n\nRecommended owners\n\n- Owner (implementation): patch or a maintainer familiar with bd internals\n- Map (PM) to coordinate documentation, acceptance testing and rollout\n\n","acceptance_criteria":"1) Ability to run non-destructive dry-run compaction and produce a preview report. 2) Provide automated compacting scripts for cron/CI (tiered: tier1 quick, tier2 deep) with threshold configuration. 3) Safe default behavior: dry-run and require explicit opt-in for auto-commit/push. 4) Export compact stats via 'bd compact --stats' and log output to configurable file. 5) Docs and runbook added to docs/ or history/ with testing steps. ","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-24T15:32:38.599454703-08:00","updated_at":"2025-12-24T15:32:38.599454703-08:00","comments":[{"id":27,"issue_id":"wf-2ch","author":"map","text":"Created feature from producer request; expanded description and acceptance criteria based on upstream beads compaction examples (examples/compaction). See history planning for draft runbook and scripts. Files created: none yet. Planning artifacts should live in history/ once implemented.","created_at":"2025-12-24T23:32:41Z"},{"id":28,"issue_id":"wf-2ch","author":"map","text":"Session record: commands executed and next steps\\n\\nCommands run:\\n- bd ready --json (inspect queue)\\n- bd create 'Feature: Beads DB compaction' -t feature -p 2 --body-file - --acceptance ... (created issue wf-2ch)\\n- bd comments add wf-2ch \"Created feature from producer request...\" (context note)\\n\\nFiles / resources referenced:\\n- Upstream examples: https://github.com/steveyegge/beads/tree/main/examples/compaction (README and scripts: workflow.sh, cron-compact.sh, auto-compact.sh)\\n- Recommended future artifacts (not yet created): examples/compaction/{workflow.sh,cron-compact.sh,auto-compact.sh}, docs/COMPACTION.md or history/COMPACTION_RUNBOOK.md\\n\\nWhat I changed:\\n- Created bd feature wf-2ch with expanded description and acceptance criteria. No repository files were modified.\\n\\nRemaining risks / follow-ups:\\n1) Owner assignment: recommend patch for implementation; map (PM) to coordinate docs/testing. Please confirm assignee.\\n2) Automation that auto-commits/pushes requires repo credentials and policy review (opt-in only).\\n3) Need tests and CI integration for thresholded runs and exit codes for cron.\\n4) Decide where permanent docs live: docs/COMPACTION.md (public) vs history/ (ephemeral runbook).\\n\\nNext recommended steps:\\n- Confirm owner (patch?)\\n- Implement bd compact subcommand and add example scripts to examples/compaction/ as draft files under history/ first, then promote to repo when ready.\\n- Add acceptance test plan and add to wf-2ch as child tasks if approved.\\n\\n,json","created_at":"2025-12-24T23:32:58Z"}]}
{"id":"wf-2gj","title":"Add bd to allowed commands for all agents","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T02:22:12.468533317-08:00","updated_at":"2025-12-22T02:22:12.468533317-08:00","dependencies":[{"issue_id":"wf-2gj","depends_on_id":"wf-5ay","type":"parent-child","created_at":"2025-12-22T16:04:44.699326323-08:00","created_by":"daemon"}]}
{"id":"wf-2ia","title":"PM Delegation Workflow","description":"PM Delegation Workflow\n\nRecord of delegation and cleanup\n\nDelegation to Patch\n- Command executed: npm run start -- ask patch to /implement wf-cvz.1\n- Result: Prompt was sent to Patch in a live tmux pane (waif-workflow:specialist.1) instructing Patch to begin implementing the probe child wf-cvz.1. Spike artifacts and a PR were later observed and are referenced from wf-cvz and wf-cvz.1.\n\nNote on duplication\n- This issue previously contained the same delegation addendum twice. The duplicate text has been removed and the single, canonical addendum is presented above.\n\nNext actions\n- Confirm whether Patch should be considered the active owner of wf-cvz.1 (currently in_progress, assignee=rgardler). If so, I will update wf-cvz.1 to assignee=patch and add a comment linking Patch's PR artifacts.\n- Verify PR at: https://github.com/SorraTheOrc/waif/pull/58 and link any additional artifacts to wf-cvz.1.\n\nAudit\n- This update deduplicates the addendum and records the canonical delegation note. For a full audit trail, see bd comments on wf-cvz and wf-cvz.1 and the beads DB (.beads/issues.jsonl).\n\n","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-23T17:30:30.980921561-08:00","updated_at":"2025-12-23T17:40:04.680798252-08:00"}
{"id":"wf-2x5","title":"tsc fails: octal escape sequences in startWork.ts","description":"## Summary\n\n[Brief description of the bug]\n\n## Steps to Reproduce\n\n1. Step 1\n2. Step 2\n3. Step 3\n\n## Expected Behavior\n\n[What should happen]\n\n## Actual Behavior\n\n[What actually happens]\n\n## Environment\n\n- OS: [e.g., macOS 15.7.1]\n- Version: [e.g., bd 0.20.1]\n- Additional context: [any relevant details]\n\n## Additional Context\n\n[Screenshots, logs, or other relevant information]\n","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-19T17:08:41.518775621-08:00","updated_at":"2025-12-22T09:26:17.210114242-08:00","closed_at":"2025-12-19T22:49:16.286035686-08:00","labels":["bug"]}
{"id":"wf-32r","title":"Beads search command: Intake brief","description":"Problem\nAs the number of beads grows it becomes harder to find the right one we are looking for. A search facility will help. Currently we need to use the bd CLI to search; this feature should be exposed in a convenient way as a waif command.\n\nUsers\nPrimary: human producer operating the waif CLI. No secondary stakeholders; agents continue to use bd directly.\n\nSuccess criteria\nProvide a waif command that searches Beads issues by default across title and description, with optional switches to expand search to notes/comments and linked documents. Done when search results are accurate, fast enough for interactive use, and accessible via CLI flags.\n\nConstraints\nNo deadlines or special constraints noted. Must not disrupt existing bd workflows; should work in current environments.\n\nExisting state\nCurrently search requires using bd CLI directly; no waif-native search command exists.\n\nDesired change\nExpose a waif CLI command that wraps search logic with progressive scope flags (default title+description, optional notes/comments, optional linked docs).\n\nLikely duplicates / related docs\n- docs/dev/CLI_PRD.md\n\nRelated issues\n- None\n\nClarifying questions\n1. Should results include metadata like status, priority, and blockers to help triage?\n2. Are fuzzy/partial matches required or should search stay exact substring/regex?\n3. How should linked document search work‚Äîdo we index docs on demand or rely on existing references?\n4. Should the command support JSON output for scripting?\n5. Are there privacy/visibility limits (e.g., ignore certain labels or private notes)?\n\nProposed next step\nNEW PRD at: docs/dev/beads_search_command_PRD.md\nRecommended next command: /prd docs/dev/beads_search_command_PRD.md \u003cissue-id\u003e","notes":"Intake brief captured via interview; related docs searched (docs/dev/CLI_PRD.md). No existing issues overlap. Next: confirm NEW PRD path docs/dev/beads_search_command_PRD.md.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-22T02:27:01.107209743-08:00","updated_at":"2025-12-22T02:38:39.644507455-08:00","comments":[{"id":6,"issue_id":"wf-32r","author":"map","text":"Linked PRD: docs/dev/beads_search_command_PRD.md","created_at":"2025-12-24T00:43:53Z"},{"id":7,"issue_id":"wf-32r","author":"map","text":"Linked PRD: docs/dev/beads_search_command_PRD.md","created_at":"2025-12-24T00:43:53Z"}]}
{"id":"wf-35m","title":"Code maintainability improvements","description":"## Overview\n\n[Describe the high-level goal and scope of this epic]\n\n## Success Criteria\n\n- [ ] Criteria 1\n- [ ] Criteria 2\n- [ ] Criteria 3\n\n## Background\n\n[Provide context and motivation]\n\n## Scope\n\n**In Scope:**\n- Item 1\n- Item 2\n\n**Out of Scope:**\n- Item 1\n- Item 2\n","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-19T21:47:33.8734976-08:00","updated_at":"2025-12-19T21:47:33.8734976-08:00","labels":["epic"]}
{"id":"wf-35m.1","title":"Refactor bd/bv CLI invocation into shared utility","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:48:10.438202021-08:00","updated_at":"2025-12-19T21:48:10.438202021-08:00","dependencies":[{"issue_id":"wf-35m.1","depends_on_id":"wf-35m","type":"parent-child","created_at":"2025-12-19T21:48:10.439483168-08:00","created_by":"daemon"}]}
{"id":"wf-35m.2","title":"Centralize issue loading logic and dedupe env/jsonl/CLI paths","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:48:12.4006343-08:00","updated_at":"2025-12-19T21:48:12.4006343-08:00","dependencies":[{"issue_id":"wf-35m.2","depends_on_id":"wf-35m","type":"parent-child","created_at":"2025-12-19T21:48:12.426971805-08:00","created_by":"daemon"}]}
{"id":"wf-35m.3","title":"Extract shared table rendering and align blockers logic","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:48:14.437851288-08:00","updated_at":"2025-12-19T21:48:14.437851288-08:00","dependencies":[{"issue_id":"wf-35m.3","depends_on_id":"wf-35m","type":"parent-child","created_at":"2025-12-19T21:48:14.469238414-08:00","created_by":"daemon"}]}
{"id":"wf-35m.4","title":"Reduce code duplication across next/recent/in-progress commands","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:48:16.637485778-08:00","updated_at":"2025-12-19T21:48:16.637485778-08:00","dependencies":[{"issue_id":"wf-35m.4","depends_on_id":"wf-35m","type":"parent-child","created_at":"2025-12-19T21:48:16.648239136-08:00","created_by":"daemon"}]}
{"id":"wf-35m.5","title":"Add color handling/util tests and centralize ANSI config","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:48:19.119696813-08:00","updated_at":"2025-12-19T21:48:19.119696813-08:00","dependencies":[{"issue_id":"wf-35m.5","depends_on_id":"wf-35m","type":"parent-child","created_at":"2025-12-19T21:48:19.135534676-08:00","created_by":"daemon"}]}
{"id":"wf-35m.6","title":"Unify clipboard copy behavior and error handling","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:48:21.203474492-08:00","updated_at":"2025-12-19T21:48:21.203474492-08:00","dependencies":[{"issue_id":"wf-35m.6","depends_on_id":"wf-35m","type":"parent-child","created_at":"2025-12-19T21:48:21.217637092-08:00","created_by":"daemon"}]}
{"id":"wf-35m.7","title":"Add missing error handling coverage for bd/bv spawn failures","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:48:23.292519541-08:00","updated_at":"2025-12-19T21:48:23.292519541-08:00","dependencies":[{"issue_id":"wf-35m.7","depends_on_id":"wf-35m","type":"parent-child","created_at":"2025-12-19T21:48:23.303631915-08:00","created_by":"daemon"}]}
{"id":"wf-35m.8","title":"Refactor issue parsing to shared type helpers and guards","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:48:25.091957986-08:00","updated_at":"2025-12-19T21:48:25.091957986-08:00","dependencies":[{"issue_id":"wf-35m.8","depends_on_id":"wf-35m","type":"parent-child","created_at":"2025-12-19T21:48:25.113528511-08:00","created_by":"daemon"}]}
{"id":"wf-367","title":"Heuristics: define and unit-test Busy/Free rules","status":"closed","priority":1,"issue_type":"task","assignee":"forge","created_at":"2025-12-23T17:13:23.010060265-08:00","updated_at":"2025-12-23T17:19:57.95384528-08:00","closed_at":"2025-12-23T17:19:57.95384528-08:00","close_reason":"Replaced by hierarchical child wf-cvz.3","dependencies":[{"issue_id":"wf-367","depends_on_id":"wf-cvz","type":"discovered-from","created_at":"2025-12-23T17:13:23.013223947-08:00","created_by":"daemon"},{"issue_id":"wf-367","depends_on_id":"wf-cvz","type":"blocks","created_at":"2025-12-23T17:16:36.627233036-08:00","created_by":"daemon"}]}
{"id":"wf-3l4","title":"test chores","status":"tombstone","priority":3,"issue_type":"chore","created_at":"2025-12-16T11:14:06.710048237-08:00","updated_at":"2025-12-16T11:15:28.937882222-08:00","deleted_at":"2025-12-16T11:15:28.937882222-08:00","deleted_by":"rogardle","delete_reason":"manual delete","original_type":"chore"}
{"id":"wf-3ur","title":"WAIF version 0.2","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-19T01:44:27.024739687-08:00","updated_at":"2025-12-19T01:44:27.024739687-08:00"}
{"id":"wf-3ur.1","title":"Add --number/-n option to 'waif next' to return multiple suggestions","description":"Add a --number/-n parameter to the 'waif next' command that defines how many suggestions to return (default 1). When -n \u003e 1, the human output should be a truncated table with columns: ID, Title, Priority, #blocked. JSON output should return an array of selected issues, each augmented with per-item waif metadata. Acceptance criteria:\\n- Default behavior without -n remains unchanged (single suggestion).\\n- 'waif next -n 3' prints a table with 3 rows containing ID, Title, Priority, and number of blocked issues for each suggestion.\\n- 'waif next --json -n 2' returns a JSON array of length 2 with full issue objects and per-item waif metadata.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-19T01:48:02.473539752-08:00","updated_at":"2025-12-19T01:48:02.473539752-08:00","dependencies":[{"issue_id":"wf-3ur.1","depends_on_id":"wf-3ur","type":"parent-child","created_at":"2025-12-19T01:48:02.47514716-08:00","created_by":"daemon"}]}
{"id":"wf-3ur.2","title":"Add workflow stage tracking to WAIF CLI: Intake brief","description":"Linked PRD: docs/dev/workflow_stage_tracking_PRD.md\n","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-19T02:11:37.42387859-08:00","updated_at":"2025-12-19T02:11:37.612667599-08:00","dependencies":[{"issue_id":"wf-3ur.2","depends_on_id":"wf-3ur","type":"parent-child","created_at":"2025-12-19T02:11:37.42576962-08:00","created_by":"daemon"}]}
{"id":"wf-3xw","title":"Post-merge: wf-rkq followups ‚Äî smoke tests \u0026 release checklist","notes":"PR: https://github.com/SorraTheOrc/waif/pull/new/feature/wf-3xw-release-notes","status":"in_progress","priority":2,"issue_type":"task","assignee":"ship","created_at":"2025-12-24T16:38:59.236883486-08:00","updated_at":"2025-12-24T16:42:52.023887176-08:00","external_ref":"gh:feature/wf-3xw-release-notes","dependencies":[{"issue_id":"wf-3xw","depends_on_id":"wf-rkq","type":"discovered-from","created_at":"2025-12-24T16:38:59.249451712-08:00","created_by":"daemon"}]}
{"id":"wf-4y2","title":"waif next copies recommended issue ID to clipboard","description":"Enhance waif next so the recommended issue ID is copied to the OS clipboard on success (best-effort). It must not fail the command if clipboard tooling is unavailable; instead, optionally log a debug message when --verbose.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T16:22:29.56100019-08:00","updated_at":"2025-12-19T16:24:30.694077988-08:00","closed_at":"2025-12-19T16:24:30.694077988-08:00"}
{"id":"wf-54a","title":"Add dark mode","description":"Priority: 2","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-16T12:44:06.726185979-08:00","updated_at":"2025-12-16T12:44:18.171003121-08:00","deleted_at":"2025-12-16T12:44:18.171003121-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-58w","title":"Build countdown timer application with Agent Mail integration","description":"## Feature Request\n\nBuild a real-world countdown timer application that demonstrates Agent Mail integration for cross-agent communication and coordination.\n\n## Motivation\n\nAgent Mail (https://github.com/Dicklesworthstone/mcp_agent_mail) is an MCP server that enables AI agents to communicate asynchronously via a message queue system. Building a countdown timer application serves multiple purposes:\n\n1. **Learn Agent Mail**: Practical experience with MCP-based agent communication\n2. **Real Application**: Create a useful tool (multiple timers with alarms)\n3. **Demonstrate Coordination**: Show how agents can coordinate on building a complete application\n4. **Test Workflow**: Exercise beads issue tracking in a realistic development scenario\n\n## Use Cases\n\n1. **Multiple Timers**: User can create multiple countdown timers running simultaneously\n2. **Timer Management**: Start, pause, resume, cancel, and reset individual timers\n3. **Visual Display**: Show remaining time for all active timers\n4. **Audio Alarms**: Sound notification when timer completes\n5. **Persistent State**: Save timer state so they survive application restart\n6. **Agent Coordination**: Use Agent Mail for agents to coordinate implementation tasks\n\n## Proposed Solution\n\nBuild a terminal-based countdown timer application with:\n\n**Technology Stack**:\n- Python or Node.js for the application\n- Agent Mail MCP server for agent-to-agent communication\n- Sound library for alarms (e.g., playsound, beep, or system notification)\n- Simple TUI or CLI interface\n- JSON file for persistence\n\n**Agent Mail Usage**:\n- Coordinate development tasks between multiple AI agents\n- Use message queues to assign subtasks (UI, timer logic, alarm system, etc.)\n- Demonstrate asynchronous agent communication patterns\n\n**Features**:\n- `timer add \u003cname\u003e \u003cduration\u003e` - Create new timer (e.g., \"5m\", \"2h30m\")\n- `timer list` - Show all active timers\n- `timer pause \u003cname\u003e` - Pause a timer\n- `timer resume \u003cname\u003e` - Resume a paused timer\n- `timer cancel \u003cname\u003e` - Cancel a timer\n- `timer reset \u003cname\u003e` - Reset timer to original duration\n\n## Alternatives Considered\n\n- **Alternative 1**: Build a web-based timer with real-time updates\n  - Why not chosen: More complex, focus should be on Agent Mail integration not web development\n  \n- **Alternative 2**: Simple single-timer application\n  - Why not chosen: Too basic, doesn't showcase agent coordination or complex state management\n  \n- **Alternative 3**: Pomodoro timer specific\n  - Why not chosen: Less flexible than general countdown timers","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2025-12-16T12:51:31.969126204-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","labels":["application","feature"],"dependencies":[{"issue_id":"wf-58w","depends_on_id":"wf-dt1","type":"blocks","created_at":"2025-12-16T16:41:23.490283632-08:00","created_by":"rogardle"}],"deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"wf-5ay","title":"Can agents be allowed to run all commands except destructive ones?","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-22T02:25:24.190128429-08:00","updated_at":"2025-12-22T16:35:50.098089928-08:00"}
{"id":"wf-5bh","title":"Docs: Add QUICKSTART.md referenced by AGENTS.md","description":"Add a concise QUICKSTART.md or update AGENTS.md to remove the reference; include setup, install, and 'bd ready' quick steps.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:44:42.252037617-08:00","updated_at":"2025-12-19T22:11:35.63102098-08:00","dependencies":[{"issue_id":"wf-5bh","depends_on_id":"wf-s5d","type":"parent-child","created_at":"2025-12-19T22:11:34.489495014-08:00","created_by":"daemon"}]}
{"id":"wf-5bm","title":"Pilot Option 3 workflow: team worktree + topic branches","description":"Problem\\n- Current docs assume 1 bd issue -\u003e 1 team branch. Teams are persistent and need a repeatable flow for many bd issues, without per-issue team branches or conflicting worktree constraints.\\n\\nGoal\\n- Run a small pilot adopting Option 3: one long-lived team worktree + short-lived topic branches per bd issue, with optional agent sub-branches for true parallelism.\\n\\nScope\\n- Process-only: validate naming conventions, handoff template usage, and branch hygiene.\\n- Do NOT change release policy, secrets, or infrastructure.\\n\\nChecklist\\n1) Choose pilot team name and create team worktree\\n   - Convention proposal: ../worktree_team_\u003cteam\u003e (e.g., ../worktree_team_core)\\n   - Commands: git fetch origin; git worktree add ../worktree_team_\u003cteam\u003e origin/main\\n\\n2) Choose 1-2 real bd issues to implement using the new flow\\n   - For each issue, create topic branch: topic/bd-\u003cid\u003e/\u003cshort-desc\u003e from origin/main\\n   - Keep PRs small; merge frequently\\n\\n3) Parallel work test (optional)\\n   - If 2+ agents need to work simultaneously, create sub-branches: topic/bd-\u003cid\u003e/\u003cpatch|docs|ci\u003e\\n   - Merge sub-branches into the topic branch (designate merge owner in bd)\\n\\n4) PR conventions\\n   - PR title includes bd-\u003cid\u003e\\n   - Use .github/PULL_REQUEST_TEMPLATE.md\\n   - Record commands run + files touched in bd handoff notes\\n\\n5) Metrics / success criteria\\n   - Cycle time: compare time-to-PR vs old model\\n   - Merge friction: number of conflicts and time to resolve\\n   - CI churn: number of failed reruns due to merge conflicts\\n   - Clarity: could a new agent understand branch/worktree state from bd + PR alone?\\n\\n6) Rollback plan\\n   - If the flow causes confusion or blocking, revert to per-issue branch model for that team and document lessons learned in bd.\\n\\nDeliverables\\n- At least one PR created using topic branches from the team worktree\\n- At least one hard handoff note posted using docs/.github/handoff_note_template.md\\n- Summary comment on this issue capturing outcomes, gotchas, and recommended doc tweaks\\n\\nRelated docs\\n- docs/dev/git_workflow.md (Option 3 guidance)\\n- docs/.github/handoff_note_template.md\\n- docs/.github/branch_protection.md\\n\\nRelated issues\\n- wf-79y.14 PR validation workflow (future enforcement)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T23:22:36.103011438-08:00","updated_at":"2025-12-22T23:23:37.435250548-08:00","dependencies":[{"issue_id":"wf-5bm","depends_on_id":"wf-79y","type":"related","created_at":"2025-12-22T23:27:58.596990017-08:00","created_by":"daemon"}]}
{"id":"wf-5w2","title":"Logging: implement history/ persisted logs and redaction policy","status":"closed","priority":1,"issue_type":"task","assignee":"patch","created_at":"2025-12-23T17:13:25.187590601-08:00","updated_at":"2025-12-23T17:20:02.475730359-08:00","closed_at":"2025-12-23T17:20:02.475730359-08:00","close_reason":"Replaced by hierarchical child wf-cvz.4","dependencies":[{"issue_id":"wf-5w2","depends_on_id":"wf-cvz","type":"discovered-from","created_at":"2025-12-23T17:13:25.192747685-08:00","created_by":"daemon"},{"issue_id":"wf-5w2","depends_on_id":"wf-cvz","type":"blocks","created_at":"2025-12-23T17:16:39.622242784-08:00","created_by":"daemon"}]}
{"id":"wf-63w","title":"Render issue title string with configurable symbols","description":"- Problem\n  - When listing issues in the CLI, we want a compact, readable \"title string\" that quickly conveys issue type and status without needing a full table.\n  - Today there is no single canonical renderer for an issue's title line.\n\n- Users\n  - Primary: PM using `waif` CLI outputs (e.g., next/ready/recent lists).\n  - Secondary: TUI consumers and tests that need stable formatting.\n\n- Success criteria\n  - Provide a pure function that renders an issue's title line as:\n    - `\u003ctypeSymbol\u003e\u003cspace\u003e\u003cstatusSymbol\u003e\u003cspace\u003e\u003ctitleOrTruncatedTitle\u003e`\n  - Optional truncation: when `n \u003c= 0` (default), no truncation.\n  - When truncating, use ellipsis (`...`) to indicate truncation and ensure the final returned string length is **never greater than `n`**.\n  - Type/status glyphs are configurable via a config file with sensible defaults.\n\n- Constraints\n  - Must not hardcode glyphs in business logic; must load defaults from config.\n  - Output should be deterministic for tests (no locale/emoji variability unless configured).\n\n- Existing state\n  - We have issue listing/table helpers but no shared per-issue title renderer.\n\n- Desired change\n  - Add a new helper function (name TBD, e.g. `renderIssueTitle`) that takes:\n    - `issue` (at least: `issue_type`, `status`, `title`)\n    - optional `maxLen` (default `\u003c=0` meaning \"no truncation\")\n    - optional config override (or config is loaded by caller)\n  - Add a config file (e.g. `config/symbols.json` or `config/symbols.yaml`) defining:\n    - mapping of issue type -\u003e symbol (bug/feature/task/epic/chore)\n    - mapping of status -\u003e symbol (open/in_progress/done/closed/tombstone)\n    - sensible defaults (ASCII-safe by default; unicode optional).\n  - Add/adjust tests to cover:\n    - formatting for each type/status\n    - truncation boundary behavior (n small, exact boundary, n\u003c=0)\n    - ellipsis behavior and exact length guarantee.\n\n- Clarifying questions\n  1. Do we want defaults to be ASCII-only (e.g., `B`, `F`, `T`, ...) or unicode (e.g., `üêõ`, `‚ú®`, ...)? Proposed default: ASCII-safe.\n  2. Which statuses are expected in this repo's `Issue` model? (At minimum: open/in_progress/closed; others appear in Beads output.) Proposed: support `open`, `in_progress`, `done`, `closed`, `tombstone`.\n\n- Acceptance criteria\n  - [ ] A new function exists that returns `\u003ctypeSym\u003e \u003cstatusSym\u003e \u003ctitle\u003e` with optional truncation.\n  - [ ] If `maxLen \u003c= 0` then no truncation occurs.\n  - [ ] If truncation occurs, returned string contains `...` and `len(result) \u003c= maxLen` always.\n  - [ ] Glyphs/symbols come from a config file with sensible defaults.\n  - [ ] Unit tests cover types/statuses and truncation edge cases.\n\n- Proposed next step\n  - Implement in `src/lib/` and wire into list outputs later.\n","notes":"PR: https://github.com/SorraTheOrc/wafi/pull/7","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-19T11:27:34.05515748-08:00","updated_at":"2025-12-19T15:13:42.422575288-08:00","closed_at":"2025-12-19T15:13:42.422575288-08:00"}
{"id":"wf-6j5","title":"(deleted)","status":"tombstone","priority":0,"issue_type":"task","created_at":"2025-12-18T13:09:26.86264662-08:00","updated_at":"2025-12-18T13:38:16.928947451-08:00","deleted_at":"2025-12-16T20:44:18.166999953Z","deleted_by":"rogardle","delete_reason":"batch delete"}
{"id":"wf-6pe","title":"Idle Scheduler: per-terminal idle-time scheduler (drop-in Bash module)","description":"# **Drop‚ÄëIn Bash Module: Idle Scheduler with Randomized Interval**\n\n## **1. Overview**\nThis module provides a **per‚Äëterminal idle‚Äëtime scheduler** for Bash.  \nIt executes a user‚Äëdefined task **only when the terminal is idle** (i.e., Bash is displaying the prompt and no interactive foreground process is running).  \n\nExecution occurs at **randomized intervals between 20 and 40 seconds** (30 ¬± 10 seconds jitter).  \nEach terminal session maintains its own independent schedule and state.\n\n---\n\n## **2. What Is a ‚ÄúDrop‚ÄëIn Bash Module‚Äù?**\nA **drop‚Äëin Bash module** is a standalone `.sh` file designed to be:\n\n- **Self‚Äëcontained** (no external dependencies)\n- **Safe to source** from `.bashrc`, `.bash_profile`, or a modular directory such as `~/.bashrc.d/`\n- **Non‚Äëintrusive** (does not override user settings unless explicitly intended)\n- **Composable** with other modules\n\nA drop‚Äëin module:\n\n- Should not assume global variables unless it defines them  \n- Should not overwrite existing `PROMPT_COMMAND` logic  \n- Must chain cleanly with other prompt hooks  \n- Should be removable simply by deleting the file\n\nThis module follows those rules.\n\n---\n\n## **3. Goals**\n- Provide a lightweight, dependency‚Äëfree idle scheduler.\n- Ensure tasks run **only when the terminal is idle**.\n- Introduce **random jitter** to avoid synchronized behaviour across terminals.\n- Maintain **per‚Äëterminal isolation**.\n- Be installable simply by dropping a file into a Bash module directory.\n\n---\n\n## **4. Non‚ÄëGoals**\n- Not a system‚Äëwide scheduler.\n- Not a precise timing mechanism.\n- Not persistent across sessions.\n- Not intended for long‚Äërunning background jobs.\n\n---\n\n## **5. Functional Requirements**\n\n### **5.1 Idle Detection**\n- Scheduler runs only when Bash is about to display the prompt.\n- Implemented via `PROMPT_COMMAND`.\n- Must not run while a foreground process is active.\n\n### **5.2 Randomized Interval**\n- After each execution, the next interval is randomly selected.\n- Range: **20‚Äì40 seconds**.\n- Uses Bash‚Äôs `$RANDOM`.\n\n### **5.3 Per‚ÄëTerminal State**\nEach terminal session maintains:\n\n- `LAST_IDLE_RUN` ‚Äî timestamp of last execution  \n- `NEXT_IDLE_INTERVAL` ‚Äî randomized delay until next run  \n\nState is stored in shell variables scoped to the session.\n\n### **5.4 User‚ÄëDefined Task**\n- The module exposes a function `idle_task()` for user override.\n- Default implementation prints a timestamp.\n\n---\n\n## **6. Implementation (Drop‚ÄëIn Module)**\n\nSave as:  \n`~/.bashrc.d/idle-scheduler.sh`  \n(or any sourced location)\n\n```bash\n# --- Idle Scheduler Module (Drop-In) ---\n\n# User-overridable idle task\nidle_task() {\n    echo \"[idle task] Running at $(date)\"\n}\n\n# Random interval bounds (seconds)\nIDLE_MIN=20\nIDLE_MAX=40\n\n# Initialize state if not already set\nLAST_IDLE_RUN=${LAST_IDLE_RUN:-0}\nNEXT_IDLE_INTERVAL=${NEXT_IDLE_INTERVAL:-$(( RANDOM % (IDLE_MAX - IDLE_MIN + 1) + IDLE_MIN ))}\n\n# Preserve existing PROMPT_COMMAND\n__idle_prev_prompt_command=\"$PROMPT_COMMAND\"\n\n# Compose new PROMPT_COMMAND\nPROMPT_COMMAND='\\\n  now=$(date +%s)\\\n\\\n  if (( now - LAST_IDLE_RUN \u003e= NEXT_IDLE_INTERVAL )); then\\\n      idle_task\\\n      LAST_IDLE_RUN=$now\\\n      NEXT_IDLE_INTERVAL=$(( RANDOM % (IDLE_MAX - IDLE_MIN + 1) + IDLE_MIN ))\\\n  fi\\\n\\\n  # Chain previous PROMPT_COMMAND if it exists\\\n  if [[ -n \"$__idle_prev_prompt_command\" ]]; then\\\n      eval \"$__idle_prev_prompt_command\"\\\n  fi\\\n'\n```\n\n---\n\n## **7. Behaviour Examples**\n\n### **7.1 Idle Terminal**\n- User presses Enter repeatedly  \n- Scheduler fires at random intervals  \n- Output appears between prompts\n\n### **7.2 Busy Terminal**\n- User runs `vim`, `top`, `ssh`, etc.  \n- Scheduler does **not** run  \n- Execution resumes when prompt returns\n\n### **7.3 Multiple Terminals**\n- Each terminal has its own independent timer  \n- Random jitter prevents synchronized execution\n\n---\n\n## **8. Extensibility**\n\n### **8.1 Optional Enhancements**\n- Only run when last command succeeded  \n- tmux‚Äëmode awareness  \n- Subshell suppression  \n- Logging hooks  \n- Integration with agent‚Äëbased workflows (beads, waif, etc.)\n\n### **8.2 Future Extensions**\n- Pluggable idle‚Äëtask registry  \n- Per‚Äëproject idle hooks  \n- Adaptive intervals based on load or context  \n\n---\n\n## **9. Risks \u0026 Mitigations**\n\n| Risk | Mitigation |\n|------|------------|\n| Excessive output | Override `idle_task` to silence or redirect |\n| PROMPT_COMMAND conflicts | Module chains safely with existing logic |\n| Too frequent execution | Increase `IDLE_MIN` and `IDLE_MAX` |\n| Non‚Äëinteractive shells | Guard with `[[ $- == *i* ]]` if needed |\n\n---\n\n## **10. Summary**\nThis drop‚Äëin Bash module provides a clean, modular, and dependency‚Äëfree way to run tasks during terminal idle time with randomized intervals. It integrates safely with existing shell configurations and supports per‚Äëterminal isolation, making it ideal for lightweight automation, agent loops, and background checks.\n\n---\n\nIf you want, I can also generate:\n\n- a **module loader** for `.bashrc.d/`  \n- a **waif‚Äëstyle PRD version**  \n- a **beads node spec**  \n- or a **tmux‚Äëaware variant**\n\nJust tell me the direction you want to take it.\n","notes":"Documented that the tmux workflow auto-loads the idle scheduler for the PM pane with idle_task(){ clear; waif in-progress; }.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-19T23:57:36.011092114-08:00","updated_at":"2025-12-20T20:33:27.127557723-08:00","closed_at":"2025-12-20T20:33:27.127563346-08:00","labels":["feature"]}
{"id":"wf-70j","title":"Define the PM process for selecting and assigning work: Intake brief","description":"Linked PRD: docs/dev/pm_assignment_PRD.md\n","notes":"PR #59 merged; beads-only change recorded. Files changed: .beads/issues.jsonl. Follow-ups: implement child beads wf-70j.* as needed.\n\n---\n\nScribbler: delegated PR creation to Ship via waif ask for branch wf-70j/child-beads (beads-only change: .beads/issues.jsonl). Ask: waif ask ship to raise PR with commit+push+gh pr create. Ask log: /home/rgardler/.waif/logs/ask.log.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-23T21:53:01.358272443-08:00","updated_at":"2025-12-24T13:36:58.60531-08:00","closed_at":"2025-12-23T22:55:24.341353595-08:00","comments":[{"id":23,"issue_id":"wf-70j","author":"map","text":"Linked PRD: docs/dev/pm_assignment_PRD.md","created_at":"2025-12-24T05:59:24Z"},{"id":24,"issue_id":"wf-70j","author":"map","text":"Scribbler review: edited PRD at docs/dev/pm_assignment_PRD.md (clarity, acceptance criteria, rollout plan). Changelog in PRD header.","created_at":"2025-12-24T06:08:57Z"},{"id":25,"issue_id":"wf-70j","author":"scribbler","text":"Created child beads for PRD implementation (skills-based workflow that reuses /intake and /prd). New children: wf-70j.1 composition decision; wf-70j.2 interview/intake skill; wf-70j.3 PRD skill + idempotent linking; wf-70j.4 bead plan generation; wf-70j.5 assignment proposal (propose-only); wf-70j.6 command wiring; wf-70j.7 audit logging; wf-70j.8 pilot evaluation.","created_at":"2025-12-24T06:23:21Z"}]}
{"id":"wf-70j.1","title":"PM skill: define workflow composition with /intake and /prd","description":"Define the intended composition between /intake and /prd and the new PM skill(s). Decide wrap vs internal-call vs shared-library approach, and identify the single source of truth for templates/questions. Deliverable: a short decision recorded in bd notes plus pointers to the docs/paths to update.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T22:22:13.175201743-08:00","updated_at":"2025-12-23T22:22:44.155545047-08:00","dependencies":[{"issue_id":"wf-70j.1","depends_on_id":"wf-70j","type":"parent-child","created_at":"2025-12-23T22:22:13.183564611-08:00","created_by":"daemon"}]}
{"id":"wf-70j.2","title":"PM skill: scripted interview + intake normalization (reuse /intake)","description":"Implement the structured PM interview/intake capture as an agent skill, leveraging the existing /intake command behavior/templates. Must accept bd issue id seed context and produce normalized problem/users/success/constraints. Record output in bd notes for audit. Acceptance: can run end-to-end on a sample issue without manual reformatting.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T22:22:47.446996428-08:00","updated_at":"2025-12-23T22:22:47.446996428-08:00","dependencies":[{"issue_id":"wf-70j.2","depends_on_id":"wf-70j","type":"parent-child","created_at":"2025-12-23T22:22:47.462338638-08:00","created_by":"daemon"}]}
{"id":"wf-70j.3","title":"PM skill: PRD authoring (reuse /prd) + idempotent PRD linking","description":"Implement PRD authoring/updating as an agent skill built on the existing /prd command. Create PRD at docs/dev/\u003cfeature\u003e_PRD.md when missing; otherwise link existing PRD. Ensure idempotent traceability updates on source issue: add/maintain 'Linked PRD: \u003cpath\u003e' and external-ref 'PRD: \u003cpath\u003e' without duplicates. Acceptance: rerun produces no duplicate links.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T22:22:50.873966617-08:00","updated_at":"2025-12-23T22:22:50.873966617-08:00","dependencies":[{"issue_id":"wf-70j.3","depends_on_id":"wf-70j","type":"parent-child","created_at":"2025-12-23T22:22:50.887905924-08:00","created_by":"daemon"}]}
{"id":"wf-70j.4","title":"PM skill: generate bead hierarchy (plan) with PRD traceability","description":"Implement bead hierarchy generation as part of the PM skill. Given a PRD path and source issue, propose and/or create a parent/child bead plan (bd create), with clear titles/deliverables and links back to the PRD. Must support parallelizable decomposition. Acceptance: created beads include PRD reference and are logically grouped under a parent bead or the source issue.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T22:22:53.00586385-08:00","updated_at":"2025-12-23T22:22:53.00586385-08:00","dependencies":[{"issue_id":"wf-70j.4","depends_on_id":"wf-70j","type":"parent-child","created_at":"2025-12-23T22:22:53.032067071-08:00","created_by":"daemon"}]}
{"id":"wf-70j.5","title":"PM skill: assignment proposal heuristics + propose-only confirmation","description":"Implement assignment proposal generation for each bead: suggest assignee(s) with rationale (role/skill match, dependencies, risks). Must default to propose-only and never change assignees without explicit Producer confirmation. Record proposals in bd notes/comments for audit. Acceptance: proposals produced for each bead in a plan, and no bd assignee updates occur in propose mode.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-23T22:22:56.139938581-08:00","updated_at":"2025-12-23T22:22:56.139938581-08:00","dependencies":[{"issue_id":"wf-70j.5","depends_on_id":"wf-70j","type":"parent-child","created_at":"2025-12-23T22:22:56.155152609-08:00","created_by":"daemon"}]}
{"id":"wf-70j.6","title":"PM skill: command surface wiring (/intake, /prd, /assign-propose)","description":"Expose/standardize the command surface for the PM workflow: /intake, /prd, and /assign-propose (names may align to existing conventions). Ensure input validation and deterministic outputs. Acceptance: commands run end-to-end with clear errors; PM skill composes with /intake and /prd behavior.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T22:22:59.310732856-08:00","updated_at":"2025-12-23T22:22:59.310732856-08:00","dependencies":[{"issue_id":"wf-70j.6","depends_on_id":"wf-70j","type":"parent-child","created_at":"2025-12-23T22:22:59.320787601-08:00","created_by":"daemon"}]}
{"id":"wf-70j.7","title":"PM workflow: observability + audit notes (bd comments/notes)","description":"Add consistent audit logging to bd notes/comments for actions taken: PRD created/linked, beads created (IDs), and assignment proposals with rationale. Must be concise and idempotent (avoid duplicate noise). Acceptance: each PM run leaves a single clear audit record on the source issue.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T22:23:03.190873907-08:00","updated_at":"2025-12-23T22:23:03.190873907-08:00","dependencies":[{"issue_id":"wf-70j.7","depends_on_id":"wf-70j","type":"parent-child","created_at":"2025-12-23T22:23:03.2112867-08:00","created_by":"daemon"}]}
{"id":"wf-70j.8","title":"Pilot evaluation: run 10 requests and measure proposal acceptance","description":"Execute the pilot on 10 Producer requests using the PM skill workflow. Record outcomes: PRD created/linked, bead plan produced, assignments proposed, and whether Producer accepted without correction. Acceptance: \u003e=90% acceptance rate recorded in bd notes with the sample set referenced.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-23T22:23:06.682131095-08:00","updated_at":"2025-12-23T22:23:06.682131095-08:00","dependencies":[{"issue_id":"wf-70j.8","depends_on_id":"wf-70j","type":"parent-child","created_at":"2025-12-23T22:23:06.694518481-08:00","created_by":"daemon"}]}
{"id":"wf-73k","title":"Update /prd: accept bd issue ID as interview seed","description":"Enhance the OpenCode /prd command so it can take a beads issue ID (e.g., bd-123) as the starting input to the interview process.\\n\\nBehavior:\\n- If a bd issue ID is provided as an argument, /prd should fetch the issue details (at minimum description + acceptance) and use that content as initial context for the PRD interview.\\n- /prd should still support the existing create-vs-edit behavior when passed a PRD path/directory.\\n- If both a PRD path and an issue ID are provided, path selects the target file and issue provides seed context.\\n\\nUpdate docs/Workflow.md Step 2 to document the bd-id invocation pattern.","notes":"Updated docs/Workflow.md to direct agents to /implement for branch/PR/beads hygiene; hardened /implement command (assignee=rogardle, missing origin guidance, bd sync --flush-only fallback). Commit: 5cabf1c","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-17T13:00:49.431468333-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","labels":["opencode","workflow"],"deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-74","title":"Find next item to work on: Intake brief","description":"Linked PRD: /tmp/test-prd-md.md","notes":"PR: https://github.com/SorraTheOrc/wafi/pull/1","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T20:35:09.113334635-08:00","updated_at":"2025-12-19T02:00:18.050994668-08:00","closed_at":"2025-12-19T02:00:18.050994668-08:00","comments":[{"id":8,"issue_id":"wf-74","author":"patch","text":"Docs updated to reflect current waif next output: removed In Progress and Recommended Summary heading; detail section now '# Details'. Renamed docs/dev/implemented/find_next_PRD.md -\u003e docs/dev/prd-command-next.md and updated its requirements/output. Updated references in README.md, docs/Workflow.md, and CHANGELOG.md.","created_at":"2025-12-24T00:43:53Z"}]}
{"id":"wf-79y","title":"Epic: Git workflow enforcement \u0026 automation","description":"Implement branch protections, PR templates, CI gates, commit conventions, pre-commit hooks, bd\u003c\u003ePR automation, LFS policy, and rollout plan to align with best-practice Git workflows for multi-agent teams.\\n\\nGoal: Make main reliably releasable, reduce conflicts, and codify agent push/merge policies.\\n\\nSee docs/dev/git_workflow.md for the current guidance; this epic will track implementing the high-priority recommendations and follow-ups.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-22T22:30:13.220015464-08:00","updated_at":"2025-12-22T22:30:13.220015464-08:00","comments":[{"id":9,"issue_id":"wf-79y","author":"ship","text":"Updated workflow docs to Option 3 (team worktree + topic branches) and updated supporting templates/docs.\\n\\nChanges\\n- docs/dev/git_workflow.md: adopt Option 3; add worktree constraint note; update naming conventions (team worktrees, topic branches, optional agent sub-branches).\\n- docs/.github/handoff_note_template.md: update to reference topic branches and optional sub-branches; rename 'Risks / TODOs' -\u003e 'Risks / follow-ups'.\\n- docs/.github/permissions_matrix.md: expand from draft to table; align with .opencode permissions concept (ask for push/merge/tag).\\n- docs/.github/branch_protection.md: mention suggested status check name  (wf-79y.14).\\n- .github/PULL_REQUEST_TEMPLATE.md: add recommended branch naming.\\n\\nValidation\\n- npm test: PASS (note: \n\u003e waif@0.1.0 build\n\u003e eval \"$(direnv export bash)\" \u0026\u0026 tsc --project tsconfig.json prints direnv blocked message, but tests still passed).\\n- npm run lint: N/A (no lint script in package.json; consider adding or updating docs to match reality).\\n- npm run build: emits direnv blocked message in this environment; suggests build step may be sensitive to direnv being allowed.\\n\\nFollow-ups / risks\\n- Consider updating docs to avoid implying a lint script exists, or add lint script + CI check.\\n- Consider adding/landing PR validation workflow per wf-79y.14 to enforce title pattern and publish status check .","created_at":"2025-12-24T00:43:53Z"},{"id":10,"issue_id":"wf-79y","author":"ship","text":"Correction: suggested status check name is 'pr/validate-title' (wf-79y.14). The previous comment lost it due to shell backtick parsing.","created_at":"2025-12-24T00:43:53Z"}]}
{"id":"wf-79y.1","title":"Add branch protection and PR gating","description":"Add and document branch protection rules for main and any protected branches.\\n\\nRequirements (suggested):\\n- Block force pushes to main\\n- Require pull request reviews before merging (1-2 approvers)\\n- Require passing CI status checks before merge (ci/test, ci/lint, ci/build)\\n- Restrict who can push to main (optional: only CI and designated humans)\\n- Enforce linear history or preferred merge method (document policy)\\n\\nDeliverables:\\n1) Configure branch protection in the Git provider (admins only).\\n2) Add docs/.github/branch_protection.md describing exact settings and rationale.\\n3) Add a bd note referencing the change and any required admin actions.\\n\\nReferences:\\n- GitHub docs: https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/configuring-protected-branches\\- Use repo admin to set these.\\n","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T22:30:16.414509034-08:00","updated_at":"2025-12-22T22:30:16.414509034-08:00","dependencies":[{"issue_id":"wf-79y.1","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:30:16.442481034-08:00","created_by":"daemon"}]}
{"id":"wf-79y.10","title":"Document security notes: secrets, CI credentials, signed commits","description":"Add security guidance: never commit secrets, where CI secrets live, rotation policy, and optional signed commits guidance.\\n\\nDeliverables:\\n1) docs/dev/security_git_notes.md documenting secrets handling and CI credentials.\\n2) Add guidance on optional GPG signing for commits and verification for releases.\\n\\nReferences:\\n- GitHub Actions Secrets: https://docs.github.com/en/actions/security-guides/encrypted-secrets","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-22T22:30:38.632536879-08:00","updated_at":"2025-12-22T22:30:38.632536879-08:00","dependencies":[{"issue_id":"wf-79y.10","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:30:38.679469118-08:00","created_by":"daemon"}]}
{"id":"wf-79y.11","title":"Add BD handoff note template to repo and process","description":"Add the handoff note template to history/handoff_note_template.md (done) and integrate the template into team process. Tasks:\\n1) Move history/handoff_note_template.md into docs/.github/handoff_note_template.md (or keep in history/ and link) and ensure it's discoverable by agents and humans.\\n2) Update docs/dev/git_workflow.md to reference the template and include a short copy/paste snippet.\\n3) Add a small bd onboarding note/example showing how to use the template for a Patch-\u003eProbe handoff.\\n\\nDeliverables:\\n- docs/.github/handoff_note_template.md or link from README to history/\\n- docs/dev/git_workflow.md updated to point to the template (and include usage guidance).\\n- Example bd comment in history/example_handoffs.md\\n\\nNotes: history/handoff_note_template.md is already created. This task will fully integrate it into the process.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T22:43:30.794853033-08:00","updated_at":"2025-12-23T16:21:28.154774482-08:00","dependencies":[{"issue_id":"wf-79y.11","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:43:30.796027263-08:00","created_by":"daemon"}]}
{"id":"wf-79y.12","title":"Add branch protection recommendations and implement settings","description":"Add the branch protection recommendation doc (docs/.github/branch_protection.md already created) and implement the protected branch settings.\\n\\nDeliverables:\\n1) docs/.github/branch_protection.md in repo (done).\\n2) Create a short checklist for repo admins to apply the settings.\\n3) If permitted, propose the JSON payload to apply via GitHub API or terraform.\\n\\nNotes: Actual application of protection rules requires admin rights; coordinate with org admins.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T22:50:37.94613759-08:00","updated_at":"2025-12-22T22:50:37.94613759-08:00","dependencies":[{"issue_id":"wf-79y.12","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:50:37.956615576-08:00","created_by":"daemon"}]}
{"id":"wf-79y.13","title":"Add PR template enforcement (oykk request template)","description":"Add the PR template (created at .github/PULL_REQUEST_TEMPLATE.md) and enforce PR title formatting via a CI check or GitHub Action.\\n\\nDeliverables:\\n1) .github/PULL_REQUEST_TEMPLATE.md added (done).\\n2) Create a GitHub Action or CI job to validate PR titles include bd-\u003cid\u003e and comment if missing.\\n3) Update docs/dev/git_workflow.md to reference the enforcement and PR template.\\n\\nNotes: Implementing the action requires adding a workflow file in .github/workflows/.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T22:50:41.177178665-08:00","updated_at":"2025-12-22T22:50:41.177178665-08:00","dependencies":[{"issue_id":"wf-79y.13","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:50:41.187414235-08:00","created_by":"daemon"}]}
{"id":"wf-79y.14","title":"Create PR validation workflow (check PR title \u0026 template)","description":"Problem\\n- PRs must reference beads issues (bd-\u003cid\u003e) in their title for traceability and automation. We need an automated CI/GitHub Action workflow to validate PR titles (and optionally ensure required PR body fields) and to provide clear feedback when PRs don't comply.\\n\\nGoal\\n- Add a GitHub Action (or CI job) that validates PR titles match the required pattern (contains 'bd-\u003cid\u003e') and optionally checks the PR body includes required sections from the PR template. The workflow should comment on PRs that fail validation and expose a status check so branch protection can block merges until corrected.\\n\\nDeliverables\\n1) Add workflow file: .github/workflows/pr-validation.yml implementing title and optional body checks.\\n2) Provide a configurable regex for bd id patterns (default: 'bd-[A-Za-z0-9_.-]+').\\n3) When a PR fails validation, the action should post a helpful comment showing the required format and a link to .github/PULL_REQUEST_TEMPLATE.md and docs/dev/git_workflow.md.\\n4) Publish the status check name (e.g., 'pr/validate-title') so it can be required in branch protection.\\n5) Document the workflow in docs/.github/branch_protection.md and docs/dev/git_workflow.md.\\n6) Add tests or example PRs demonstrating the action behavior (optional).\\n\\nNotes/Implementation options\\n- Use a community action (for example, 'amannn/validate-pr-title' or similar) or implement a small JavaScript action that runs the checks.\\n- References: https://docs.github.com/en/actions, https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#pull_request_event\\n\\nAcceptance criteria\\n- A workflow file exists in .github/workflows/ that validates PR titles and posts clear comments on failure.\\n- The workflow exposes a status check name suitable for branch protection rules.\\n\\nOwner suggestions\\n- Map (PM) to coordinate; Forge or a human with repo CI permissions to implement the action.\\n","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T22:57:19.478933244-08:00","updated_at":"2025-12-22T22:57:19.478933244-08:00","dependencies":[{"issue_id":"wf-79y.14","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:57:19.490448474-08:00","created_by":"daemon"}]}
{"id":"wf-79y.15","title":"Permissions \u0026 enforcement matrix for git operations","description":"Problem\\n- Agents and humans need an unambiguous reference that maps roles to allowed Git operations (push, merge, tag, force-push) so day-to-day coordination doesn't require digging into .opencode files repeatedly.\n\nGoal\\n- Produce a small, authoritative Permissions \u0026 Enforcement matrix documenting which roles may perform which operations, the approval flow for exceptions, and how agents should request permissions (bd note pattern). Store the matrix in docs/.github/permissions_matrix.md and add a short 'how an agent asks' snippet to docs/dev/git_workflow.md.\n\nDeliverables\\n1) docs/.github/permissions_matrix.md listing roles (Ship, Patch, Probe, Map, Forge, Scribbler, Muse, Pixel, human Producer) and allowed operations: push, merge, tag, force-push, create branches, create worktrees. Include example bd delegation notes (delegated-to:@ship) and escalation steps.\n2) Update docs/dev/git_workflow.md to reference the permissions matrix and include a one-paragraph agent request pattern.\n3) Add a short checklist for repo admins to enforce permissions via branch protection and CODEOWNERS where possible.\n\nReferences\\n- .opencode/agent/*.md for current allowed commands and boundaries\\n- GitHub branch protection docs: https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/configuring-protected-branches\\n\nAcceptance criteria\\n- Permissions matrix file exists in docs/.github/ and doc links updated.\\n,json:true}","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T23:01:11.513708498-08:00","updated_at":"2025-12-22T23:01:11.513708498-08:00","dependencies":[{"issue_id":"wf-79y.15","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T23:01:11.522893088-08:00","created_by":"daemon"}]}
{"id":"wf-79y.16","title":"Add TL;DR Quick Start and decision table for rebase vs merge","description":"Add a short TL;DR Quick Start at the top of docs/dev/git_workflow.md and a compact decision table that clarifies when to rebase vs merge.\\n\\nDeliverables:\\n1) A 4‚Äì6 line TL;DR Quick Start block for the top of the doc with minimal commands.\\n2) A two-row decision table or rule box explaining rebasing vs merging for local-only, shared/published, and long-running work.\\n3) Update docs/dev/git_workflow.md (done as part of doc edits) and record the change in bd.\\n\\nReferences:\\n- Best-practice summaries: trunk-based vs feature-branch models (various articles).\\n,json:true}","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T23:01:16.205043818-08:00","updated_at":"2025-12-22T23:01:16.205043818-08:00","dependencies":[{"issue_id":"wf-79y.16","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T23:01:16.216152338-08:00","created_by":"daemon"}]}
{"id":"wf-79y.17","title":"Add PR description checklist and PR template enforcement docs","description":"Document a short PR description checklist in docs/dev/git_workflow.md and add docs on how PR template enforcement works and where to find the PR template.\\n\\nDeliverables:\\n1) Short PR description checklist (2‚Äì3 bullets) added to git_workflow.md.\\n2) docs/.github/pr_enforcement.md describing the PR validation workflow, status check name, and how to configure branch protection to require it.\\n3) Link to .github/PULL_REQUEST_TEMPLATE.md and mention wf-79y.14 (PR validation workflow task).\\n,json:true}","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T23:01:22.688771861-08:00","updated_at":"2025-12-22T23:01:22.688771861-08:00","dependencies":[{"issue_id":"wf-79y.17","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T23:01:22.705940441-08:00","created_by":"daemon"}]}
{"id":"wf-79y.18","title":"Add decision guidance for lockfile/dependency conflicts and flaky CI","description":"Add guidance for dependency/lockfile conflicts and flaky CI to docs/dev/git_workflow.md.\\n\\nDeliverables:\\n1) Add a short section describing best practices for lockfile handling: dedicated dependency PRs, renovate/dependabot, npm ci, regenerate lockfile after conflicts, run full tests.\\n2) Add instructions for recording flaky CI failures in bd and escalation path to Ship if persistent.\\n\\nReferences:\\n- Renovate, Dependabot docs.\\n,json:true}","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-22T23:01:25.225798616-08:00","updated_at":"2025-12-22T23:01:25.225798616-08:00","dependencies":[{"issue_id":"wf-79y.18","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T23:01:25.236688256-08:00","created_by":"daemon"}]}
{"id":"wf-79y.2","title":"Create PR template and review checklist","description":"Add a standard PR template to .github/PULL_REQUEST_TEMPLATE.md with the following sections:\\n- Title should start with 'bd-\u003cid\u003e: short description'\\n- Summary of change and scope\\n- bd link(s)\\n- Commands run locally (npm test, lint, build)\\n- Tests executed and status\\n- Risk, rollback plan, and migration notes\\n- Files changed\\n\\nDeliverables:\\n1) .github/PULL_REQUEST_TEMPLATE.md added to repo.\\n2) Update docs/dev/git_workflow.md to reference the template.\\n\\nReferences: https://docs.github.com/en/github/building-a-strong-community/creating-a-pull-request-template-for-your-repository","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T22:30:20.025696394-08:00","updated_at":"2025-12-22T22:30:20.025696394-08:00","dependencies":[{"issue_id":"wf-79y.2","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:30:20.046894274-08:00","created_by":"daemon"}]}
{"id":"wf-79y.3","title":"Adopt commit message conventions and commitlint","description":"Define commit message convention (recommend Conventional Commits plus bd-\u003cid\u003e prefix). Add commitlint and CI check to enforce messages.\\n\\nDeliverables:\\n1) docs/dev/git_workflow.md: add a section on commit conventions and examples.\\n2) Add commitlint config and note in docs how to run locally.\\n3) CI job to validate commit messages for PR merges.\\n\\nReferences:\\n- https://www.conventionalcommits.org/en/v1.0.0/\\n- https://github.com/conventional-changelog/commitlint","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T22:30:22.076657524-08:00","updated_at":"2025-12-22T22:30:22.076657524-08:00","dependencies":[{"issue_id":"wf-79y.3","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:30:22.101468994-08:00","created_by":"daemon"}]}
{"id":"wf-79y.4","title":"Add pre-commit hooks (husky + lint-staged)","description":"Introduce optional local dev tooling to catch lint/test issues before pushing.\\n\\nDeliverables:\\n1) Add recommended dev-dependencies and sample config in package.json (husky, lint-staged).\\n2) docs/dev/git_workflow.md: document how to opt-in and run locally.\\n3) Provide a sample pre-commit script for linting and fast tests.\\n\\nReferences:\\n- Husky: https://typicode.github.io/husky/\\n- lint-staged: https://github.com/okonet/lint-staged","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T22:30:24.107691124-08:00","updated_at":"2025-12-22T22:30:24.107691124-08:00","dependencies":[{"issue_id":"wf-79y.4","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:30:24.117310864-08:00","created_by":"daemon"}]}
{"id":"wf-79y.5","title":"Automate bd \u003c\u003e PR linking","description":"Add automation to ensure PRs reference bd issues and optionally update bd when PRs land.\\n\\nDeliverables:\\n1) CI/Action that validates PR title or body contains 'bd-\u003cid\u003e'.\\n2) Optional: GitHub Action that comments on PR with bd link and updates bead note via API when status changes.\\n3) docs/dev/git_workflow.md: document the automation and expected PR naming conventions.\\n\\nReferences:\\n- GitHub Actions: https://docs.github.com/en/actions\\- Example action that parses PR title and calls an API\\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T22:30:25.988894434-08:00","updated_at":"2025-12-22T22:30:25.988894434-08:00","dependencies":[{"issue_id":"wf-79y.5","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:30:26.000513704-08:00","created_by":"daemon"}]}
{"id":"wf-79y.6","title":"Define Git LFS and large asset policy","description":"Document policy for large binaries and how to add them (Git LFS, allowed locations, ownership and approval workflow).\\n\\nDeliverables:\\n1) docs/dev/git_lfs_policy.md explaining where to store large assets, LFS usage, and approval steps.\\n2) Add .gitattributes if adopting LFS for certain paths.\\n3) Update docs/dev/git_workflow.md to reference the policy.\\n\\nReferences:\\n- Git LFS: https://git-lfs.github.com/","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T22:30:28.649096704-08:00","updated_at":"2025-12-22T22:30:28.649096704-08:00","dependencies":[{"issue_id":"wf-79y.6","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:30:28.671137974-08:00","created_by":"daemon"}]}
{"id":"wf-79y.7","title":"Document release/tagging policy and Ship responsibilities","description":"Document who tags releases, semantic versioning expectations, changelog process, and Ship's role in validating release readiness.\\n\\nDeliverables:\\n1) docs/dev/release_policy.md with tagging and release steps.\\n2) Update docs/dev/git_workflow.md to reference release policy.\\n\\nReferences:\\n- Semantic Versioning: https://semver.org/\\- semantic-release: https://github.com/semantic-release/semantic-release","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T22:30:30.769298254-08:00","updated_at":"2025-12-22T22:30:30.769298254-08:00","dependencies":[{"issue_id":"wf-79y.7","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:30:30.780363394-08:00","created_by":"daemon"}]}
{"id":"wf-79y.8","title":"Adopt merge queue or merge-when-green policy","description":"Investigate and adopt a merge queue or 'merge when green' strategy to serialize merges and reduce CI churn.\\n\\nDeliverables:\\n1) Evaluation of options (Mergify, GitHub Merge Queue, custom action).\\n2) If suitable, configure merge queue for the repo and document behavior.\\n3) Update docs/dev/git_workflow.md with the selected approach.\\n\\nReferences:\\n- Mergify: https://mergify.io/\\n","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T22:30:34.638871834-08:00","updated_at":"2025-12-22T22:30:34.638871834-08:00","dependencies":[{"issue_id":"wf-79y.8","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:30:34.648196914-08:00","created_by":"daemon"}]}
{"id":"wf-79y.9","title":"Add guidance for dependency/lockfile merges","description":"Document strategies to reduce lockfile conflicts and dependency churn.\\n\\nDeliverables:\\n1) docs/dev/dependency_guidance.md describing best practices (dedicated dependency PRs, renovate/dependabot, how to resolve lockfile conflicts).\\n2) CI guidance to run npm ci and how to handle lockfile regeneration after conflicts.\\n\\nReferences:\\n- Renovate: https://www.whitesourcesoftware.com/free-developer-tools/renovate/\\n- Dependabot: https://github.com/dependabot","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-22T22:30:36.546483484-08:00","updated_at":"2025-12-22T22:30:36.546483484-08:00","dependencies":[{"issue_id":"wf-79y.9","depends_on_id":"wf-79y","type":"parent-child","created_at":"2025-12-22T22:30:36.570362165-08:00","created_by":"daemon"}]}
{"id":"wf-7cn","title":"Docs: Implement Context Pack command and template","description":"Document the CLI 'context' command and add a stable template at docs/dev/CONTEXT_PACK.md; ensure redact rules for ignored files are specified.","notes":"Linked implementation PRD: docs/dev/context_pack_PRD.md (source intake: wf-ba2.5.4). CLI_PRD now points to this PRD for the context/ctx command.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-19T21:44:26.713260809-08:00","updated_at":"2025-12-22T16:31:06.896524268-08:00","closed_at":"2025-12-22T15:15:51.105437603-08:00","dependencies":[{"issue_id":"wf-7cn","depends_on_id":"wf-s5d","type":"parent-child","created_at":"2025-12-19T22:11:34.174175879-08:00","created_by":"daemon"}]}
{"id":"wf-7m7","title":"Add waif command to validate implementation plan integrity","description":"## Feature Request\n\nAdd a new `waif` CLI command that validates the integrity of the current implementation plan (the Beads issue graph + required metadata/policy). The command should catch common plan hygiene errors early and provide actionable, categorized output.\n\nThis is a *plan validator*, not a recommendation engine.\n\n## Motivation\n\nBeads gives us a powerful dependency graph, but it‚Äôs still easy for a repo‚Äôs plan to drift into inconsistent states (e.g., issues marked `in_progress` while still blocked, missing milestone labels, intake artifacts that don‚Äôt meet exit criteria, disconnected items that never get executed). A deterministic validator enables:\n\n- Fast feedback after plan edits\n- A reliable preflight before starting work\n- Optional CI gating later\n\n## Use Cases\n\n1. **PM/Agent hygiene loop**: run after updating issues/deps/labels.\n2. **Preflight**: run before using `waif next` / starting implementation.\n3. **CI guardrail**: fail the build if the plan is inconsistent (optional future).\n\n## Proposed Solution\n\n### Command\n\n- Add `waif plan check` (name bikeshed OK: `waif plan-check`, `waif check-plan`)\n- Output formats:\n  - Default: human readable Markdown report\n  - `--json`: machine-readable JSON report with stable schema\n\n### Data sources\n\n- Prefer `bd` when available.\n  - Use `bd list --json` (status-filtered) to build the candidate universe.\n  - Use `bd show \u003cids\u003e --json` in chunks to fetch dependency details and labels where needed.\n- Fallback: parse `.beads/issues.jsonl` when `bd` is unavailable (consistent with `waif next`).\n\n### Validation categories (minimum)\n\n1) **In-progress/closed but blocked by non-closed**\n- Flag issues where:\n  - `status` is `in_progress` OR `closed`\n  - and the issue has one or more `blocks` dependencies whose target issue status is *not terminal*.\n- Terminal statuses should include at least: `closed`, `done`, `tombstone`.\n- Report should include the blocking dependency IDs (and their statuses).\n\n2) **Missing milestone label**\n- Flag issues that are part of the execution plan but do not have a milestone label.\n- Initial policy (tunable):\n  - If an issue has any dependency edge OR any dependent edge OR a `parent` relationship, it must have at least one label matching `milestone:M*`.\n\n3) **Does not meet intake exit criteria**\n- Flag issues that are considered actionable work but do not meet the exit criteria implied by `.opencode/command/intake.md`.\n- Initial, deterministic checks (derived from the intake template requirements):\n  - Issue must have a non-empty `title`.\n  - Issue must have a non-empty `description` containing the required sections (string match is OK):\n    - `- Problem`\n    - `- Users`\n    - `- Success criteria`\n    - `- Constraints`\n    - `- Clarifying questions`\n    - `- Proposed next step`\n  - (Optional strict mode later) If `Proposed next step` indicates `NEW PRD` or `UPDATE PRD`, validate the referenced path exists.\n\n4) **Orphaned issues**\n- Flag issues that appear unintentionally disconnected from the plan:\n  - no dependencies\n  - no dependents\n  - no parent relationship\n- Report should include a short suggestion for how to resolve (add parent, add deps, or explicitly label as standalone).\n\n### Report requirements\n\nHuman output (Markdown):\n\n- `# Plan Integrity Report`\n- `## Summary` with counts for each category and an overall exit status.\n- One section per category with a clear list/table of offending issues.\n- A short `## Fix Guidance` section with suggested `bd` commands/patterns.\n\nJSON output:\n\n- Top-level fields:\n  - `ok: boolean`\n  - `summary: { \u003ccategoryKey\u003e: number, total: number }`\n  - `categories: { \u003ccategoryKey\u003e: Array\u003c...\u003e }`\n- Each category entry must include at least:\n  - `id`, `title`, `status`, `priority`, `labels`\n  - and category-specific metadata (e.g., `blockingDeps`, `missingSections`, `reason`).\n\nExit codes:\n\n- Exit code `0`: no findings.\n- Exit code `1`: findings exist.\n- Exit code `2`: command/config error (e.g., cannot read issues).\n\n## Open Questions\n\n- Scope: what is the canonical ‚Äúimplementation plan‚Äù universe?\n  - All issues in `.beads/issues.jsonl`?\n  - Only issues reachable from a configured root epic (e.g., `wf-ba2`)?\n  - Only issues with specific labels (e.g., `prd-agent`)?\n\n- Milestone policy: should milestone labels be required for *all* plan-connected issues, or only for leaf tasks/features?\n\n- Intake checks:\n  - Should we require the exact intake template headings, or allow other formats (heuristic detection)?\n  - Is the source of truth `.opencode/command/intake.md` (current), or should we codify repo-specific criteria elsewhere?\n\n- Orphans:\n  - Are top-level epics with no deps/dependents considered valid roots, or should they be flagged unless explicitly marked?\n\n- Additional integrity checks to consider (not required for v1):\n  - Dependency cycles (optionally leverage `bv --robot-insights` when available)\n  - Dependencies referencing missing IDs\n  - Status outside the known set (open/in_progress/closed/done/tombstone)\n  - Priority missing/out of range\n  - Parent/child inconsistencies (parent missing; parent `closed` while child `open`)\n  - Issues missing `issue_type`\n  - ‚ÄúStale plan‚Äù: issues not updated in N days\n","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-19T15:30:42.855434612-08:00","updated_at":"2025-12-19T15:33:00.686409256-08:00","labels":["feature"]}
{"id":"wf-7xv","title":"Create specialist agent files for each role","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-20T15:12:42.33485019-08:00","updated_at":"2025-12-20T20:32:57.462454025-08:00","closed_at":"2025-12-20T20:32:57.462478711-08:00"}
{"id":"wf-7xv.1","title":"Create specialist agent file: PM (human)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-20T15:13:03.54340158-08:00","updated_at":"2025-12-20T16:10:01.426414083-08:00","dependencies":[{"issue_id":"wf-7xv.1","depends_on_id":"wf-7xv","type":"parent-child","created_at":"2025-12-20T15:13:03.54511198-08:00","created_by":"daemon"}],"deleted_at":"2025-12-20T16:10:01.426414083-08:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"wf-7xv.10","title":"Create specialist agent file: Pixel (Art AI)","description":"Subagent: Pixel (Art AI). Config lives at .opencode/agent/pixel.md. Provides asset/variant guidance, naming/location conventions, and review support (no bash).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T16:09:47.022486262-08:00","updated_at":"2025-12-20T16:46:38.84198776-08:00","closed_at":"2025-12-20T16:46:38.84198776-08:00","dependencies":[{"issue_id":"wf-7xv.10","depends_on_id":"wf-7xv","type":"parent-child","created_at":"2025-12-20T16:09:47.045034233-08:00","created_by":"daemon"}]}
{"id":"wf-7xv.11","title":"Create specialist agent file: Ship (DevOps AI)","description":"Subagent: Ship (DevOps AI). Config lives at .opencode/agent/ship.md. Owns CI/build/release readiness; keeps main releasable and adds minimal CI changes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T16:09:49.421590729-08:00","updated_at":"2025-12-20T18:32:04.140520094-08:00","closed_at":"2025-12-20T18:32:04.140520094-08:00","dependencies":[{"issue_id":"wf-7xv.11","depends_on_id":"wf-7xv","type":"parent-child","created_at":"2025-12-20T16:09:49.439816711-08:00","created_by":"daemon"}]}
{"id":"wf-7xv.12","title":"Create specialist agent file: Forge (Agent-file Authoring AI)","description":"Subagent: Forge (Agent-file Authoring AI). Config will live at .opencode/agent/forge.md. Specializes in drafting and refining other agent definition files (frontmatter, permissions, boundaries, workflow, RACI alignment) to match repo conventions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T18:45:22.891859553-08:00","updated_at":"2025-12-21T17:47:21.565482324-08:00","closed_at":"2025-12-21T17:47:21.56558052-08:00","dependencies":[{"issue_id":"wf-7xv.12","depends_on_id":"wf-7xv","type":"parent-child","created_at":"2025-12-20T18:45:22.894582688-08:00","created_by":"daemon"}]}
{"id":"wf-7xv.2","title":"Create specialist agent file: Design (human)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-20T15:13:03.593213799-08:00","updated_at":"2025-12-20T16:09:53.794632613-08:00","dependencies":[{"issue_id":"wf-7xv.2","depends_on_id":"wf-7xv","type":"parent-child","created_at":"2025-12-20T15:13:03.593830899-08:00","created_by":"daemon"}],"deleted_at":"2025-12-20T16:09:53.794632613-08:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"wf-7xv.3","title":"Create specialist agent file: Engineering (human)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-20T15:13:03.642302219-08:00","updated_at":"2025-12-20T16:09:53.801805658-08:00","dependencies":[{"issue_id":"wf-7xv.3","depends_on_id":"wf-7xv","type":"parent-child","created_at":"2025-12-20T15:13:03.643882119-08:00","created_by":"daemon"}],"deleted_at":"2025-12-20T16:09:53.801805658-08:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"wf-7xv.4","title":"Create specialist agent file: QA (human)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2025-12-20T15:13:03.688024637-08:00","updated_at":"2025-12-20T16:09:53.803363586-08:00","dependencies":[{"issue_id":"wf-7xv.4","depends_on_id":"wf-7xv","type":"parent-child","created_at":"2025-12-20T15:13:03.688690437-08:00","created_by":"daemon"}],"deleted_at":"2025-12-20T16:09:53.803363586-08:00","deleted_by":"daemon","delete_reason":"delete","original_type":"task"}
{"id":"wf-7xv.5","title":"Create specialist agent file: Map (PM AI, primary)","description":"Primary OpenCode agent (PM AI / Map). Config lives at .opencode/agent/map.md. This is the main interaction point with the Producer; coordinates other call-sign subagents and tracks work in bd.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T15:13:03.736170555-08:00","updated_at":"2025-12-20T16:42:18.855881035-08:00","closed_at":"2025-12-20T16:42:18.855881035-08:00","dependencies":[{"issue_id":"wf-7xv.5","depends_on_id":"wf-7xv","type":"parent-child","created_at":"2025-12-20T15:13:03.736775656-08:00","created_by":"daemon"}]}
{"id":"wf-7xv.6","title":"Create specialist agent file: Muse (Designer AI)","description":"Subagent: Muse (Designer AI). Config lives at .opencode/agent/muse.md. Produces design variants, user flows, state transitions, and clarifies acceptance criteria.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T15:13:03.784878275-08:00","updated_at":"2025-12-20T18:33:02.820101525-08:00","closed_at":"2025-12-20T18:33:02.820101525-08:00","dependencies":[{"issue_id":"wf-7xv.6","depends_on_id":"wf-7xv","type":"parent-child","created_at":"2025-12-20T15:13:03.788174876-08:00","created_by":"daemon"}]}
{"id":"wf-7xv.7","title":"Create specialist agent file: Patch (Implementation AI)","description":"Subagent: Patch (Implementation AI). Config lives at .opencode/agent/patch.md. Implements small, correct code changes with minimal churn; follows bd-driven workflow.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T15:13:03.835424094-08:00","updated_at":"2025-12-20T17:00:25.175994505-08:00","closed_at":"2025-12-20T17:00:25.175994505-08:00","dependencies":[{"issue_id":"wf-7xv.7","depends_on_id":"wf-7xv","type":"parent-child","created_at":"2025-12-20T15:13:03.836032795-08:00","created_by":"daemon"}]}
{"id":"wf-7xv.8","title":"Create specialist agent file: Scribbler (Docs AI)","description":"Subagent: Scribbler (Docs AI). Config lives at .opencode/agent/scribbler.md. Maintains PRDs and repo docs; prefers updating existing docs; no bash.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T15:13:03.883846514-08:00","updated_at":"2025-12-20T18:38:01.168511255-08:00","closed_at":"2025-12-20T18:38:01.168511255-08:00","dependencies":[{"issue_id":"wf-7xv.8","depends_on_id":"wf-7xv","type":"parent-child","created_at":"2025-12-20T15:13:03.884979114-08:00","created_by":"daemon"}]}
{"id":"wf-7xv.9","title":"Create specialist agent file: Probe (QA AI + review)","description":"Subagent: Probe (QA AI + review). Config lives at .opencode/agent/probe.md. Runs/assesses quality gates and provides PR risk/review feedback (read-only).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T15:13:03.932272433-08:00","updated_at":"2025-12-20T18:41:47.125175615-08:00","closed_at":"2025-12-20T18:41:47.125175615-08:00","dependencies":[{"issue_id":"wf-7xv.9","depends_on_id":"wf-7xv","type":"parent-child","created_at":"2025-12-20T15:13:03.932846233-08:00","created_by":"daemon"}]}
{"id":"wf-84p","title":"Rename project to WAIF","description":"Rename the project branding to 'WAIF' across the repo and documentation.\n\nExplanation: The project name remains the same in spirit, but we standardize on the spelling 'WAIF' for branding consistency.\n\nNautical acronym (tongue-in-cheek): WAIF ‚Äî Wind Assisted Freaking Idiot. Note: humans inevitably typo this as 'WAFI' sometimes; we embrace the typo and make a joke: 'When sailors spell it wrong, they blame the wind ‚Äî humans blame their fingers.'\n\nMVP scope (minimal, low-risk):\n- Update  feature and name mentions to 'WAIF' where applicable.\n- Update   and any CLI references if present.\n- Update  and docs/ references to use 'WAIF'.\n- Create follow-up issues for any code/CI/display name changes that require broader coordination.\n\nAcceptance criteria:\n- Repo README and docs use 'WAIF' consistently.\n- A P0 chore exists tracking the rename with clear next steps.\n\nRecommended next commands:\n- Review created issue and confirm whether files should be updated automatically.\n,","notes":"PR: https://github.com/SorraTheOrc/wafi/pull/2 (CLI renamed to 'waif')\n\n---\n\nPR: https://github.com/SorraTheOrc/wafi/pull/2 (CLI renamed to 'waif')\n\n---\n\nPR: https://github.com/SorraTheOrc/wafi/pull/2 (CLI renamed to 'waif')\n\n---\n\nPR: https://github.com/SorraTheOrc/wafi/pull/2 (CLI renamed to 'waif')\n\n---\n\nPR: https://github.com/SorraTheOrc/wafi/pull/2 (CLI renamed to 'waif')\n\n---\n\nPR: https://github.com/SorraTheOrc/wafi/pull/2 (CLI renamed to 'waif')\n\n---\n\nPR: https://github.com/SorraTheOrc/wafi/pull/2","status":"closed","priority":0,"issue_type":"chore","created_at":"2025-12-19T02:14:56.497483898-08:00","updated_at":"2025-12-19T03:09:27.383433104-08:00","closed_at":"2025-12-19T03:09:27.383433104-08:00"}
{"id":"wf-8js","title":"Adaptice console output format: Intake brief","description":"Linked PRD: docs/dev/CLI_PRD.md\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T23:24:38.135582108-08:00","updated_at":"2025-12-21T02:46:05.002650691-08:00","closed_at":"2025-12-21T02:46:05.002650691-08:00"}
{"id":"wf-8k7","title":"PRD: Beads search command","description":"Write the full PRD at docs/dev/beads_search_command_PRD.md for feature wf-32r. Must define CLI signature, search semantics (title/desc default, flags to include notes/comments and linked docs), performance expectations, JSON output, ignore boundary considerations, and test plan. Ensure two-way traceability: PRD includes 'Source issue: wf-32r' and wf-8k7 external-ref is set to 'PRD: docs/dev/beads_search_command_PRD.md'.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T16:04:56.291500625-08:00","updated_at":"2025-12-22T16:35:50.110121177-08:00","dependencies":[{"issue_id":"wf-8k7","depends_on_id":"wf-32r","type":"discovered-from","created_at":"2025-12-22T16:04:56.298958872-08:00","created_by":"daemon"},{"issue_id":"wf-8k7","depends_on_id":"wf-32r","type":"parent-child","created_at":"2025-12-22T16:05:04.039431698-08:00","created_by":"daemon"}]}
{"id":"wf-94r","title":"Add recent issues command","description":"## Feature Request\n\n[Describe the desired feature]\n\n## Motivation\n\n[Why is this feature needed? What problem does it solve?]\n\n## Use Cases\n\n1. **Use Case 1**: [description]\n2. **Use Case 2**: [description]\n\n## Proposed Solution\n\n[High-level approach to implementing this feature]\n\n## Alternatives Considered\n\n- **Alternative 1**: [description and why not chosen]\n- **Alternative 2**: [description and why not chosen]\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-19T11:00:08.115241903-08:00","updated_at":"2025-12-19T11:09:51.729125335-08:00","closed_at":"2025-12-19T11:09:51.729129991-08:00","labels":["feature"]}
{"id":"wf-ad1","title":"Add top-level `--version` (`-v`) CLI option","description":"Add a top-level CLI option `--version` (alias `-v`) that prints the CLI version and exits.\\n\\nBehavior:\\n- When the CLI corresponds to an official release, print the release semver (e.g., v1.2.3).\\n- When running from an unreleased working tree, print a development stamp such as `v0.0.0-dev+YYYYMMDDTHHMMSS` or `dev-\u003ctimestamp\u003e-\u003cshort-commit\u003e`.\\n- The command must be fast, make no network calls, and return exit code 0.\\n- Include unit tests and update `README.md` and CLI help text.\\n\\nAcceptance criteria:\\n- Running `--version` or `-v` prints the release semver when the build is a released artifact (e.g., `v1.2.3`).\\n- When running from an unreleased tree, `--version` prints a development stamp and exits with code 0.\\n- The option is available as a top-level flag (no subcommand required) and does not execute application logic.\\n- Unit tests cover both released and unreleased outputs and exit codes.\\n- README and CLI help include usage examples for `--version` / `-v`.\\n","notes":"PR: https://github.com/SorraTheOrc/wafi/pull/3","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-19T02:54:15.475046713-08:00","updated_at":"2025-12-19T10:16:43.704822544-08:00","closed_at":"2025-12-19T10:16:43.704822544-08:00"}
{"id":"wf-ba2","title":"PM Agent MVP","description":"Master epic for prd-agent MVP (see docs/prd-agent_PRD.md).","notes":"Commands executed: waif next --json; bd show wf-ba2.3 --json; bd show wf-ba2.4 --json; bd show wf-ba2.5 --json; bd show wf-ba2.6 --json; bd show wf-ba2.7 --json; bd show wf-ba2.8 --json; bd close wf-ba2.3 wf-ba2.4 wf-ba2.5 wf-ba2.6 wf-ba2.7 wf-ba2.8 --reason 'Closed per Producer directive'. Referenced docs/files: none. Remaining risks/follow-ups: confirm downstream dependents (e.g., wf-ba2.3.1, wf-ba2.4.1, wf-ba2.5.4, etc.) now need explicit rescoping or closure to ensure roadmap reflects Producer decision.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-17T13:15:55.170224155-08:00","updated_at":"2025-12-23T16:41:33.873193769-08:00","labels":["epic","prd-agent"],"dependencies":[{"issue_id":"wf-ba2","depends_on_id":"wf-74","type":"blocks","created_at":"2025-12-19T01:01:33.044259019-08:00","created_by":"daemon"},{"issue_id":"wf-ba2","depends_on_id":"wf-ca1","type":"blocks","created_at":"2025-12-19T01:01:37.552348592-08:00","created_by":"daemon"},{"issue_id":"wf-ba2","depends_on_id":"wf-dt1","type":"blocks","created_at":"2025-12-19T01:01:37.718116546-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.1","title":"Rule of Five: iterate each workflow stage 5 times","description":"Implement *The Rule of Five* across the project workflow: for each major stage (intake, PRD, review, planning, design, implementation, testing/quality, release), run 5 iterations before considering the stage complete.\n\nReference: https://steve-yegge.medium.com/six-new-tips-for-better-coding-with-agents-d4e9c86e42a9\n\nDefinition:\n- Step 1: initial completion (creative/broad).\n- Steps 2-5: successive reviews that narrow scope, increase precision, and polish clarity/completeness.\n\nThis epic contains child epics per workflow stage; each stage epic contains 5 child tasks with proposed AI prompts.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-18T15:44:48.692168383-08:00","updated_at":"2025-12-18T15:44:48.692168383-08:00","labels":["process","rule-of-five","workflow"],"dependencies":[{"issue_id":"wf-ba2.1","depends_on_id":"wf-ba2","type":"parent-child","created_at":"2025-12-18T15:44:48.693667078-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.1","title":"Rule of Five: Intake brief (Workflow step 1)","description":"Apply Rule of Five to the intake brief stage (docs/Workflow.md step 1). Produce prompts that guide initial capture, then incrementally refine into a crisp brief with success criteria, constraints, and clarified questions.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-18T15:45:33.272619383-08:00","updated_at":"2025-12-18T15:45:33.272619383-08:00","labels":["rule-of-five","workflow-stage"],"dependencies":[{"issue_id":"wf-ba2.1.1","depends_on_id":"wf-ba2.1","type":"parent-child","created_at":"2025-12-18T15:45:33.274031532-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.1.1","title":"AI prompt for step 1 of intake","description":"Goal: produce the first complete draft for this stage. Encourage creativity and exploration.\n\nPrompt:\nYou are an expert product+engineering agent. Complete the **first full draft** of this workflow artifact for the current work item.\n- Be creative and propose strong defaults.\n- If uncertain, present 2-3 alternatives and choose one, explaining why.\n- Keep it actionable: concrete lists, commands, checklists, and examples.\n- Assume the reader wants momentum; do not over-polish yet.\n\nOutput: a full artifact draft suitable for immediate review.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:33.423411766-08:00","updated_at":"2025-12-18T15:45:33.423411766-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.1.1","depends_on_id":"wf-ba2.1.1","type":"parent-child","created_at":"2025-12-18T15:45:33.425267156-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.1.2","title":"AI prompt for step 2 of intake","description":"Goal: first review pass. Tighten structure and remove ambiguity.\n\nPrompt:\nReview the Step 1 output for structure and completeness.\n- Identify missing sections and add them.\n- Re-order content for the most logical flow.\n- Replace hand-wavy language with explicit statements.\n- Produce a revised version with minimal fluff.\n\nOutput: revised artifact + a short list of key changes.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:33.551786803-08:00","updated_at":"2025-12-18T15:45:33.551786803-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.1.2","depends_on_id":"wf-ba2.1.1","type":"parent-child","created_at":"2025-12-18T15:45:33.553245457-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.1.3","title":"AI prompt for step 3 of intake","description":"Goal: second review pass. Focus on correctness, edge cases, and operational detail.\n\nPrompt:\nAudit the current artifact for correctness and real-world usability.\n- Add missing constraints, assumptions, and decision points.\n- Add edge cases, failure modes, and \"what could go wrong\" notes.\n- Ensure steps are testable/verifiable.\n- Remove anything not serving the artifact purpose.\n\nOutput: revised artifact + checklist of verifications.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:33.677798473-08:00","updated_at":"2025-12-18T15:45:33.677798473-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.1.3","depends_on_id":"wf-ba2.1.1","type":"parent-child","created_at":"2025-12-18T15:45:33.679253805-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.1.4","title":"AI prompt for step 4 of intake","description":"Goal: third review pass. Improve clarity, concision, and scanability.\n\nPrompt:\nPolish the artifact for clarity and fast reading.\n- Rewrite unclear sections and tighten wording.\n- Convert paragraphs into bullets/checklists where helpful.\n- Normalize terminology and naming.\n- Ensure examples/commands are copy-pastable and consistent.\n\nOutput: revised artifact optimized for human scanning.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:33.806363351-08:00","updated_at":"2025-12-18T15:45:33.806363351-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.1.4","depends_on_id":"wf-ba2.1.1","type":"parent-child","created_at":"2025-12-18T15:45:33.807904033-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.1.5","title":"AI prompt for step 5 of intake","description":"Goal: final review pass. Treat this as a release-quality QA gate.\n\nPrompt:\nPerform a final QA review of the artifact.\n- Check for internal consistency and contradictions.\n- Ensure it aligns with repo conventions and the Workflow doc.\n- Ensure every requirement is actionable and measurable.\n- Emit a final ‚Äúready‚Äù version with a small list of remaining open questions (if any).\n\nOutput: final artifact + remaining risks/open questions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:33.937777074-08:00","updated_at":"2025-12-18T15:45:33.937777074-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.1.5","depends_on_id":"wf-ba2.1.1","type":"parent-child","created_at":"2025-12-18T15:45:33.939167259-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.2","title":"Rule of Five: PRD authoring via interview (Workflow step 2)","description":"Apply Rule of Five to PRD creation/update via interview (docs/Workflow.md step 2). Prompts should produce an initial PRD draft, then refine structure, testability, and clarity across 5 iterations.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-18T15:45:34.065138622-08:00","updated_at":"2025-12-18T15:45:34.065138622-08:00","labels":["rule-of-five","workflow-stage"],"dependencies":[{"issue_id":"wf-ba2.1.2","depends_on_id":"wf-ba2.1","type":"parent-child","created_at":"2025-12-18T15:45:34.067988584-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.2.1","title":"AI prompt for step 1 of prd-authoring","description":"Goal: produce the first complete draft for this stage. Encourage creativity and exploration.\n\nPrompt:\nYou are an expert product+engineering agent. Complete the **first full draft** of this workflow artifact for the current work item.\n- Be creative and propose strong defaults.\n- If uncertain, present 2-3 alternatives and choose one, explaining why.\n- Keep it actionable: concrete lists, commands, checklists, and examples.\n- Assume the reader wants momentum; do not over-polish yet.\n\nOutput: a full artifact draft suitable for immediate review.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:34.199443849-08:00","updated_at":"2025-12-18T15:45:34.199443849-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.2.1","depends_on_id":"wf-ba2.1.2","type":"parent-child","created_at":"2025-12-18T15:45:34.201328559-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.2.2","title":"AI prompt for step 2 of prd-authoring","description":"Goal: first review pass. Tighten structure and remove ambiguity.\n\nPrompt:\nReview the Step 1 output for structure and completeness.\n- Identify missing sections and add them.\n- Re-order content for the most logical flow.\n- Replace hand-wavy language with explicit statements.\n- Produce a revised version with minimal fluff.\n\nOutput: revised artifact + a short list of key changes.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:34.333731065-08:00","updated_at":"2025-12-18T15:45:34.333731065-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.2.2","depends_on_id":"wf-ba2.1.2","type":"parent-child","created_at":"2025-12-18T15:45:34.335259129-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.2.3","title":"AI prompt for step 3 of prd-authoring","description":"Goal: second review pass. Focus on correctness, edge cases, and operational detail.\n\nPrompt:\nAudit the current artifact for correctness and real-world usability.\n- Add missing constraints, assumptions, and decision points.\n- Add edge cases, failure modes, and \"what could go wrong\" notes.\n- Ensure steps are testable/verifiable.\n- Remove anything not serving the artifact purpose.\n\nOutput: revised artifact + checklist of verifications.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:34.467168293-08:00","updated_at":"2025-12-18T15:45:34.467168293-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.2.3","depends_on_id":"wf-ba2.1.2","type":"parent-child","created_at":"2025-12-18T15:45:34.469071797-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.2.4","title":"AI prompt for step 4 of prd-authoring","description":"Goal: third review pass. Improve clarity, concision, and scanability.\n\nPrompt:\nPolish the artifact for clarity and fast reading.\n- Rewrite unclear sections and tighten wording.\n- Convert paragraphs into bullets/checklists where helpful.\n- Normalize terminology and naming.\n- Ensure examples/commands are copy-pastable and consistent.\n\nOutput: revised artifact optimized for human scanning.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:34.592996711-08:00","updated_at":"2025-12-18T15:45:34.592996711-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.2.4","depends_on_id":"wf-ba2.1.2","type":"parent-child","created_at":"2025-12-18T15:45:34.59424785-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.2.5","title":"AI prompt for step 5 of prd-authoring","description":"Goal: final review pass. Treat this as a release-quality QA gate.\n\nPrompt:\nPerform a final QA review of the artifact.\n- Check for internal consistency and contradictions.\n- Ensure it aligns with repo conventions and the Workflow doc.\n- Ensure every requirement is actionable and measurable.\n- Emit a final ‚Äúready‚Äù version with a small list of remaining open questions (if any).\n\nOutput: final artifact + remaining risks/open questions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:34.714647643-08:00","updated_at":"2025-12-18T15:45:34.714647643-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.2.5","depends_on_id":"wf-ba2.1.2","type":"parent-child","created_at":"2025-12-18T15:45:34.716176-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.3","title":"Rule of Five: PRD review and sign-off (Workflow step 3)","description":"Apply Rule of Five to PRD review/sign-off (docs/Workflow.md step 3). Prompts should progressively tighten acceptance criteria, resolve ambiguities, and ensure the PRD is executable.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-18T15:45:34.853062314-08:00","updated_at":"2025-12-18T15:45:34.853062314-08:00","labels":["rule-of-five","workflow-stage"],"dependencies":[{"issue_id":"wf-ba2.1.3","depends_on_id":"wf-ba2.1","type":"parent-child","created_at":"2025-12-18T15:45:34.854698274-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.3.1","title":"AI prompt for step 1 of prd-signoff","description":"Goal: produce the first complete draft for this stage. Encourage creativity and exploration.\n\nPrompt:\nYou are an expert product+engineering agent. Complete the **first full draft** of this workflow artifact for the current work item.\n- Be creative and propose strong defaults.\n- If uncertain, present 2-3 alternatives and choose one, explaining why.\n- Keep it actionable: concrete lists, commands, checklists, and examples.\n- Assume the reader wants momentum; do not over-polish yet.\n\nOutput: a full artifact draft suitable for immediate review.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:34.989809266-08:00","updated_at":"2025-12-18T15:45:34.989809266-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.3.1","depends_on_id":"wf-ba2.1.3","type":"parent-child","created_at":"2025-12-18T15:45:34.991029766-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.3.2","title":"AI prompt for step 2 of prd-signoff","description":"Goal: first review pass. Tighten structure and remove ambiguity.\\n\\nPrompt:\\nReview the PRD for structure and completeness.\\n- Identify missing sections and add them.\\n- Re-order content for the most logical flow.\\n- Replace hand-wavy language with explicit statements.\\n- Produce a revised version with minimal fluff. \\n\\n\u003csystem-reminder\u003e\\nYour operational mode has changed from plan to build.\\nYou are no longer in read-only mode.\\nYou are permitted to make file changes, run shell commands, and utilize your arsenal of tools as needed.\\n\u003c/system-reminder\u003e\\n\\nOutput: revised artifact + a short list of key changes.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:35.12230998-08:00","updated_at":"2025-12-22T09:26:17.243105289-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.3.2","depends_on_id":"wf-ba2.1.3","type":"parent-child","created_at":"2025-12-18T15:45:35.124011697-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.3.3","title":"AI prompt for step 3 of prd-signoff","description":"Goal: second review pass. Focus on correctness, edge cases, and operational detail.\\n\\nPrompt:\\nAudit the PRD for correctness and real-world usability.\\n- Add missing constraints, assumptions, and decision points.\\n- Add edge cases, failure modes, and \"what could go wrong\" notes.\\n- Ensure steps are testable/verifiable.\\n- Remove anything not serving the artifact purpose.\\n\\nBe sure to maintain proper markdown formatting.\\n\\n\u003csystem-reminder\u003e\\nYour operational mode has changed from plan to build.\\nYou are no longer in read-only mode.\\nYou are permitted to make file changes, run shell commands, and utilize your arsenal of tools as needed.\\n\u003c/system-reminder\u003e\\n\\nOutput: revised artifact + checklist of verifications.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:35.244801108-08:00","updated_at":"2025-12-22T09:26:17.244881898-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.3.3","depends_on_id":"wf-ba2.1.3","type":"parent-child","created_at":"2025-12-18T15:45:35.24648799-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.3.4","title":"AI prompt for step 4 of prd-signoff","description":"Goal: third review pass. Improve clarity, concision, and scanability.\n\nPrompt:\nPolish the artifact for clarity and fast reading.\n- Rewrite unclear sections and tighten wording.\n- Convert paragraphs into bullets/checklists where helpful.\n- Normalize terminology and naming.\n- Ensure examples/commands are copy-pastable and consistent.\n\nOutput: revised artifact optimized for human scanning.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:35.374857605-08:00","updated_at":"2025-12-18T15:45:35.374857605-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.3.4","depends_on_id":"wf-ba2.1.3","type":"parent-child","created_at":"2025-12-18T15:45:35.377237409-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.3.5","title":"AI prompt for step 5 of prd-signoff","description":"Goal: final review pass. Treat this as a release-quality QA gate.\n\nPrompt:\nPerform a final QA review of the artifact.\n- Check for internal consistency and contradictions.\n- Ensure it aligns with repo conventions and the Workflow doc.\n- Ensure every requirement is actionable and measurable.\n- Emit a final ‚Äúready‚Äù version with a small list of remaining open questions (if any).\n\nOutput: final artifact + remaining risks/open questions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:35.523931968-08:00","updated_at":"2025-12-18T15:45:35.523931968-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.3.5","depends_on_id":"wf-ba2.1.3","type":"parent-child","created_at":"2025-12-18T15:45:35.525660571-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.4","title":"Rule of Five: Decompose PRD into issues/milestones (Workflow step 4)","description":"Apply Rule of Five to decomposing a PRD into Beads issues, epics, milestones, and dependencies (docs/Workflow.md step 4). Prompts should start broad then converge on a cycle-free, dependency-aware plan.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-18T15:45:35.694322284-08:00","updated_at":"2025-12-18T15:45:35.694322284-08:00","labels":["rule-of-five","workflow-stage"],"dependencies":[{"issue_id":"wf-ba2.1.4","depends_on_id":"wf-ba2.1","type":"parent-child","created_at":"2025-12-18T15:45:35.696003194-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.4.1","title":"AI prompt for step 1 of decomposition","description":"Goal: produce the first complete draft for this stage. Encourage creativity and exploration.\n\nPrompt:\nYou are an expert product+engineering agent. Complete the **first full draft** of this workflow artifact for the current work item.\n- Be creative and propose strong defaults.\n- If uncertain, present 2-3 alternatives and choose one, explaining why.\n- Keep it actionable: concrete lists, commands, checklists, and examples.\n- Assume the reader wants momentum; do not over-polish yet.\n\nOutput: a full artifact draft suitable for immediate review.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:35.844034688-08:00","updated_at":"2025-12-18T15:45:35.844034688-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.4.1","depends_on_id":"wf-ba2.1.4","type":"parent-child","created_at":"2025-12-18T15:45:35.846891203-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.4.2","title":"AI prompt for step 2 of decomposition","description":"Goal: first review pass. Tighten structure and remove ambiguity.\n\nPrompt:\nReview the Step 1 output for structure and completeness.\n- Identify missing sections and add them.\n- Re-order content for the most logical flow.\n- Replace hand-wavy language with explicit statements.\n- Produce a revised version with minimal fluff.\n\nOutput: revised artifact + a short list of key changes.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:35.972197275-08:00","updated_at":"2025-12-18T15:45:35.972197275-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.4.2","depends_on_id":"wf-ba2.1.4","type":"parent-child","created_at":"2025-12-18T15:45:35.973824468-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.4.3","title":"AI prompt for step 3 of decomposition","description":"Goal: second review pass. Focus on correctness, edge cases, and operational detail.\n\nPrompt:\nAudit the current artifact for correctness and real-world usability.\n- Add missing constraints, assumptions, and decision points.\n- Add edge cases, failure modes, and \"what could go wrong\" notes.\n- Ensure steps are testable/verifiable.\n- Remove anything not serving the artifact purpose.\n\nOutput: revised artifact + checklist of verifications.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:36.098663902-08:00","updated_at":"2025-12-18T15:45:36.098663902-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.4.3","depends_on_id":"wf-ba2.1.4","type":"parent-child","created_at":"2025-12-18T15:45:36.100053354-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.4.4","title":"AI prompt for step 4 of decomposition","description":"Goal: third review pass. Improve clarity, concision, and scanability.\n\nPrompt:\nPolish the artifact for clarity and fast reading.\n- Rewrite unclear sections and tighten wording.\n- Convert paragraphs into bullets/checklists where helpful.\n- Normalize terminology and naming.\n- Ensure examples/commands are copy-pastable and consistent.\n\nOutput: revised artifact optimized for human scanning.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:36.216332291-08:00","updated_at":"2025-12-18T15:45:36.216332291-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.4.4","depends_on_id":"wf-ba2.1.4","type":"parent-child","created_at":"2025-12-18T15:45:36.217941195-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.4.5","title":"AI prompt for step 5 of decomposition","description":"Goal: final review pass. Treat this as a release-quality QA gate.\n\nPrompt:\nPerform a final QA review of the artifact.\n- Check for internal consistency and contradictions.\n- Ensure it aligns with repo conventions and the Workflow doc.\n- Ensure every requirement is actionable and measurable.\n- Emit a final ‚Äúready‚Äù version with a small list of remaining open questions (if any).\n\nOutput: final artifact + remaining risks/open questions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:36.328488527-08:00","updated_at":"2025-12-18T15:45:36.328488527-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.4.5","depends_on_id":"wf-ba2.1.4","type":"parent-child","created_at":"2025-12-18T15:45:36.329709321-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.5","title":"Rule of Five: Select next issue (Workflow step 4.1)","description":"Apply Rule of Five to selecting the next most important issue (docs/Workflow.md step 4.1). Prompts should guide from high-level candidate set ‚Üí ranked decision ‚Üí final claim with explicit rationale.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-18T15:45:36.454146435-08:00","updated_at":"2025-12-18T15:45:36.454146435-08:00","labels":["rule-of-five","workflow-stage"],"dependencies":[{"issue_id":"wf-ba2.1.5","depends_on_id":"wf-ba2.1","type":"parent-child","created_at":"2025-12-18T15:45:36.455248667-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.5.1","title":"AI prompt for step 1 of issue-selection","description":"Goal: produce the first complete draft for this stage. Encourage creativity and exploration.\n\nPrompt:\nYou are an expert product+engineering agent. Complete the **first full draft** of this workflow artifact for the current work item.\n- Be creative and propose strong defaults.\n- If uncertain, present 2-3 alternatives and choose one, explaining why.\n- Keep it actionable: concrete lists, commands, checklists, and examples.\n- Assume the reader wants momentum; do not over-polish yet.\n\nOutput: a full artifact draft suitable for immediate review.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:36.57569346-08:00","updated_at":"2025-12-18T15:45:36.57569346-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.5.1","depends_on_id":"wf-ba2.1.5","type":"parent-child","created_at":"2025-12-18T15:45:36.576980046-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.5.2","title":"AI prompt for step 2 of issue-selection","description":"Goal: first review pass. Tighten structure and remove ambiguity.\n\nPrompt:\nReview the Step 1 output for structure and completeness.\n- Identify missing sections and add them.\n- Re-order content for the most logical flow.\n- Replace hand-wavy language with explicit statements.\n- Produce a revised version with minimal fluff.\n\nOutput: revised artifact + a short list of key changes.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:36.709175202-08:00","updated_at":"2025-12-18T15:45:36.709175202-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.5.2","depends_on_id":"wf-ba2.1.5","type":"parent-child","created_at":"2025-12-18T15:45:36.711268812-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.5.3","title":"AI prompt for step 3 of issue-selection","description":"Goal: second review pass. Focus on correctness, edge cases, and operational detail.\n\nPrompt:\nAudit the current artifact for correctness and real-world usability.\n- Add missing constraints, assumptions, and decision points.\n- Add edge cases, failure modes, and \"what could go wrong\" notes.\n- Ensure steps are testable/verifiable.\n- Remove anything not serving the artifact purpose.\n\nOutput: revised artifact + checklist of verifications.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:36.837431399-08:00","updated_at":"2025-12-18T15:45:36.837431399-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.5.3","depends_on_id":"wf-ba2.1.5","type":"parent-child","created_at":"2025-12-18T15:45:36.838771934-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.5.4","title":"AI prompt for step 4 of issue-selection","description":"Goal: third review pass. Improve clarity, concision, and scanability.\n\nPrompt:\nPolish the artifact for clarity and fast reading.\n- Rewrite unclear sections and tighten wording.\n- Convert paragraphs into bullets/checklists where helpful.\n- Normalize terminology and naming.\n- Ensure examples/commands are copy-pastable and consistent.\n\nOutput: revised artifact optimized for human scanning.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:36.975854946-08:00","updated_at":"2025-12-18T15:45:36.975854946-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.5.4","depends_on_id":"wf-ba2.1.5","type":"parent-child","created_at":"2025-12-18T15:45:36.977688829-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.5.5","title":"AI prompt for step 5 of issue-selection","description":"Goal: final review pass. Treat this as a release-quality QA gate.\n\nPrompt:\nPerform a final QA review of the artifact.\n- Check for internal consistency and contradictions.\n- Ensure it aligns with repo conventions and the Workflow doc.\n- Ensure every requirement is actionable and measurable.\n- Emit a final ‚Äúready‚Äù version with a small list of remaining open questions (if any).\n\nOutput: final artifact + remaining risks/open questions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:37.127538076-08:00","updated_at":"2025-12-18T15:45:37.127538076-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.5.5","depends_on_id":"wf-ba2.1.5","type":"parent-child","created_at":"2025-12-18T15:45:37.128952883-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.6","title":"Rule of Five: Issue design interview (Workflow step 4.2)","description":"Apply Rule of Five to turning a selected issue into an actionable design (docs/Workflow.md step 4.2). Prompts should go from creative solution sketch ‚Üí constraints/alternatives ‚Üí final design notes ready for implementation.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-18T15:45:37.250278583-08:00","updated_at":"2025-12-18T15:45:37.250278583-08:00","labels":["rule-of-five","workflow-stage"],"dependencies":[{"issue_id":"wf-ba2.1.6","depends_on_id":"wf-ba2.1","type":"parent-child","created_at":"2025-12-18T15:45:37.251995285-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.6.1","title":"AI prompt for step 1 of issue-design","description":"Goal: produce the first complete draft for this stage. Encourage creativity and exploration.\n\nPrompt:\nYou are an expert product+engineering agent. Complete the **first full draft** of this workflow artifact for the current work item.\n- Be creative and propose strong defaults.\n- If uncertain, present 2-3 alternatives and choose one, explaining why.\n- Keep it actionable: concrete lists, commands, checklists, and examples.\n- Assume the reader wants momentum; do not over-polish yet.\n\nOutput: a full artifact draft suitable for immediate review.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:37.381786272-08:00","updated_at":"2025-12-18T15:45:37.381786272-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.6.1","depends_on_id":"wf-ba2.1.6","type":"parent-child","created_at":"2025-12-18T15:45:37.384069138-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.6.2","title":"AI prompt for step 2 of issue-design","description":"Goal: first review pass. Tighten structure and remove ambiguity.\n\nPrompt:\nReview the Step 1 output for structure and completeness.\n- Identify missing sections and add them.\n- Re-order content for the most logical flow.\n- Replace hand-wavy language with explicit statements.\n- Produce a revised version with minimal fluff.\n\nOutput: revised artifact + a short list of key changes.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:37.503687742-08:00","updated_at":"2025-12-18T15:45:37.503687742-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.6.2","depends_on_id":"wf-ba2.1.6","type":"parent-child","created_at":"2025-12-18T15:45:37.505212664-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.6.3","title":"AI prompt for step 3 of issue-design","description":"Goal: second review pass. Focus on correctness, edge cases, and operational detail.\n\nPrompt:\nAudit the current artifact for correctness and real-world usability.\n- Add missing constraints, assumptions, and decision points.\n- Add edge cases, failure modes, and \"what could go wrong\" notes.\n- Ensure steps are testable/verifiable.\n- Remove anything not serving the artifact purpose.\n\nOutput: revised artifact + checklist of verifications.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:37.627783489-08:00","updated_at":"2025-12-18T15:45:37.627783489-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.6.3","depends_on_id":"wf-ba2.1.6","type":"parent-child","created_at":"2025-12-18T15:45:37.629192741-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.6.4","title":"AI prompt for step 4 of issue-design","description":"Goal: third review pass. Improve clarity, concision, and scanability.\n\nPrompt:\nPolish the artifact for clarity and fast reading.\n- Rewrite unclear sections and tighten wording.\n- Convert paragraphs into bullets/checklists where helpful.\n- Normalize terminology and naming.\n- Ensure examples/commands are copy-pastable and consistent.\n\nOutput: revised artifact optimized for human scanning.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:37.751991079-08:00","updated_at":"2025-12-18T15:45:37.751991079-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.6.4","depends_on_id":"wf-ba2.1.6","type":"parent-child","created_at":"2025-12-18T15:45:37.753525751-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.6.5","title":"AI prompt for step 5 of issue-design","description":"Goal: final review pass. Treat this as a release-quality QA gate.\n\nPrompt:\nPerform a final QA review of the artifact.\n- Check for internal consistency and contradictions.\n- Ensure it aligns with repo conventions and the Workflow doc.\n- Ensure every requirement is actionable and measurable.\n- Emit a final ‚Äúready‚Äù version with a small list of remaining open questions (if any).\n\nOutput: final artifact + remaining risks/open questions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:37.897259349-08:00","updated_at":"2025-12-18T15:45:37.897259349-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.6.5","depends_on_id":"wf-ba2.1.6","type":"parent-child","created_at":"2025-12-18T15:45:37.899902961-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.7","title":"Rule of Five: Implement in small increments (Workflow step 5)","description":"Apply Rule of Five to implementation (docs/Workflow.md step 5). Prompts should guide an agent from initial implementation through increasingly strict review passes: safety, tests, docs, polish, and final readiness.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-18T15:45:38.047902592-08:00","updated_at":"2025-12-18T15:45:38.047902592-08:00","labels":["rule-of-five","workflow-stage"],"dependencies":[{"issue_id":"wf-ba2.1.7","depends_on_id":"wf-ba2.1","type":"parent-child","created_at":"2025-12-18T15:45:38.049938152-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.7.1","title":"AI prompt for step 1 of implementation","description":"Goal: produce the first complete draft for this stage. Encourage creativity and exploration.\n\nPrompt:\nYou are an expert product+engineering agent. Complete the **first full draft** of this workflow artifact for the current work item.\n- Be creative and propose strong defaults.\n- If uncertain, present 2-3 alternatives and choose one, explaining why.\n- Keep it actionable: concrete lists, commands, checklists, and examples.\n- Assume the reader wants momentum; do not over-polish yet.\n\nOutput: a full artifact draft suitable for immediate review.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:38.173804478-08:00","updated_at":"2025-12-18T15:45:38.173804478-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.7.1","depends_on_id":"wf-ba2.1.7","type":"parent-child","created_at":"2025-12-18T15:45:38.175572345-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.7.2","title":"AI prompt for step 2 of implementation","description":"Goal: first review pass. Tighten structure and remove ambiguity.\n\nPrompt:\nReview the Step 1 output for structure and completeness.\n- Identify missing sections and add them.\n- Re-order content for the most logical flow.\n- Replace hand-wavy language with explicit statements.\n- Produce a revised version with minimal fluff.\n\nOutput: revised artifact + a short list of key changes.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:38.30780529-08:00","updated_at":"2025-12-18T15:45:38.30780529-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.7.2","depends_on_id":"wf-ba2.1.7","type":"parent-child","created_at":"2025-12-18T15:45:38.309138673-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.7.3","title":"AI prompt for step 3 of implementation","description":"Goal: second review pass. Focus on correctness, edge cases, and operational detail.\n\nPrompt:\nAudit the current artifact for correctness and real-world usability.\n- Add missing constraints, assumptions, and decision points.\n- Add edge cases, failure modes, and \"what could go wrong\" notes.\n- Ensure steps are testable/verifiable.\n- Remove anything not serving the artifact purpose.\n\nOutput: revised artifact + checklist of verifications.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:38.448133156-08:00","updated_at":"2025-12-18T15:45:38.448133156-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.7.3","depends_on_id":"wf-ba2.1.7","type":"parent-child","created_at":"2025-12-18T15:45:38.450301116-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.7.4","title":"AI prompt for step 4 of implementation","description":"Goal: third review pass. Improve clarity, concision, and scanability.\n\nPrompt:\nPolish the artifact for clarity and fast reading.\n- Rewrite unclear sections and tighten wording.\n- Convert paragraphs into bullets/checklists where helpful.\n- Normalize terminology and naming.\n- Ensure examples/commands are copy-pastable and consistent.\n\nOutput: revised artifact optimized for human scanning.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:38.576607734-08:00","updated_at":"2025-12-18T15:45:38.576607734-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.7.4","depends_on_id":"wf-ba2.1.7","type":"parent-child","created_at":"2025-12-18T15:45:38.578793289-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.7.5","title":"AI prompt for step 5 of implementation","description":"Goal: final review pass. Treat this as a release-quality QA gate.\n\nPrompt:\nPerform a final QA review of the artifact.\n- Check for internal consistency and contradictions.\n- Ensure it aligns with repo conventions and the Workflow doc.\n- Ensure every requirement is actionable and measurable.\n- Emit a final ‚Äúready‚Äù version with a small list of remaining open questions (if any).\n\nOutput: final artifact + remaining risks/open questions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:38.704215479-08:00","updated_at":"2025-12-18T15:45:38.704215479-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.7.5","depends_on_id":"wf-ba2.1.7","type":"parent-child","created_at":"2025-12-18T15:45:38.706062562-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.8","title":"Rule of Five: Review/merge/close loop (Workflow step 6)","description":"Apply Rule of Five to the review‚Üímerge‚Üíclose loop (docs/Workflow.md step 6). Prompts should ensure pre-review checks, clear PR summary, risk assessment, post-merge closure hygiene, and final audit log completeness.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-18T15:45:38.839508552-08:00","updated_at":"2025-12-18T15:45:38.839508552-08:00","labels":["rule-of-five","workflow-stage"],"dependencies":[{"issue_id":"wf-ba2.1.8","depends_on_id":"wf-ba2.1","type":"parent-child","created_at":"2025-12-18T15:45:38.841449451-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.8.1","title":"AI prompt for step 1 of review-merge","description":"Goal: produce the first complete draft for this stage. Encourage creativity and exploration.\n\nPrompt:\nYou are an expert product+engineering agent. Complete the **first full draft** of this workflow artifact for the current work item.\n- Be creative and propose strong defaults.\n- If uncertain, present 2-3 alternatives and choose one, explaining why.\n- Keep it actionable: concrete lists, commands, checklists, and examples.\n- Assume the reader wants momentum; do not over-polish yet.\n\nOutput: a full artifact draft suitable for immediate review.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:38.972915487-08:00","updated_at":"2025-12-18T15:45:38.972915487-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.8.1","depends_on_id":"wf-ba2.1.8","type":"parent-child","created_at":"2025-12-18T15:45:38.974348331-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.8.2","title":"AI prompt for step 2 of review-merge","description":"Goal: first review pass. Tighten structure and remove ambiguity.\n\nPrompt:\nReview the Step 1 output for structure and completeness.\n- Identify missing sections and add them.\n- Re-order content for the most logical flow.\n- Replace hand-wavy language with explicit statements.\n- Produce a revised version with minimal fluff.\n\nOutput: revised artifact + a short list of key changes.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:39.103775964-08:00","updated_at":"2025-12-18T15:45:39.103775964-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.8.2","depends_on_id":"wf-ba2.1.8","type":"parent-child","created_at":"2025-12-18T15:45:39.105559208-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.8.3","title":"AI prompt for step 3 of review-merge","description":"Goal: second review pass. Focus on correctness, edge cases, and operational detail.\n\nPrompt:\nAudit the current artifact for correctness and real-world usability.\n- Add missing constraints, assumptions, and decision points.\n- Add edge cases, failure modes, and \"what could go wrong\" notes.\n- Ensure steps are testable/verifiable.\n- Remove anything not serving the artifact purpose.\n\nOutput: revised artifact + checklist of verifications.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:39.21774105-08:00","updated_at":"2025-12-18T15:45:39.21774105-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.8.3","depends_on_id":"wf-ba2.1.8","type":"parent-child","created_at":"2025-12-18T15:45:39.219388364-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.8.4","title":"AI prompt for step 4 of review-merge","description":"Goal: third review pass. Improve clarity, concision, and scanability.\n\nPrompt:\nPolish the artifact for clarity and fast reading.\n- Rewrite unclear sections and tighten wording.\n- Convert paragraphs into bullets/checklists where helpful.\n- Normalize terminology and naming.\n- Ensure examples/commands are copy-pastable and consistent.\n\nOutput: revised artifact optimized for human scanning.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:39.349029696-08:00","updated_at":"2025-12-18T15:45:39.349029696-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.8.4","depends_on_id":"wf-ba2.1.8","type":"parent-child","created_at":"2025-12-18T15:45:39.350414101-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.8.5","title":"AI prompt for step 5 of review-merge","description":"Goal: final review pass. Treat this as a release-quality QA gate.\n\nPrompt:\nPerform a final QA review of the artifact.\n- Check for internal consistency and contradictions.\n- Ensure it aligns with repo conventions and the Workflow doc.\n- Ensure every requirement is actionable and measurable.\n- Emit a final ‚Äúready‚Äù version with a small list of remaining open questions (if any).\n\nOutput: final artifact + remaining risks/open questions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:39.468263024-08:00","updated_at":"2025-12-18T15:45:39.468263024-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.8.5","depends_on_id":"wf-ba2.1.8","type":"parent-child","created_at":"2025-12-18T15:45:39.470424297-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.9","title":"Rule of Five: Release + release notes (Workflow step 7)","description":"Apply Rule of Five to cutting a release and writing release notes (docs/Workflow.md step 7). Prompts should produce initial notes and then refine accuracy, completeness, and clarity, ending with a release-quality checklist.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-18T15:45:39.655643269-08:00","updated_at":"2025-12-18T15:45:39.655643269-08:00","labels":["rule-of-five","workflow-stage"],"dependencies":[{"issue_id":"wf-ba2.1.9","depends_on_id":"wf-ba2.1","type":"parent-child","created_at":"2025-12-18T15:45:39.657279003-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.9.1","title":"AI prompt for step 1 of release","description":"Goal: produce the first complete draft for this stage. Encourage creativity and exploration.\n\nPrompt:\nYou are an expert product+engineering agent. Complete the **first full draft** of this workflow artifact for the current work item.\n- Be creative and propose strong defaults.\n- If uncertain, present 2-3 alternatives and choose one, explaining why.\n- Keep it actionable: concrete lists, commands, checklists, and examples.\n- Assume the reader wants momentum; do not over-polish yet.\n\nOutput: a full artifact draft suitable for immediate review.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:39.801596899-08:00","updated_at":"2025-12-18T15:45:39.801596899-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.9.1","depends_on_id":"wf-ba2.1.9","type":"parent-child","created_at":"2025-12-18T15:45:39.803109567-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.9.2","title":"AI prompt for step 2 of release","description":"Goal: first review pass. Tighten structure and remove ambiguity.\n\nPrompt:\nReview the Step 1 output for structure and completeness.\n- Identify missing sections and add them.\n- Re-order content for the most logical flow.\n- Replace hand-wavy language with explicit statements.\n- Produce a revised version with minimal fluff.\n\nOutput: revised artifact + a short list of key changes.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:39.92724795-08:00","updated_at":"2025-12-18T15:45:39.92724795-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.9.2","depends_on_id":"wf-ba2.1.9","type":"parent-child","created_at":"2025-12-18T15:45:39.929983987-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.9.3","title":"AI prompt for step 3 of release","description":"Goal: second review pass. Focus on correctness, edge cases, and operational detail.\n\nPrompt:\nAudit the current artifact for correctness and real-world usability.\n- Add missing constraints, assumptions, and decision points.\n- Add edge cases, failure modes, and \"what could go wrong\" notes.\n- Ensure steps are testable/verifiable.\n- Remove anything not serving the artifact purpose.\n\nOutput: revised artifact + checklist of verifications.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:40.071117777-08:00","updated_at":"2025-12-18T15:45:40.071117777-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.9.3","depends_on_id":"wf-ba2.1.9","type":"parent-child","created_at":"2025-12-18T15:45:40.072246861-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.9.4","title":"AI prompt for step 4 of release","description":"Goal: third review pass. Improve clarity, concision, and scanability.\n\nPrompt:\nPolish the artifact for clarity and fast reading.\n- Rewrite unclear sections and tighten wording.\n- Convert paragraphs into bullets/checklists where helpful.\n- Normalize terminology and naming.\n- Ensure examples/commands are copy-pastable and consistent.\n\nOutput: revised artifact optimized for human scanning.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:40.199154684-08:00","updated_at":"2025-12-18T15:45:40.199154684-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.9.4","depends_on_id":"wf-ba2.1.9","type":"parent-child","created_at":"2025-12-18T15:45:40.201888987-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.1.9.5","title":"AI prompt for step 5 of release","description":"Goal: final review pass. Treat this as a release-quality QA gate.\n\nPrompt:\nPerform a final QA review of the artifact.\n- Check for internal consistency and contradictions.\n- Ensure it aligns with repo conventions and the Workflow doc.\n- Ensure every requirement is actionable and measurable.\n- Emit a final ‚Äúready‚Äù version with a small list of remaining open questions (if any).\n\nOutput: final artifact + remaining risks/open questions.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T15:45:40.334530324-08:00","updated_at":"2025-12-18T15:45:40.334530324-08:00","labels":["ai-prompt","rule-of-five"],"dependencies":[{"issue_id":"wf-ba2.1.9.5","depends_on_id":"wf-ba2.1.9","type":"parent-child","created_at":"2025-12-18T15:45:40.335903665-08:00","created_by":"rogardle"}]}
{"id":"wf-ba2.2","title":"CLI Foundation \u0026 UX","description":"Milestones M0-M2: user-runnable CLI, prompt input, dry-run preview.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-17T13:16:50.642948602-08:00","updated_at":"2025-12-19T15:19:43.609673344-08:00","closed_at":"2025-12-19T15:19:43.609678661-08:00","labels":["epic","milestone:M0","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.2","depends_on_id":"wf-ba2","type":"parent-child","created_at":"2025-12-17T13:16:50.644807162-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.2.1","title":"CLI skeleton + subcommands scaffold","description":"M0: Provide CLI entrypoint and minimal subcommands.","notes":"Added a mandatory dirty-working-tree decision gate to docs (.opencode/command/implement.md + docs/Workflow.md). Agents must stop and ask how to handle uncommitted changes; never assume changes are irrelevant.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T13:18:53.285620964-08:00","updated_at":"2025-12-18T14:29:01.274129788-08:00","closed_at":"2025-12-18T14:29:01.274129788-08:00","labels":["milestone:M0","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.2.1","depends_on_id":"wf-ba2.2","type":"parent-child","created_at":"2025-12-17T13:18:53.28741324-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.2.2","title":"Prompt input modes (arg/stdin/file)","description":"- Problem\n  - Downstream PRD generation needs a prompt body, but the CLI currently only writes a stub (or seeds from an issue). This issue defines how prompt text is provided to CLI commands in a repeatable way (arg/stdin/file).\n\n- Users\n  - Primary: PM/agent invoking waif prd locally and in automation.\n  - Secondary: future TUI and CI scripts that need deterministic, non-interactive behavior.\n\n- Success criteria\n  - waif prd accepts prompt input from:\n    - CLI arg via --prompt \u003ctext\u003e\n    - stdin via --prompt -\n    - file via --prompt-file \u003cpath\u003e\n  - If both --prompt and --prompt-file are provided, exit code 2 with a clear usage error.\n  - Prompt is embedded into the generated PRD as a comment block so later stages can consume it.\n  - JSON output includes prompt metadata (source, length) for debugging/automation.\n\n- Constraints\n  - Default behavior must not block waiting on stdin; stdin is only read when explicitly requested with --prompt -.\n  - Preserve existing --out and --issue behavior, exit codes, and JSON/human output conventions.\n\n- Existing state\n  - waif prd writes a stub PRD and can seed from a Beads issue via --issue.\n  - No support for ingesting a freeform prompt from arg/stdin/file.\n\n- Desired change\n  - Add --prompt and --prompt-file to waif prd.\n  - Implement deterministic prompt-source selection with explicit stdin mode only.\n\n- Likely duplicates / related docs (file paths)\n  - .opencode/command/intake.md\n  - docs/dev/CLI_PRD.md\n\n- Related issues (Beads ids)\n  - wf-ba2.2.1 (CLI skeleton)\n  - wf-ba2.3.1 (Minimal PRD generator from prompt input; blocked by this)\n\n- Clarifying questions\n  1. Should stdin be read implicitly when piped and no flags are provided, or explicit-only? (Chosen: explicit-only for safety.)\n  2. Should we support multiple prompt inputs concatenated (e.g. repeated flags)? (Chosen: no, error if ambiguous.)\n  3. Should prompt be persisted as metadata-only or embedded in the PRD file? (Chosen: embed in PRD comment block for traceability.)\n\n- Proposed next step:\n  - Implement in src/commands/prd.ts and add tests in tests/cli.test.ts\n","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T13:18:53.370913238-08:00","updated_at":"2025-12-19T13:19:45.660969168-08:00","closed_at":"2025-12-19T13:19:45.660969168-08:00","labels":["milestone:M0","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.2.2","depends_on_id":"wf-ba2.2","type":"parent-child","created_at":"2025-12-17T13:18:53.372397928-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.2.2","depends_on_id":"wf-ba2.2.1","type":"blocks","created_at":"2025-12-17T13:19:53.179399443-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.2.3","title":"--dry-run preview mode (no writes/branches/PRs)","description":"M2: Preview/diff output without filesystem or git writes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-17T13:19:50.918771263-08:00","updated_at":"2025-12-19T15:19:17.821799474-08:00","closed_at":"2025-12-19T15:19:17.821799474-08:00","labels":["milestone:M2","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.2.3","depends_on_id":"wf-ba2.2","type":"parent-child","created_at":"2025-12-17T13:19:50.919928312-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.2.3","depends_on_id":"wf-ba2.3.1","type":"blocks","created_at":"2025-12-17T13:19:53.752409696-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.2.3","depends_on_id":"wf-ba2.4.1","type":"blocks","created_at":"2025-12-17T13:19:53.806343188-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.2.3","depends_on_id":"wf-ba2","type":"blocks","created_at":"2025-12-19T00:09:19.535779357-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.3","title":"PRD Template \u0026 Validation","description":"Milestones M0-M4: generate/update PRDs with required outline and structure-preserving edits.","notes":"Investigated user report '/intake: No such file or directory'. Ran 'waif next --json' and 'bd show wf-ba2.3 --json' to confirm epic context, then reviewed .opencode/command/intake.md, src/commands/intake.ts, and src/index.ts. Intake command instructions exist for OpenCode and a TypeScript implementation lives in src/commands/intake.ts, but index.ts never registers it, so 'waif intake' is currently unavailable and prompts referencing '/intake' fall back to shell errors. Need to wire the intake command into the CLI and clarify when to use '/intake' (OpenCode) vs 'waif intake'.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-17T13:17:01.146351818-08:00","updated_at":"2025-12-22T16:56:27.525563379-08:00","closed_at":"2025-12-22T16:56:27.525563379-08:00","labels":["epic","milestone:M0","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.3","depends_on_id":"wf-ba2","type":"parent-child","created_at":"2025-12-17T13:17:01.148338347-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.3","depends_on_id":"wf-ba2.2","type":"blocks","created_at":"2025-12-17T13:17:57.363813038-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.3.1","title":"Minimal PRD generator (writes Markdown file)","description":"M0: Generate a Markdown PRD file from prompt input.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-17T13:19:51.010542797-08:00","updated_at":"2025-12-23T16:41:27.648199731-08:00","labels":["milestone:M0","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.3.1","depends_on_id":"wf-ba2.3","type":"parent-child","created_at":"2025-12-17T13:19:51.012711622-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.3.1","depends_on_id":"wf-ba2.2.1","type":"blocks","created_at":"2025-12-17T13:19:53.255321969-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.3.1","depends_on_id":"wf-ba2.2.2","type":"blocks","created_at":"2025-12-17T13:19:53.34650302-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.3.1","depends_on_id":"wf-ba2","type":"blocks","created_at":"2025-12-19T00:09:20.02846878-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.3.2","title":"Enforce required PRD outline headings","description":"M1: Ensure output matches required PRD outline.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-17T13:19:51.090710055-08:00","updated_at":"2025-12-22T16:40:39.554115654-08:00","labels":["milestone:M1","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.3.2","depends_on_id":"wf-ba2.3","type":"parent-child","created_at":"2025-12-17T13:19:51.092313156-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.3.2","depends_on_id":"wf-ba2.3.1","type":"blocks","created_at":"2025-12-17T13:19:53.441959375-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.3.2","depends_on_id":"wf-ba2","type":"blocks","created_at":"2025-12-19T00:09:20.252638838-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.3.3","title":"Update mode preserves structure / minimal edits","description":"M3: Update existing PRD without restructuring unrelated content.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-17T13:19:51.174262271-08:00","updated_at":"2025-12-22T16:40:50.434927797-08:00","labels":["milestone:M3","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.3.3","depends_on_id":"wf-ba2.3","type":"parent-child","created_at":"2025-12-17T13:19:51.175400782-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.3.3","depends_on_id":"wf-ba2.3.2","type":"blocks","created_at":"2025-12-17T13:19:53.864632066-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.3.3","depends_on_id":"wf-ba2.4.1","type":"blocks","created_at":"2025-12-17T13:19:53.91970648-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.3.3","depends_on_id":"wf-ba2","type":"blocks","created_at":"2025-12-19T00:09:20.481194882-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.3.4","title":"Integrate context gathering into create/update (optional)","description":"M4: Use eligible repo context to improve generation/update.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:51.249761909-08:00","updated_at":"2025-12-18T11:04:24.297021841-08:00","labels":["milestone:M4","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.3.4","depends_on_id":"wf-ba2.3","type":"parent-child","created_at":"2025-12-17T13:19:51.250972949-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.3.4","depends_on_id":"wf-ba2.3.1","type":"blocks","created_at":"2025-12-17T13:19:54.174821827-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.3.4","depends_on_id":"wf-ba2.3.3","type":"blocks","created_at":"2025-12-17T13:19:54.237947383-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.3.4","depends_on_id":"wf-ba2.5.2","type":"blocks","created_at":"2025-12-17T13:19:54.302590833-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.3.5","title":"Per-repo config file (template + lint rules)","description":"M4: Support per-repo configuration for templates and linting.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:51.310735147-08:00","updated_at":"2025-12-18T11:04:24.296317632-08:00","labels":["milestone:M4","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.3.5","depends_on_id":"wf-ba2.3","type":"parent-child","created_at":"2025-12-17T13:19:51.311865677-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.3.5","depends_on_id":"wf-ba2.3.2","type":"blocks","created_at":"2025-12-17T13:19:54.364555119-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.3.6","title":"Wire waif prd command to PRD Agent workflow","description":"- Problem\n  - `waif prd` supports prompt ingestion and can seed from issues, but it is not yet explicitly wired to the OpenCode PRD Agent workflow (`/prd`) described in `.opencode/command/prd.md`.\n  - Cross-linking expectations currently differ:\n    - PRD Agent spec suggests using `bd comment \u003cid\u003e \"Linked PRD: \u003cpath\u003e\"` plus `bd update \u003cid\u003e --external-ref \"PRD: \u003cpath\u003e\"`.\n    - CLI currently updates the issue description with a `Linked PRD: \u003cpath\u003e` line.\n  - There is no single end-to-end command that takes the user from ‚ÄúI have a prompt/issue‚Äù to ‚ÄúI have a completed PRD‚Äù via an interactive agent/human interview.\n\n- Users\n  - Primary: PM/agent who wants one consistent PRD authoring workflow (CLI + agent) with reliable traceability.\n  - Secondary: automation/TUI that depends on stable link surfaces.\n\n- Success criteria\n  - Decide and document the canonical cross-link mechanism (description vs comment vs external-ref).\n  - Ensure `waif prd` and `/prd` workflow produce the same links by default.\n  - Ensure idempotence: re-running does not create duplicate links/comments.\n\n- Functional requirements (new)\n  - `waif prd` provides an interactive mode that *invokes the OpenCode PRD Agent* (`/prd`) so the user (human) and/or a coding agent can complete the PRD through interview.\n  - The interactive flow must:\n    - support starting from either a `--prompt`/`--prompt-file` OR a `--issue \u003cid\u003e` seed\n    - write/update the PRD file on disk (`docs/dev/..._PRD.md`)\n    - ensure two-way traceability between the PRD and the Beads issue\n    - allow a human to answer interview questions (non-autonomous) OR allow an agent to drive the interview (autonomous), with clear UX distinction\n\n- Constraints\n  - Must remain deterministic and audit-friendly:\n    - any automated edits must be written to disk (no hidden changes)\n    - the resulting PRD must contain `Source issue: \u003cid\u003e` when an issue id is used\n    - linking must be idempotent\n  - Must not break existing `waif prd --out ...` stub behavior.\n  - Must respect ignore boundaries (OpenCode rules) when passing context to the agent.\n\n- Related docs\n  - `.opencode/command/prd.md`\n  - `.opencode/command/intake.md`\n  - `docs/Workflow.md`\n\n- Related issues\n  - `wf-ba2.3.1` (Minimal PRD generator from prompt input)\n  - `wf-ba2.2.2` (Prompt input modes)\n\n- Open questions\n  1. What is the canonical way for a CLI process to invoke OpenCode `/prd`? Options:\n     - launch `opencode` with a pre-filled command string\n     - print a next-step instruction for the user to run in OpenCode (fallback)\n     - integrate via an OpenCode API/MCP if available\n  2. Should the CLI always run in ‚Äúinstruction emission‚Äù mode (prints `/prd ...`) vs attempting to spawn an interactive OpenCode session?\n  3. Which link mechanism becomes canonical: issue description line vs `bd comment` vs `--external-ref`?\n\n- Proposed next step\n  - Define the integration approach (spawn vs instruction-only vs API), then implement the interactive `waif prd` mode and align cross-linking semantics across CLI + agent + docs.\n","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T13:34:56.931577392-08:00","updated_at":"2025-12-19T13:43:58.630128578-08:00","dependencies":[{"issue_id":"wf-ba2.3.6","depends_on_id":"wf-ba2.3","type":"parent-child","created_at":"2025-12-19T13:35:04.622477457-08:00","created_by":"import"},{"issue_id":"wf-ba2.3.6","depends_on_id":"wf-ba2.2.2","type":"discovered-from","created_at":"2025-12-19T13:35:04.62453208-08:00","created_by":"import"},{"issue_id":"wf-ba2.3.6","depends_on_id":"wf-ba2.3.1","type":"discovered-from","created_at":"2025-12-19T13:35:04.62553039-08:00","created_by":"import"},{"issue_id":"wf-ba2.3.6","depends_on_id":"wf-ba2.3.7","type":"blocks","created_at":"2025-12-19T13:48:04.57869771-08:00","created_by":"import"}]}
{"id":"wf-ba2.3.7","title":"Design: integrate waif CLI with OpenCode PRD agent","description":"Linked PRD: /home/rgardler/projects/waif/worktree_design/docs/dev/wf-ba2.3.7_PRD.md","notes":"PR: https://github.com/SorraTheOrc/waif/pull/10","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-19T13:47:25.027491647-08:00","updated_at":"2025-12-22T16:31:06.881672894-08:00","closed_at":"2025-12-22T14:34:58.306420459-08:00","dependencies":[{"issue_id":"wf-ba2.3.7","depends_on_id":"wf-ba2.3","type":"parent-child","created_at":"2025-12-19T13:48:04.582847605-08:00","created_by":"import"},{"issue_id":"wf-ba2.3.7","depends_on_id":"wf-ug7","type":"blocks","created_at":"2025-12-22T10:40:45.293567494-08:00","created_by":"daemon"}],"comments":[{"id":11,"issue_id":"wf-ba2.3.7","author":"design","text":"Linked PRD: docs/dev/wf-ba2.3.7_PRD.md","created_at":"2025-12-24T00:43:53Z"},{"id":12,"issue_id":"wf-ba2.3.7","author":"design","text":"PRD draft removed from branch per request; will create a new PRD when ready.","created_at":"2025-12-24T00:43:53Z"}]}
{"id":"wf-ba2.4","title":"Markdown Linting Pipeline (remark)","description":"Milestones M1-M2: run remark formatting and define lint error policy.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-17T13:17:01.225289887-08:00","updated_at":"2025-12-22T16:56:27.542206103-08:00","closed_at":"2025-12-22T16:56:27.542206103-08:00","labels":["epic","milestone:M1","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.4","depends_on_id":"wf-ba2","type":"parent-child","created_at":"2025-12-17T13:17:01.227253675-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.4","depends_on_id":"wf-ba2.3","type":"blocks","created_at":"2025-12-17T13:17:57.428404613-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.4.1","title":"Run remark and rewrite output in-place","description":"M1: Run remark to format generated/updated PRDs.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-17T13:19:51.376152083-08:00","updated_at":"2025-12-22T16:40:43.694601898-08:00","labels":["milestone:M1","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.4.1","depends_on_id":"wf-ba2.4","type":"parent-child","created_at":"2025-12-17T13:19:51.377467062-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.4.1","depends_on_id":"wf-ba2.3.2","type":"blocks","created_at":"2025-12-17T13:19:53.53161492-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.4.1","depends_on_id":"wf-ba2","type":"blocks","created_at":"2025-12-19T00:09:21.285955967-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.4.2","title":"Lint error policy per mode (fail vs warn)","description":"M2: Define behavior on remark errors in dry-run vs write mode.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:51.440050479-08:00","updated_at":"2025-12-18T11:04:24.295689988-08:00","labels":["milestone:M2","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.4.2","depends_on_id":"wf-ba2.4","type":"parent-child","created_at":"2025-12-17T13:19:51.44135769-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.4.2","depends_on_id":"wf-ba2.4.1","type":"blocks","created_at":"2025-12-17T13:19:53.590118288-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.4.2","depends_on_id":"wf-ba2.2.3","type":"blocks","created_at":"2025-12-17T13:19:53.644702217-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.4.3","title":"Idempotence/stability checks for formatted output","description":"M8: Ensure repeated formatting produces stable output.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-17T13:19:51.503578557-08:00","updated_at":"2025-12-18T11:04:24.332006575-08:00","labels":["milestone:M8","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.4.3","depends_on_id":"wf-ba2.4","type":"parent-child","created_at":"2025-12-17T13:19:51.505163282-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.4.3","depends_on_id":"wf-ba2.4.1","type":"blocks","created_at":"2025-12-17T13:19:53.701300851-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.5","title":"Context Gathering + .gitignore Guards","description":"Milestone M4: context gathering with strict .gitignore read/write enforcement.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-17T13:17:01.297482665-08:00","updated_at":"2025-12-22T16:56:27.553234611-08:00","closed_at":"2025-12-22T16:56:27.553234611-08:00","labels":["epic","milestone:M4","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.5","depends_on_id":"wf-ba2","type":"parent-child","created_at":"2025-12-17T13:17:01.298760281-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.5","depends_on_id":"wf-ba2.2","type":"blocks","created_at":"2025-12-17T13:17:57.490188558-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.5.1","title":".gitignore guards for reads + writes (hard enforcement)","description":"M4: Never read/write ignored paths when gathering context or writing outputs.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-17T13:19:51.571202137-08:00","updated_at":"2025-12-22T16:40:52.029781568-08:00","labels":["milestone:M4","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.5.1","depends_on_id":"wf-ba2.5","type":"parent-child","created_at":"2025-12-17T13:19:51.572857192-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.5.1","depends_on_id":"wf-ba2.2.1","type":"blocks","created_at":"2025-12-17T13:19:53.979494969-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.5.1","depends_on_id":"wf-ba2","type":"blocks","created_at":"2025-12-19T00:18:24.647947163-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.5.2","title":"Context selection strategy (eligible repo context)","description":"M4: Define what repo content is eligible as context.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:51.637139286-08:00","updated_at":"2025-12-18T11:04:24.294958116-08:00","labels":["milestone:M4","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.5.2","depends_on_id":"wf-ba2.5","type":"parent-child","created_at":"2025-12-17T13:19:51.638875804-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.5.2","depends_on_id":"wf-ba2.5.1","type":"blocks","created_at":"2025-12-17T13:19:54.041264988-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.5.3","title":"Affected-files calculation (for audit logs)","description":"M4: Compute affected files for audit logging.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:51.703912151-08:00","updated_at":"2025-12-18T11:04:24.294126466-08:00","labels":["milestone:M4","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.5.3","depends_on_id":"wf-ba2.5","type":"parent-child","created_at":"2025-12-17T13:19:51.70501008-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.5.3","depends_on_id":"wf-ba2.5.1","type":"blocks","created_at":"2025-12-17T13:19:54.110593061-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.5.4","title":"Context Pack command (waif ctx): Intake brief","description":"Linked PRD: docs/dev/context_pack_PRD.md\n\nProblem\n- Agents starting work on a new issue need to understand the project‚Äôs overall purpose, structure, and operating rules.\n- Today that context is spread across many files and is not optimized for agent consumption, increasing time-to-first-contribution and raising the risk that agents miss critical workflow/guardrail information.\n- Implement this early, before the repo grows large enough that agents cannot efficiently discover what they need.\n\nUsers\n- Primary: workflow agents starting a new Beads issue (they should consult the context pack at the start of each new issue).\n- Secondary: the Map agent (periodically maintains accuracy of the context pack); the PM indirectly benefits via faster/safer agent execution.\n\nSuccess criteria\n- `waif context` (alias: `waif ctx`) generates/updates a single agent-oriented ‚Äúsignpost‚Äù document: `docs/dev/CONTEXT_PACK.md`.\n- The context pack provides ‚Äúminimum efficient‚Äù discovery:\n  - Links to all important docs (PRDs/specs, user docs, workflow rules, issue tracking rules, agent roles, key source folders).\n  - Each entry includes a short description (1‚Äì2 bullets) describing what it contains and when to read it.\n  - Large docs may be referenced multiple times, pointing at specific sections.\n- The pack avoids rapidly-changing content; instead it points to the canonical way to query it (e.g., it does not list active Beads issues, but explains how to query for ready/active work).\n- Soft size limit: ~20,000 tokens.\n  - If generation exceeds the limit, still write the file AND create/update a P0 Beads issue assigned to the PM flagging that the context pack has exceeded the target and needs strategy/partitioning.\n\nConstraints\n- Ignore/redaction boundaries are defined by `.gitignore`.\n  - Ignored content must not be included; ‚Äúomitted but redacted‚Äù summaries are acceptable.\n- Initial scope (this iteration): implement the `waif context|ctx` command to create/update the context pack.\n- Out of scope (this iteration): defining/automating rules for when agents must file ‚Äúrequest context update‚Äù issues after significant changes.\n- This document is intended for agent consumption, not human consumption.\n\nExisting state (current behavior)\n- `docs/dev/CLI_PRD.md` recommends a `context`/`ctx` command that generates `docs/dev/CONTEXT_PACK.md`, but the command and template do not currently exist.\n- Project structure/rules are spread across multiple docs; there is no single agent-first index.\n\nDesired change\n- Implement/ship a CLI command `waif context` (alias `waif ctx`) that generates/updates `docs/dev/CONTEXT_PACK.md` from a stable template.\n- Ensure ignore boundary compliance via `.gitignore`.\n- Implement the ‚Äú20,000 token‚Äù soft limit behavior: write the file and create/update a P0 issue assigned to the PM when exceeded.\n\nLikely duplicates / related docs (file paths)\n- docs/dev/CLI_PRD.md (mentions `context`/`ctx` utility command)\n- docs/dev/TUI_PRD.md (mentions context sharing with OpenCode; ignore boundaries)\n- docs/Workflow.md (workflow rules that the context pack should signpost)\n- docs/dev/context_pack_PRD.md (canonical Context Pack PRD)\n\nRelated issues (Beads ids)\n- wf-7cn: Docs: Implement Context Pack command and template\n- wf-ba2.5: Context Gathering + .gitignore Guards (epic)\n- wf-ba2.5.1: .gitignore guards for reads + writes (hard enforcement)\n- wf-ba2.5.2: Context selection strategy (eligible repo context)\n- wf-ba2.9.4: Tests: .gitignore enforcement\n- wf-ba2.5.5: Instruct agents to file context pack update requests\n\nClarifying questions\n1. Minimum required section outline for `docs/dev/CONTEXT_PACK.md` (top-level headings) so the generator stays stable?\n2. How should ‚Äú~20,000 tokens‚Äù be measured (approximate by characters/words, or via a tokenizer implementation)?\n3. P0 issue strategy on overflow: one long-lived issue updated each time vs create a new P0 each time?\n4. Should `waif ctx` enumerate PRDs/specs by scanning `docs/dev/*PRD*.md`, or rely on a curated allowlist?\n5. Should ordering be deterministic (stable sort by path/title) to reduce diff noise?\n\nProposed next step\n- NEW PRD at: docs/dev/context_pack_PRD.md\n- Recommended next command: /prd docs/dev/context_pack_PRD.md wf-ba2.5.4\n","notes":"Decision update: This work warrants a NEW PRD (large/important feature). Created skeleton PRD at docs/dev/context_pack_PRD.md and updated docs/dev/CLI_PRD.md to link to it (replacing prior inline template/section reference).","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-22T10:07:31.618758246-08:00","updated_at":"2025-12-22T10:11:47.416669214-08:00","dependencies":[{"issue_id":"wf-ba2.5.4","depends_on_id":"wf-ba2.5","type":"parent-child","created_at":"2025-12-22T10:07:31.620445866-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.5.4","depends_on_id":"wf-7cn","type":"discovered-from","created_at":"2025-12-22T10:07:31.62456323-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.5.5","title":"Instruct agents to file context pack update requests","description":"Define/update agent operating rules so that when an agent makes a significant repo change, they file a Beads request to update the context pack (docs/dev/CONTEXT_PACK.md). Initial implementation (waif ctx command) is tracked separately; this task is for adding/clarifying the instruction + trigger rule in workflow docs/agent instructions.","notes":"This policy work depends on the Context Pack PRD: docs/dev/context_pack_PRD.md and intake brief wf-ba2.5.4.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T10:07:35.103697584-08:00","updated_at":"2025-12-22T10:11:47.573911992-08:00","dependencies":[{"issue_id":"wf-ba2.5.5","depends_on_id":"wf-ba2.5","type":"parent-child","created_at":"2025-12-22T10:07:35.105282246-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.5.5","depends_on_id":"wf-ba2.5.4","type":"discovered-from","created_at":"2025-12-22T10:07:35.107802363-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.6","title":"Git Branch + PR via gh","description":"Milestones M5-M6: branch+commit and PR creation via gh.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-17T13:17:01.373489716-08:00","updated_at":"2025-12-22T16:56:27.564010669-08:00","closed_at":"2025-12-22T16:56:27.564010669-08:00","labels":["epic","milestone:M5","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.6","depends_on_id":"wf-ba2","type":"parent-child","created_at":"2025-12-17T13:17:01.375033692-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.6","depends_on_id":"wf-ba2.2","type":"blocks","created_at":"2025-12-17T13:17:57.551380101-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.6","depends_on_id":"wf-ba2.3","type":"blocks","created_at":"2025-12-17T13:17:57.61327417-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.6.1","title":"Safe branch + commit workflow (clean/dirty checks)","description":"M5: Create branch and commit PRD changes safely.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-17T13:19:51.765863304-08:00","updated_at":"2025-12-22T16:40:48.496418558-08:00","labels":["milestone:M5","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.6.1","depends_on_id":"wf-ba2.6","type":"parent-child","created_at":"2025-12-17T13:19:51.767067298-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.6.1","depends_on_id":"wf-ba2.3.3","type":"blocks","created_at":"2025-12-17T13:19:54.422079787-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.6.1","depends_on_id":"wf-ba2.4.1","type":"blocks","created_at":"2025-12-17T13:19:54.473259339-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.6.1","depends_on_id":"wf-ba2","type":"blocks","created_at":"2025-12-19T00:09:22.239610354-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.6.2","title":"Enforce no direct commits / protected branch safety","description":"M5: Prevent direct commits to protected branches; default to branch+PR.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-17T13:19:51.836559885-08:00","updated_at":"2025-12-18T11:04:24.258625119-08:00","labels":["milestone:M5","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.6.2","depends_on_id":"wf-ba2.6","type":"parent-child","created_at":"2025-12-17T13:19:51.837939982-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.6.2","depends_on_id":"wf-ba2.6.1","type":"blocks","created_at":"2025-12-17T13:19:54.529431249-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.6.2","depends_on_id":"wf-ba2","type":"blocks","created_at":"2025-12-19T00:09:22.518671857-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.6.3","title":"Dry-run prevents git actions","description":"M5: Ensure dry-run never creates branches/commits.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:51.914191747-08:00","updated_at":"2025-12-18T11:04:24.293294065-08:00","labels":["milestone:M5","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.6.3","depends_on_id":"wf-ba2.6","type":"parent-child","created_at":"2025-12-17T13:19:51.915695629-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.6.3","depends_on_id":"wf-ba2.2.3","type":"blocks","created_at":"2025-12-17T13:19:54.586670984-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.6.3","depends_on_id":"wf-ba2.6.1","type":"blocks","created_at":"2025-12-17T13:19:54.642171544-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.6.4","title":"Open PR via gh (auth checks, base branch, PR URL output)","description":"M6: Use gh CLI to open a pull request.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-17T13:19:51.990423314-08:00","updated_at":"2025-12-22T16:40:56.331614517-08:00","labels":["milestone:M6","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.6.4","depends_on_id":"wf-ba2.6","type":"parent-child","created_at":"2025-12-17T13:19:51.991524057-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.6.4","depends_on_id":"wf-ba2.6.1","type":"blocks","created_at":"2025-12-17T13:19:54.69693234-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.6.4","depends_on_id":"wf-ba2","type":"blocks","created_at":"2025-12-19T00:09:22.741152456-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.7","title":"bd Linking","description":"Milestone M6: accept bd IDs and inject references into PRDs.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-17T13:17:01.447764175-08:00","updated_at":"2025-12-22T16:56:27.57395146-08:00","closed_at":"2025-12-22T16:56:27.57395146-08:00","labels":["epic","milestone:M6","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.7","depends_on_id":"wf-ba2","type":"parent-child","created_at":"2025-12-17T13:17:01.448860734-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.7","depends_on_id":"wf-ba2.3","type":"blocks","created_at":"2025-12-17T13:17:57.666333086-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.7.1","title":"Accept/validate bd id(s) and inject PRD references","description":"M6: Include bd issue references in PRD output.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:52.068386831-08:00","updated_at":"2025-12-22T16:40:58.989991939-08:00","labels":["milestone:M6","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.7.1","depends_on_id":"wf-ba2.7","type":"parent-child","created_at":"2025-12-17T13:19:52.06967738-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.7.1","depends_on_id":"wf-ba2.3.2","type":"blocks","created_at":"2025-12-17T13:19:54.755520567-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.7.2","title":"Pass bd id through CLI and ensure it appears in PRD","description":"M6: Wire bd id input end-to-end.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:52.147589895-08:00","updated_at":"2025-12-18T11:04:24.291789299-08:00","labels":["milestone:M6","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.7.2","depends_on_id":"wf-ba2.7","type":"parent-child","created_at":"2025-12-17T13:19:52.148714825-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.7.2","depends_on_id":"wf-ba2.2.1","type":"blocks","created_at":"2025-12-17T13:19:54.81550245-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.7.2","depends_on_id":"wf-ba2.7.1","type":"blocks","created_at":"2025-12-17T13:19:54.873506194-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.8","title":"Audit Logging + Redaction","description":"Milestone M7: redacted audit logs (8000 chars) with prompt hash and metadata.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-17T13:17:01.514925677-08:00","updated_at":"2025-12-22T16:56:27.595489184-08:00","closed_at":"2025-12-22T16:56:27.595489184-08:00","labels":["epic","milestone:M7","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.8","depends_on_id":"wf-ba2","type":"parent-child","created_at":"2025-12-17T13:17:01.516568561-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.8","depends_on_id":"wf-ba2.2","type":"blocks","created_at":"2025-12-17T13:17:57.723800211-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.8","depends_on_id":"wf-ba2.5","type":"blocks","created_at":"2025-12-17T13:17:57.782362273-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.8.1","title":"Audit schema + storage location default","description":"M7: Define audit log schema and where it is stored.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:52.227461366-08:00","updated_at":"2025-12-18T11:04:24.290984464-08:00","labels":["milestone:M7","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.8.1","depends_on_id":"wf-ba2.8","type":"parent-child","created_at":"2025-12-17T13:19:52.228753057-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.8.1","depends_on_id":"wf-ba2.2.1","type":"blocks","created_at":"2025-12-17T13:19:54.927586319-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.8.2","title":"Prompt redaction/truncation (8000 chars) + prompt_hash","description":"M7: Redact tokens/passwords/PEM and truncate prompt excerpt.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:52.305537561-08:00","updated_at":"2025-12-18T11:04:24.290322485-08:00","labels":["milestone:M7","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.8.2","depends_on_id":"wf-ba2.8","type":"parent-child","created_at":"2025-12-17T13:19:52.306832606-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.8.2","depends_on_id":"wf-ba2.8.1","type":"blocks","created_at":"2025-12-17T13:19:55.008483486-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.8.3","title":"Audit metadata capture (timestamp, invoker, mode, affected files, issue links)","description":"M7: Capture required audit metadata.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:52.37791664-08:00","updated_at":"2025-12-18T11:04:24.289244027-08:00","labels":["milestone:M7","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.8.3","depends_on_id":"wf-ba2.8","type":"parent-child","created_at":"2025-12-17T13:19:52.378959182-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.8.3","depends_on_id":"wf-ba2.8.1","type":"blocks","created_at":"2025-12-17T13:19:55.085635777-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.8.3","depends_on_id":"wf-ba2.5.3","type":"blocks","created_at":"2025-12-17T13:19:55.160150004-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.8.3","depends_on_id":"wf-ba2.7.1","type":"blocks","created_at":"2025-12-17T13:19:55.233410564-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.8.4","title":"Hook auditing into create/update/dry-run flows","description":"M7: Ensure every run emits an audit entry.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:52.444434382-08:00","updated_at":"2025-12-18T11:04:24.288247179-08:00","labels":["milestone:M7","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.8.4","depends_on_id":"wf-ba2.8","type":"parent-child","created_at":"2025-12-17T13:19:52.44604712-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.8.4","depends_on_id":"wf-ba2.3.1","type":"blocks","created_at":"2025-12-17T13:19:55.293409259-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.8.4","depends_on_id":"wf-ba2.3.3","type":"blocks","created_at":"2025-12-17T13:19:55.352268359-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.8.4","depends_on_id":"wf-ba2.2.3","type":"blocks","created_at":"2025-12-17T13:19:55.415752074-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.8.4","depends_on_id":"wf-ba2.8.2","type":"blocks","created_at":"2025-12-17T13:19:55.471271543-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.8.4","depends_on_id":"wf-ba2.8.3","type":"blocks","created_at":"2025-12-17T13:19:55.522028122-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.9","title":"Acceptance Criteria Test Harness","description":"Milestone M8: automated tests mapped to PRD acceptance criteria.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-17T13:17:01.579549323-08:00","updated_at":"2025-12-18T11:04:24.298104552-08:00","labels":["epic","milestone:M8","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.9","depends_on_id":"wf-ba2","type":"parent-child","created_at":"2025-12-17T13:17:01.580990851-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9","depends_on_id":"wf-ba2.2","type":"blocks","created_at":"2025-12-17T13:17:57.833590614-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9","depends_on_id":"wf-ba2.3","type":"blocks","created_at":"2025-12-17T13:17:57.884986714-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9","depends_on_id":"wf-ba2.4","type":"blocks","created_at":"2025-12-17T13:17:57.945686229-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9","depends_on_id":"wf-ba2.5","type":"blocks","created_at":"2025-12-17T13:17:58.012421806-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9","depends_on_id":"wf-ba2.6","type":"blocks","created_at":"2025-12-17T13:17:58.071780019-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9","depends_on_id":"wf-ba2.7","type":"blocks","created_at":"2025-12-17T13:17:58.137610639-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9","depends_on_id":"wf-ba2.8","type":"blocks","created_at":"2025-12-17T13:17:58.196618519-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.9.1","title":"Tests: create (outline + remark formatting)","description":"M8: Tests for create path.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:52.525622395-08:00","updated_at":"2025-12-18T11:04:24.28707887-08:00","labels":["milestone:M8","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.9.1","depends_on_id":"wf-ba2.9","type":"parent-child","created_at":"2025-12-17T13:19:52.527534969-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9.1","depends_on_id":"wf-ba2.3.2","type":"blocks","created_at":"2025-12-17T13:19:55.576496882-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9.1","depends_on_id":"wf-ba2.4.1","type":"blocks","created_at":"2025-12-17T13:19:55.634314216-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.9.2","title":"Tests: dry-run produces no writes","description":"M8: Ensure dry-run has zero side effects.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:52.651224888-08:00","updated_at":"2025-12-18T11:04:24.286334362-08:00","labels":["milestone:M8","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.9.2","depends_on_id":"wf-ba2.9","type":"parent-child","created_at":"2025-12-17T13:19:52.653202034-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9.2","depends_on_id":"wf-ba2.2.3","type":"blocks","created_at":"2025-12-17T13:19:55.692553479-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9.2","depends_on_id":"wf-ba2.6.1","type":"blocks","created_at":"2025-12-17T13:19:55.759888803-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.9.3","title":"Tests: update preserves structure","description":"M8: Update behavior tests.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:52.747690873-08:00","updated_at":"2025-12-18T11:04:24.285038292-08:00","labels":["milestone:M8","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.9.3","depends_on_id":"wf-ba2.9","type":"parent-child","created_at":"2025-12-17T13:19:52.748894227-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9.3","depends_on_id":"wf-ba2.3.3","type":"blocks","created_at":"2025-12-17T13:19:55.8357798-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.9.4","title":"Tests: .gitignore enforcement","description":"M8: Context and writes respect .gitignore.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:52.835281611-08:00","updated_at":"2025-12-18T11:04:24.284177282-08:00","labels":["milestone:M8","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.9.4","depends_on_id":"wf-ba2.9","type":"parent-child","created_at":"2025-12-17T13:19:52.836721508-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9.4","depends_on_id":"wf-ba2.5.1","type":"blocks","created_at":"2025-12-17T13:19:55.919746271-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.9.5","title":"Tests: git branch+commit","description":"M8: Branch/commit behavior tests.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:52.921612495-08:00","updated_at":"2025-12-18T11:04:24.283191715-08:00","labels":["milestone:M8","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.9.5","depends_on_id":"wf-ba2.9","type":"parent-child","created_at":"2025-12-17T13:19:52.923714452-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9.5","depends_on_id":"wf-ba2.6.1","type":"blocks","created_at":"2025-12-17T13:19:55.991281086-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9.5","depends_on_id":"wf-ba2.6.2","type":"blocks","created_at":"2025-12-17T13:19:56.066559538-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.9.6","title":"Tests: gh PR failure modes","description":"M8: Auth missing, no remote, etc.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-17T13:19:53.015235848-08:00","updated_at":"2025-12-18T11:04:24.331239738-08:00","labels":["milestone:M8","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.9.6","depends_on_id":"wf-ba2.9","type":"parent-child","created_at":"2025-12-17T13:19:53.016881754-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9.6","depends_on_id":"wf-ba2.6.4","type":"blocks","created_at":"2025-12-17T13:19:56.13541498-08:00","created_by":"daemon"}]}
{"id":"wf-ba2.9.7","title":"Tests: audit redaction/truncation + metadata","description":"M8: Audit log behavior tests.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T13:19:53.094757743-08:00","updated_at":"2025-12-18T11:04:24.281719585-08:00","labels":["milestone:M8","prd-agent"],"dependencies":[{"issue_id":"wf-ba2.9.7","depends_on_id":"wf-ba2.9","type":"parent-child","created_at":"2025-12-17T13:19:53.096176544-08:00","created_by":"daemon"},{"issue_id":"wf-ba2.9.7","depends_on_id":"wf-ba2.8.4","type":"blocks","created_at":"2025-12-17T13:19:56.205968613-08:00","created_by":"daemon"}]}
{"id":"wf-bpa","title":"Add tmux startup script for multi-agent workflow","description":"Create a shell script that starts tmux and opens panes for each workflow agent described in docs/Workflow.md (PM, design, build, docs, review) plus a user shell pane.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T14:37:26.170929409-08:00","updated_at":"2025-12-19T14:55:04.539060742-08:00","closed_at":"2025-12-19T14:55:04.539060742-08:00"}
{"id":"wf-bxn","title":"Docs: Resolve TBDs in docs/dev/TUI_PRD.md","description":"Clarify observability, OpenCode integration details, and any TBD placeholders in docs/dev/TUI_PRD.md.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:44:34.185590955-08:00","updated_at":"2025-12-19T22:11:35.495196974-08:00","dependencies":[{"issue_id":"wf-bxn","depends_on_id":"wf-s5d","type":"parent-child","created_at":"2025-12-19T22:11:34.342791333-08:00","created_by":"daemon"}]}
{"id":"wf-c8j","title":"Docs: ensure GitHub links point to SorraTheOrc forks","description":"Audit docs in this change for GitHub links; ensure all references use SorraTheOrc forks (not upstream orgs).","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-20T15:15:19.019713684-08:00","updated_at":"2025-12-20T15:15:25.059980078-08:00","closed_at":"2025-12-20T15:15:25.059980078-08:00","dependencies":[{"issue_id":"wf-c8j","depends_on_id":"wf-s5d","type":"discovered-from","created_at":"2025-12-20T15:15:19.02481849-08:00","created_by":"daemon"}]}
{"id":"wf-ca1","title":"Beads evaluation tasks: Intake brief","description":"- Problem\n  - This repo (WAFI) needed an initial evaluation of using Beads (`bd` + optional `bv`) as the single source of truth for issue tracking, and guidance for agents so planning doesn't drift into TODO lists or external trackers.\n  - The immediate problem was that workflow/PRD documents referenced a Beads evaluation workstream (wf-ca1), but the issue itself had no description, making the reference confusing and leaving wf-ba2 shown as blocked.\n\n- Users\n  - Primary: a single PM working inside the git repo using the WAFI CLI + OpenCode.\n  - Secondary: coding/doc agents operating via the same repo-first workflow; future TUI users.\n\n- Success criteria\n  - wf-ca1 clearly explains what it tracked and what artifacts resulted.\n  - References in docs point to concrete repo artifacts (PRDs/workflow guidance) and/or successor issues.\n  - Closing wf-ca1 should not leave wf-ba2 blocked by an undefined item.\n\n- Constraints\n  - Beads (`bd`) remains canonical for all issue tracking.\n  - Workflow artifacts live in-repo (primarily `docs/`); no duplicate task lists.\n  - Keep the change minimal: document and close the missing issue rather than inventing new scope.\n\n- Existing state (if applicable)\n  - `wf-ca1` existed as an open epic, with an empty description.\n  - Most historical wf-ca1.* evaluation subtasks were tombstoned during a cleanup.\n  - The learnings/requirements are already captured in repo docs (see below).\n\n- Desired change (if applicable)\n  - Document wf-ca1 as the intake/evaluation brief that led to:\n    - Beads-first workflow guidance in `AGENTS.md`.\n    - Product requirements referencing Beads usage in `docs/dev/CLI_PRD.md` and `docs/Workflow.md`.\n  - Close wf-ca1 as completed to avoid being an unexplained blocker.\n\n- Likely duplicates / related docs (file paths)\n  - `docs/dev/CLI_PRD.md`\n  - `docs/Workflow.md`\n  - `docs/dev/TUI_PRD.md`\n  - `AGENTS.md`\n  - `.github/copilot-instructions.md`\n\n- Related issues (Beads ids)\n  - `wf-dt1` (Evaluate beads for issue tracking) (closed)\n  - `wf-ba2` (PM Agent MVP) (in_progress; originally blocked by wf-ca1)\n  - `wf-t31` (Add template usage guidance to bd onboard output) (open)\n\n- Clarifying questions\n  1. Should wf-ba2 keep an explicit dependency edge to wf-ca1 now that wf-ca1 is closed, or should the dependency be removed for clarity?\n  2. Do we want a dedicated issue (or epic) for ongoing Beads workflow evolution, separate from the initial evaluation?\n  3. Should the doc cross-references continue pointing at wf-ca1, or be updated to reference wf-dt1 (or another successor) instead?\n\n- Proposed next step:\n  - UPDATE PRD at: `docs/dev/CLI_PRD.md` (only if we want to change cross-references away from wf-ca1)\n  - Recommended next command: `/prd docs/dev/CLI_PRD.md wf-ca1`\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-18T13:12:40.598302523-08:00","updated_at":"2025-12-19T11:21:19.802456129-08:00","closed_at":"2025-12-19T11:21:19.802456129-08:00","labels":["Chore"]}
{"id":"wf-ca1.11","title":"Evaluate issue creation and templates","description":"Test bd create command, issue types (bug/feature/task/epic/chore), priorities, and template support\n\n## Recommended Learning Path\n\n1. **Basic Issue Creation**\n   - Run: `bd create \"My first issue\" --json`\n   - Run: `bd create \"Test issue\" -t bug -p 1 --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/quickstart.md\n\n2. **Issue Types**\n   - Test each type: bug, feature, task, epic, chore\n   - Run: `bd create \"Bug example\" -t bug --json`\n   - Run: `bd create \"Feature example\" -t feature --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/issue-types.md\n\n3. **Priorities**\n   - Test priorities 0-4 (critical to backlog)\n   - Run: `bd create \"Critical bug\" -t bug -p 0 --json`\n   - Run: `bd create \"Nice to have\" -t feature -p 3 --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/priorities.md\n\n4. **Templates**\n   - Run: `bd template list --json`\n   - Run: `bd template create bug-report --json`\n   - Run: `bd create --from-template bug-report --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/templates.md\n\n5. **Batch Creation**\n   - Create issues from markdown file\n   - Run: `bd create --from-file issues.md --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/batch-operations.md\n\n6. **Advanced Options**\n   - Test --assignee, --labels, --parent flags\n   - Run: `bd create --help` to see all available options\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/cli-reference.md#create","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-15T15:49:18.497976711-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","dependencies":[{"issue_id":"wf-ca1.11","depends_on_id":"wf-dt1","type":"parent-child","created_at":"2025-12-16T16:31:04.976194571-08:00","created_by":"rogardle"}],"deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-ca1.12","title":"Evaluate dependency management","description":"Test dependency tracking (blocks/blocked-by/discovered-from), bd dep command, and dependency visualization\n\n## Recommended Learning Path\n\n1. **Basic Dependencies**\n   - Create issues with dependencies\n   - Run: `bd create \"Task A\" --json`\n   - Run: `bd create \"Task B\" --deps blocks:beads-testing-ca1.12 --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/dependencies.md\n\n2. **Dependency Types**\n   - Test blocks, blocked-by, discovered-from relationships\n   - Run: `bd dep add beads-testing-ca1.12 blocks beads-testing-ca1.13 --json`\n   - Run: `bd dep add beads-testing-ca1.12 discovered-from beads-testing-ca1.11 --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/dependency-types.md\n\n3. **Managing Dependencies**\n   - Run: `bd dep list beads-testing-ca1.12 --json`\n   - Run: `bd dep remove beads-testing-ca1.12 blocks beads-testing-ca1.13 --json`\n   - Run: `bd show beads-testing-ca1.12 --json` (includes dependencies)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/cli-reference.md#dep\n\n4. **Blocking Analysis**\n   - Run: `bd blocked --json` (show all blocked issues)\n   - Run: `bd ready --json` (show unblocked issues)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/workflow.md#blocking\n\n5. **Dependency Validation**\n   - Run: `bd repair-deps --json` (find orphaned dependencies)\n   - Run: `bd validate --json` (comprehensive health check)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/maintenance.md\n\n6. **Discovered-From Pattern**\n   - Use when finding new work while working on an issue\n   - Run: `bd create \"Found bug\" -p 1 --deps discovered-from:beads-testing-ca1.12 --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/ai-workflows.md#discovered-work","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-15T15:49:23.684771562-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","dependencies":[{"issue_id":"wf-ca1.12","depends_on_id":"wf-dt1","type":"parent-child","created_at":"2025-12-16T16:31:18.494225244-08:00","created_by":"rogardle"}],"deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-ca1.13","title":"Evaluate workflow commands","description":"Test bd ready, bd blocked, bd stale, and issue status transitions (open/in_progress/done/closed)\n\n## Recommended Learning Path\n\n1. **Status Transitions**\n   - Run: `bd update beads-testing-ca1.13 --status in_progress --json`\n   - Run: `bd update beads-testing-ca1.13 --status done --json`\n   - Run: `bd reopen beads-testing-ca1.13 --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/status-workflow.md\n\n2. **Finding Ready Work**\n   - Run: `bd ready --json` (unblocked, open or in-progress)\n   - Run: `bd ready --status open --json` (only open issues)\n   - Run: `bd ready --priority 1 --json` (high priority only)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/workflow.md#ready-work\n\n3. **Blocked Issues**\n   - Run: `bd blocked --json` (all blocked issues)\n   - Run: `bd blocked --show-deps --json` (with blocking dependencies)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/workflow.md#blocked-issues\n\n4. **Stale Issues**\n   - Run: `bd stale --json` (default: 90+ days)\n   - Run: `bd stale --days 30 --json` (custom threshold)\n   - Run: `bd stale --status in_progress --json` (stale WIP)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/maintenance.md#stale-detection\n\n5. **Closing Issues**\n   - Run: `bd close beads-testing-ca1.13 --reason \"Completed\" --json`\n   - Run: `bd close beads-testing-ca1.13 --reason \"Won't fix\" --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/cli-reference.md#close\n\n6. **Workflow Integration**\n   - Run: `bd prime --json` (AI workflow context)\n   - Test full workflow: ready ‚Üí claim ‚Üí work ‚Üí complete\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/ai-workflows.md","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-15T15:49:28.863913806-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","dependencies":[{"issue_id":"wf-ca1.13","depends_on_id":"wf-dt1","type":"parent-child","created_at":"2025-12-16T16:34:00.674158206-08:00","created_by":"rogardle"}],"deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-ca1.14","title":"Evaluate git integration and sync","description":"Test bd sync, git hooks, JSONL export/import, auto-flush, and branch-aware tracking\n\n## Recommended Learning Path\n\n1. **Git Hooks Setup**\n   - Run: `bd hooks install --json` (installs pre-commit/post-merge hooks)\n   - Run: `bd hooks status --json` (check hook status)\n   - Run: `bd hooks uninstall --json` (remove hooks)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/git-integration.md#hooks\n\n2. **Manual Export/Import**\n   - Run: `bd export --json` (export to .beads/issues.jsonl)\n   - Run: `bd import --json` (import from JSONL)\n   - Check: `cat .beads/issues.jsonl | head -5`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/jsonl-format.md\n\n3. **Auto-Flush Behavior**\n   - Create/update issues and observe 5s debounce\n   - Run: `bd info --json` (check flush status)\n   - Test: `bd create \"Test\" --no-auto-flush --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/auto-sync.md\n\n4. **Sync with Remote**\n   - Run: `bd config set sync.branch beads-sync --json`\n   - Run: `bd sync --json` (commit and push to sync branch)\n   - Run: `bd migrate-sync --json` (migrate to sync workflow)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/sync.md\n\n5. **Branch-Aware Tracking**\n   - Create branch: `git checkout -b feature-branch`\n   - Create issues on branch\n   - Test merge behavior with JSONL conflicts\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/branching.md\n\n6. **Merge Resolution**\n   - Run: `bd merge --json` (JSONL merge driver)\n   - Run: `bd clean --json` (clean merge artifacts)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/merge-conflicts.md","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-15T15:49:34.30923294-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","dependencies":[{"issue_id":"wf-ca1.14","depends_on_id":"wf-dt1","type":"parent-child","created_at":"2025-12-16T16:34:10.953713076-08:00","created_by":"rogardle"}],"deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-ca1.15","title":"Evaluate search and filtering","description":"Test bd list, bd search, bd show, filtering by status/priority/type/labels, and count/stats commands\n\n## Recommended Learning Path\n\n1. **Basic Listing**\n   - Run: `bd list --json` (all issues)\n   - Run: `bd list --status open --json`\n   - Run: `bd list --priority 1 --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/cli-reference.md#list\n\n2. **Advanced Filtering**\n   - Run: `bd list --status open --priority 1 --type bug --json`\n   - Run: `bd list --assignee @me --json`\n   - Run: `bd list --labels urgent,security --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/filtering.md\n\n3. **Text Search**\n   - Run: `bd search \"authentication\" --json`\n   - Run: `bd search \"bug\" --type bug --json`\n   - Run: `bd search \"security\" --priority 0 --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/search.md\n\n4. **Issue Details**\n   - Run: `bd show beads-testing-ca1.15 --json`\n   - Run: `bd show beads-testing-ca1.15 --with-comments --json`\n   - Run: `bd show beads-testing-ca1.15 --with-history --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/cli-reference.md#show\n\n5. **Counting and Statistics**\n   - Run: `bd count --json` (count all issues)\n   - Run: `bd count --status open --type bug --json`\n   - Run: `bd stats --json` (comprehensive statistics)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/analytics.md\n\n6. **Output Formatting**\n   - Compare: `bd list` vs `bd list --json`\n   - Test: `bd list --quiet --json`\n   - Try: `bd list --format table` (if available)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/output-formats.md","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-15T15:49:39.59544169-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","dependencies":[{"issue_id":"wf-ca1.15","depends_on_id":"wf-dt1","type":"parent-child","created_at":"2025-12-16T16:34:21.235977331-08:00","created_by":"rogardle"}],"deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-ca1.16","title":"Evaluate epic and hierarchical issues","description":"Test bd epic command, parent-child relationships, subtask creation with --parent flag, and hierarchical IDs\n\n## Recommended Learning Path\n\n1. **Creating Epics**\n   - Run: `bd create \"Major feature\" -t epic --json`\n   - Run: `bd epic create \"Large project\" --json`\n   - Observe epic-specific features and workflow\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/epics.md\n\n2. **Adding Subtasks**\n   - Run: `bd create \"Subtask 1\" --parent \u003cepic-id\u003e --json`\n   - Run: `bd create \"Subtask 2\" --parent \u003cepic-id\u003e --json`\n   - Note hierarchical IDs: epic-id.1, epic-id.2\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/hierarchical-issues.md\n\n3. **Nested Hierarchies**\n   - Create subtask of a subtask\n   - Run: `bd create \"Sub-subtask\" --parent \u003csubtask-id\u003e --json`\n   - Test multi-level IDs: epic-id.1.1\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/hierarchical-issues.md#nesting\n\n4. **Epic Management**\n   - Run: `bd epic list --json` (all epics)\n   - Run: `bd epic show \u003cepic-id\u003e --json` (with children)\n   - Run: `bd show \u003cepic-id\u003e --with-children --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/cli-reference.md#epic\n\n5. **Epic Progress Tracking**\n   - Run: `bd epic progress \u003cepic-id\u003e --json`\n   - Close subtasks and observe epic progress\n   - Test auto-completion when all subtasks done\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/epics.md#progress\n\n6. **Hierarchical Filtering**\n   - Run: `bd list --parent \u003cepic-id\u003e --json` (all children)\n   - Run: `bd list --type epic --json` (all epics)\n   - Test filtering by hierarchy level\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/filtering.md#hierarchy","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-15T15:49:44.846779881-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","dependencies":[{"issue_id":"wf-ca1.16","depends_on_id":"wf-dt1","type":"parent-child","created_at":"2025-12-16T16:34:31.504249772-08:00","created_by":"rogardle"}],"deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-ca1.17","title":"Evaluate comments and labels","description":"Test bd comment/comments commands and bd label management for organizing issues\n\n## Recommended Learning Path\n\n1. **Adding Comments**\n   - Run: `bd comment beads-testing-ca1.17 \"First comment\" --json`\n   - Run: `bd comments add beads-testing-ca1.17 \"Second comment\" --json`\n   - Test multi-line comments with quotes\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/comments.md\n\n2. **Viewing Comments**\n   - Run: `bd comments list beads-testing-ca1.17 --json`\n   - Run: `bd show beads-testing-ca1.17 --with-comments --json`\n   - Check comment metadata (author, timestamp)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/cli-reference.md#comments\n\n3. **Managing Comments**\n   - Run: `bd comments delete beads-testing-ca1.17 \u003ccomment-id\u003e --json`\n   - Run: `bd comments edit \u003ccomment-id\u003e \"Updated text\" --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/comments.md#management\n\n4. **Adding Labels**\n   - Run: `bd label add beads-testing-ca1.17 urgent --json`\n   - Run: `bd label add beads-testing-ca1.17 documentation testing --json`\n   - Create custom labels for organization\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/labels.md\n\n5. **Label Management**\n   - Run: `bd label list --json` (all labels in use)\n   - Run: `bd label remove beads-testing-ca1.17 urgent --json`\n   - Run: `bd list --labels urgent --json` (filter by label)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/labels.md#management\n\n6. **Organizing with Labels**\n   - Create label taxonomy (e.g., team:frontend, priority:urgent)\n   - Run: `bd list --labels team:frontend --json`\n   - Combine with other filters\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/labels.md#best-practices","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-15T15:49:50.026537472-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","dependencies":[{"issue_id":"wf-ca1.17","depends_on_id":"wf-dt1","type":"parent-child","created_at":"2025-12-16T16:34:41.766646883-08:00","created_by":"rogardle"}],"comments":[{"id":13,"issue_id":"wf-ca1.17","author":"rogardle","text":"This task is interesting","created_at":"2025-12-24T00:43:53Z"}],"deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-ca1.18","title":"Evaluate daemon and performance","description":"Test bd daemon for background operations, RPC communication, and performance with large issue counts\n\n## Recommended Learning Path\n\n1. **Daemon Basics**\n   - Run: `bd daemon status --json` (check if running)\n   - Run: `bd daemon start --json` (start daemon)\n   - Run: `bd daemon stop --json` (stop daemon)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/daemon.md\n\n2. **Daemon Configuration**\n   - Run: `bd info --json` (shows daemon connection info)\n   - Test: `bd create \"Test\" --no-daemon --json` (bypass daemon)\n   - Check: `bd config get auto-start-daemon --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/daemon.md#configuration\n\n3. **Multiple Daemons**\n   - Run: `bd daemons list --json` (all running daemons)\n   - Test multiple project daemons\n   - Run: `bd daemons stop-all --json`\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/daemon.md#multiple-daemons\n\n4. **RPC Communication**\n   - Monitor daemon logs during operations\n   - Test concurrent operations from multiple terminals\n   - Verify background auto-flush\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/daemon.md#rpc\n\n5. **Performance Testing**\n   - Create 100+ issues: `for i in {1..100}; do bd create \"Test $i\" --json; done`\n   - Run: `bd stats --json` (performance with scale)\n   - Test: `bd list --json` (query performance)\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/performance.md\n\n6. **Troubleshooting**\n   - Run: `bd doctor --json` (health check)\n   - Run: `bd validate --json` (database validation)\n   - Check daemon logs for errors\n   - Documentation: https://github.com/steveyegge/beads/blob/main/docs/troubleshooting.md","status":"tombstone","priority":3,"issue_type":"task","created_at":"2025-12-15T15:49:55.263772097-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","dependencies":[{"issue_id":"wf-ca1.18","depends_on_id":"wf-dt1","type":"parent-child","created_at":"2025-12-16T16:34:52.055846734-08:00","created_by":"rogardle"}],"deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-ca1.2","title":"Evaluate perles (beads UI)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-15T15:38:52.254683574-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","dependencies":[{"issue_id":"wf-ca1.2","depends_on_id":"wf-dt1","type":"parent-child","created_at":"2025-12-16T16:35:02.329948432-08:00","created_by":"rogardle"}],"deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-cof","title":"Make waif startWork run agents in foreground (no-daemon)","description":"What\\n- Implement Alternative A: ensure the  command (and any agent launcher invoked by it) runs the agent runtime in the foreground when started inside a tmux pane, avoiding immediate daemonization/forking. This guarantees the long-lived process in the pane keeps the canonical agent environment (BD_ACTOR/WAIF_AGENT/OPENCODE_AGENT) on its PID so probes (ooda) can reliably detect agent identity via /proc.\u003cnewline\u003e\u003cnewline\u003eWhy\\n- Problem: if the agent process daemonizes (forks), the PID visible to tmux may be a short-lived wrapper or shell; the actual agent process may have a different PID or environment, breaking /proc-based detection.\\n- Solution: add a no-daemon/foreground mode to startWork (honor BEADS_NO_DAEMON env or add --no-daemon flag) so the agent process remains the foreground process of the pane.\\n\\nScope (what this issue is NOT)\\n- Not changing production service behavior except when explicitly requested by pane startup scripts or interactive invocation. This is targeted at interactive tmux panes and dev/test runs.\\n\\nDeliverables\\n1) Code: Modify src/commands/startWork.ts to:\\n   - Honor an environment variable (BEADS_NO_DAEMON=1) or accept a flag (e.g., --no-daemon) to run the agent process in foreground (do not fork/daemonize).\\n   - Document behavior in command help and code comments.\\n2) Tests: Unit tests and/or integration tests that validate startWork launches an interactive shell process with environment vars set (mock spawn behavior). Add tests to tests/ to cover both normal and no-daemon behavior.\\n3) Docs: Update docs/Workflow.md (or add small doc) describing the no-daemon convention and when to use it.\\n4) Validation: Manual end-to-end test instructions and checklist (run scripts/start-workflow-tmux.sh then waif ooda --once and confirm mapping).\\n5) Beads cross-links: Link wf-cvz.1 and wf-vaq as related items.\\n\\nImplementation steps (suggested)\\n1) Design RFC (quick note in issue): choose runtime mechanism (env var vs flag). Recommend supporting BEADS_NO_DAEMON env var for minimal changes to startup scripts.\\n2) Code change: in src/commands/startWork.ts, when BEADS_NO_DAEMON=1 or --no-daemon passed, avoid any behavior that would background or exec a separate daemon process; ensure spawnSync/spawn usage preserves foreground process semantics. If the underlying agent runtime has a built-in daemon mode, pass a flag to disable it.\\n3) Tests: Add unit tests mocking child_process spawn/spawnSync to ensure the environment and command-line used when BEADS_NO_DAEMON=1 results in foreground process invocation and that the PID in the pane can be inspected.\\n4) Docs \u0026 startup: ensure scripts/start-workflow-tmux.sh sets BEADS_NO_DAEMON=1 when launching panes (already done in recent change) and document the expected behavior.\\n5) Validation: run start-workflow-tmux.sh on a Linux host and check inside a pane: patch and run Agent     | Status | Title                                                                                              \n----------+--------+----------------------------------------------------------------------------------------------------\nmuse      | Free   | Muse (Design)                                                                                      \nmap       | Free   | Map (PM)                                                                                           \nmuse      | Free   | Muse (Design)                                                                                      \npatch     | Free   | Patch (Impl)                                                                                       \nscribbler | Free   | Scribbler (Docs)                                                                                   \npixel     | Free   | Pixel (Art)                                                                                        \nprobe     | Free   | Probe (QA)                                                                                         \nship      | Free   | Ship (DevOps)                                                                                       to verify mapping.\\n6) Rollout: merge change behind a short migration note; this behavior only impacts interactive panes and should be safe for CI or server usage where daemonization may still be desired unless BEADS_NO_DAEMON is set.\\n\\nSuccess criteria\\n- When BEADS_NO_DAEMON=1 (or --no-daemon used),  runs as the foreground process (no immediate background daemonizing) and the PID of the pane process corresponds to the agent process that inherits BD_ACTOR/WAIF_AGENT.\\n- ooda probe maps panes to canonical agent names reliably in manual end-to-end tests.\\n- Tests added and passing locally (npm run build \u0026\u0026 npm test).\\n\\nOwner suggestion and schedule\\n- Owner: patch (implementation), map (PM) to coordinate and review docs.\\n- ETA: small change ‚Äî 1-2 days for implementation, tests and PR review.\\n\\nRisks \u0026 mitigations\\n- Risk: Some use-cases expect daemonization (e.g., running agents under supervisor/daemon). Mitigation: this change is opt-in via env var or CLI flag ‚Äî default behavior unchanged.\\n- Risk: Interactive shells or third-party tools may still background themselves. Mitigation: document the limitation; prefer process env detection as primary signal and maintain fallbacks.\\n\\nFollow-ups\\n- After merge, update scripts/start-workflow-tmux.sh and any pane spawners to set BEADS_NO_DAEMON for interactive panes (already changed in branch).\\n- Monitor any user reports about changed behavior and provide a rollback path (remove BEADS_NO_DAEMON export in startup scripts).\\n","notes":"Follow-up: implement no-daemon/foreground mode for waif startWork per plan. Created as follow-up to wf-cvz.1 spike; PR 58 merged with tmux exports. Next step: implement code and tests in src/commands/startWork.ts to honor BEADS_NO_DAEMON or --no-daemon. Owner: patch.","status":"open","priority":1,"issue_type":"task","assignee":"patch","created_at":"2025-12-23T20:47:39.845068725-08:00","updated_at":"2025-12-23T21:27:39.030160924-08:00","dependencies":[{"issue_id":"wf-cof","depends_on_id":"wf-cvz.1","type":"discovered-from","created_at":"2025-12-23T20:47:39.854039606-08:00","created_by":"daemon"}]}
{"id":"wf-cr4","title":"Docs: Add release checklist and publish steps","description":"Problem: Release owners need a concise, actionable checklist to perform reliable releases for this Node.js CLI project.\\n\\nUsers: Release agent (human or automated release agent) who performs or supervises releases.\\n\\nSuccess criteria:\\n- A single, easy-to-follow checklist in  that a release owner can follow to: bump version, run local quality gates, open PR, tag, publish artifact, and perform post-release verification.\\n- Checklist contains concrete commands that can be executed locally and automated in CI.\\n- Checklist documents publish options (npm vs GitHub Releases) and recommended CI enforcement checks.\\n\\nConstraints:\\n- Follow best practices for Node applications and existing project conventions (use  version as source of truth, use annotated tags like ).\\n- Do not change release tooling in this task (only documentation).\\n\\nExisting state:  contains an initial proposed release process but lacks a concise checklist and explicit publish commands.\\n\\nDesired change: Add a new \"Release Checklist\" section to  with step-by-step commands and CI guidance.\\n\\nRelated docs/issues:  (existing), epic  (Document Review).\\n\\nClarifying questions:\\n1) Should we recommend  for releases (default) or leave publish steps generic?\\n2) Do you want an example GitHub Actions workflow snippet included in this task or left for a follow-up?\\n\\nProposed next step: Update  to include the Release Checklist and small examples for  and Manage releases\n\nUSAGE\n  gh release \u003ccommand\u003e [flags]\n\nGENERAL COMMANDS\n  create:      Create a new release\n  list:        List releases in a repository\n\nTARGETED COMMANDS\n  delete:      Delete a release\n  delete-asset: Delete an asset from a release\n  download:    Download release assets\n  edit:        Edit a release\n  upload:      Upload assets to a release\n  view:        View information about a release\n\nFLAGS\n  -R, --repo [HOST/]OWNER/REPO   Select another repository using the [HOST/]OWNER/REPO format\n\nINHERITED FLAGS\n  --help   Show help for command\n\nLEARN MORE\n  Use `gh \u003ccommand\u003e \u003csubcommand\u003e --help` for more information about a command.\n  Read the manual at https://cli.github.com/manual commands. Then open a PR from .","notes":"PR: https://github.com/SorraTheOrc/waif/pull/11","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-19T21:44:21.510822947-08:00","updated_at":"2025-12-19T23:10:08.227179711-08:00","closed_at":"2025-12-19T23:10:08.227179711-08:00","dependencies":[{"issue_id":"wf-cr4","depends_on_id":"wf-s5d","type":"parent-child","created_at":"2025-12-19T22:11:34.041188141-08:00","created_by":"daemon"}]}
{"id":"wf-cvz","title":"ooda command that will monitor the state of the project and agents within it and periodicaly issue instructions: Intake brief","description":"\n\nMap session log (2025-12-23):\n- Actions executed:\n  - bd ready --json  # inspected ready queue\n  - bd update wf-cvz --status in_progress --json  # claimed this item for a tech spike\n  - bd show wf-cvz --json  # re-read issue state\n  - read: src/lib/bd.ts  # checked bd helper used for PRD linking fallback\n\n- Files/paths referenced during triage:\n  - docs/Workflow.md\n  - docs/dev/TUI_PRD.md\n  - docs/dev/CLI_PRD.md\n  - docs/dev/idle_scheduler_module.md\n  - .beads/issues.jsonl\n  - src/lib/bd.ts\n\n- Recommended immediate next steps (owner: ship):\n  1) Spike: probe local tmux to collect real pane data (run on a developer workstation, not on CI):\n     - Command to run interactively:\n       tmux list-panes -a -F '%#{session_name}:%#{window_index}.%#{pane_index} %#{pane_title} #{pane_pid}'\n     - For each pane PID, sample process state and CPU briefly:\n       ps -p \u003cpid\u003e -o pid,comm,stat,etimes,%cpu\n     - Save raw output to history/ooda_probe_1766538243.txt\n  2) Propose Busy/Free heuristics in a short note (history/ooda_heuristics.md):\n     - Primary: pane title keywords (busy, in_progress, running, agent-name) and presence of an active agent bd id\n     - Secondary: PID exists and %CPU\u003e0 or process state not 'S' (sleeping) within a 2s sample window\n     - Fallback: mark 'Free' if pane title contains 'idle' or is empty\n  3) Polling strategy:\n     - Default poll interval: 5s, with lightweight jitter + exponential backoff when no state changes for N cycles (N=12 -\u003e backoff to 60s)\n  4) Deliverables for spike (owner 'ship'):\n     - history/ooda_probe_\u003cts\u003e.txt (raw probe)\n     - history/ooda_heuristics.md (decision record)\n     - proof-of-concept script at scripts/ooda_probe.sh (small, non-invasive, read-only) with usage notes\n     - PRD draft: history/ooda_command_PRD.md capturing proposed lifecycle, UX (start/stop), and success criteria\n     - Post a brief bd comment on wf-cvz summarizing outcomes and link files\n\n- Success criteria for this iteration (spike complete):\n  - A working probe script prints a width-aware table: agent | Busy/Free | Title\n  - Probe artifacts saved to history/ and linked from bd notes\n  - Heuristics doc lists at least 2 reliable signals and a recommended default poll interval\n\n- Risks and mitigations:\n  - Risk: Pane title heuristics brittle ‚Äî Mitigation: include PID/process checks as secondary signal and make heuristics configurable\n  - Risk: Running probes on production tmux may interfere ‚Äî Mitigation: run spike on a dev workstation and keep probe read-only\n  - Risk: Automated 'waif ask' directives could conflict ‚Äî Mitigation: keep first iteration read-only and defer automation policy to a later PRD\n\n- Hand-off / next owner recommendation:\n  - Owner: ship (continue spike). If ship is unavailable, Map will coordinate with Forge or a named human with terminal access.\n\nCommands executed in this session (for audit):\n- bd ready --json\n- bd update wf-cvz --status in_progress --json\n- bd show wf-cvz --json\n- read src/lib/bd.ts\n\nNo files were created or edited in this session. Planned files to be created by the spike (in history/):\n- history/ooda_probe_\u003cts\u003e.txt\n- history/ooda_heuristics.md\n- history/ooda_command_PRD.md\n- scripts/ooda_probe.sh (small shim script)\n\nMap will stand by to draft the PRD (history/ooda_command_PRD.md) once raw probe output and heuristics are posted.  ","notes":"Map: Per user request, assigned wf-cvz to 'ship' to run a technical feasibility spike and/or pilot integration. Actions performed: bd ready --json; bd update wf-cvz (initial notes); repo grep for 'ship' references. Files referenced: docs/Workflow.md, docs/dev/TUI_PRD.md, docs/dev/CLI_PRD.md, docs/dev/idle_scheduler_module.md, .beads/issues.jsonl. Outstanding risks: start/stop UX undefined; Busy/Free heuristics brittle if based only on tmux titles; automation risk when sending 'waif ask'‚Äîneed curation. Recommended next steps for ship: 1) run a quick probe to list tmux panes and their titles on a dev machine; 2) propose Busy heuristics and poll interval; 3) decide whether PRD draft should live in history/docs and hand back to Map for PRD writing. Map will stand by for follow-up. Recorded by Map.","status":"in_progress","priority":0,"issue_type":"feature","created_at":"2025-12-22T16:02:37.969539666-08:00","updated_at":"2025-12-24T13:36:58.612166658-08:00","dependencies":[{"issue_id":"wf-cvz","depends_on_id":"wf-gn7","type":"blocks","created_at":"2025-12-24T12:43:14.917518999-08:00","created_by":"daemon"}],"comments":[{"id":16,"issue_id":"wf-cvz","author":"map","text":"Linked PRD: docs/dev/prd-ooda-loop.md","created_at":"2025-12-24T01:11:37Z"},{"id":17,"issue_id":"wf-cvz","author":"map","text":"Created child issues for implementation: wf-1ne (probe spike), wf-czs (CLI), wf-367 (heuristics), wf-5w2 (logging), wf-ij4 (tests \u0026 QA). Owner set to patch.","created_at":"2025-12-24T01:13:30Z"},{"id":18,"issue_id":"wf-cvz","author":"map","text":"Assigned owners to child issues: wf-1ne -\u003e ship, wf-czs -\u003e patch, wf-367 -\u003e forge, wf-5w2 -\u003e patch, wf-ij4 -\u003e qa","created_at":"2025-12-24T01:14:46Z"},{"id":19,"issue_id":"wf-cvz","author":"map","text":"Replaced flat follow-ups with hierarchical children: wf-cvz.1 (probe), wf-cvz.2 (CLI), wf-cvz.3 (Heuristics), wf-cvz.4 (Logging), wf-cvz.5 (Tests \u0026 QA).","created_at":"2025-12-24T01:18:40Z"},{"id":20,"issue_id":"wf-cvz","author":"map","text":"Closed original flat follow-ups (wf-1ne, wf-czs, wf-367, wf-5w2, wf-ij4) in favor of hierarchical children wf-cvz.1..wf-cvz.5.","created_at":"2025-12-24T01:20:07Z"},{"id":22,"issue_id":"wf-cvz","author":"map","text":"Delegation record: Patch was sent a live prompt to implement wf-cvz.1 (npm run start -- ask patch to /implement wf-cvz.1). PR currently at https://github.com/SorraTheOrc/waif/pull/58 per wf-cvz.1 notes. Map updated wf-2ia to dedupe prior duplicate entries.","created_at":"2025-12-24T01:40:07Z"}]}
{"id":"wf-cvz.1","title":"Spike: collect tmux probe data for ooda","description":"Run non-invasive tmux probes, save raw output to history/ooda_probe_\u003cts\u003e.txt, and produce history/ooda_heuristics.md. Owner: ship.","notes":"Implemented /proc-based agent detection for ooda probe:\\n- Added getAgentFromProc to prefer BD_ACTOR/WAIF_AGENT/OPENCODE_AGENT from /proc/\u003cpid\u003e/environ and fallback to cmdline flags.\\n- listPanes now prefers process-based identity, then workflow_agents.yaml window disambiguation, then .opencode/agent_map.yaml, then raw pane/window name.\\n- Tests added: tests/ooda-mapping.test.ts.\\n- Files edited/added: src/commands/ooda.ts, tests/ooda-mapping.test.ts.\\nNext: update start-workflow-tmux to export BD_ACTOR in pane envs (recommended) and implement wf-cvz.2 CLI polish.\\nRisks: /proc is Linux-specific; probe will gracefully fall back on other platforms.\\n,--json:true","status":"closed","priority":1,"issue_type":"task","assignee":"patch","created_at":"2025-12-23T17:18:26.954095437-08:00","updated_at":"2025-12-23T20:53:15.681232809-08:00","closed_at":"2025-12-23T20:53:15.681232809-08:00","close_reason":"Spike implemented and PR merged: ooda probe, tmux env exports, docs","external_ref":"PR: https://github.com/SorraTheOrc/waif/pull/58","dependencies":[{"issue_id":"wf-cvz.1","depends_on_id":"wf-cvz","type":"parent-child","created_at":"2025-12-23T17:18:26.955082547-08:00","created_by":"daemon"}],"comments":[{"id":21,"issue_id":"wf-cvz.1","author":"patch","text":"Spike draft artifacts added:\n- scripts/ooda_probe.sh (read-only tmux probe with Busy/Free heuristics, logging, sample mode)\n- history/ooda_probe_1766540000.txt (sample run)\n- history/ooda_heuristics.md (heuristics and interval/backoff defaults)\n- history/ooda_command_PRD.md (v0 lifecycle/UX draft)\n","created_at":"2025-12-24T01:34:02Z"}]}
{"id":"wf-cvz.2","title":"Implement CLI: waif ooda start/stop and logging","description":"Implement CLI surface and flags: --interval, --log, --once. Ensure graceful failure when tmux missing. Owner: patch.","notes":"Set to in_progress per Producer request. Context: previous session aborted then landed; preserved branch created origin/feature/wf-cvz.2-ooda-cli.landed and local feature/wf-cvz.2-ooda-cli was deleted. Files referenced: src/commands/ooda.ts, .beads/issues.jsonl. PR #60 (https://github.com/SorraTheOrc/waif/pull/60) was closed. Remaining follow-ups: (1) implement fix for agent mapping/status reporting (ooda mapping), (2) add unit test(s) for mapping edge cases, (3) decide whether to continue on preserved branch or create a fresh branch. Commands executed in landing session: git reset, git pull, bd sync, git push, gh pr create/close, git branch rename/push, git branch -D. See history/ for planning notes if needed.","status":"in_progress","priority":1,"issue_type":"task","assignee":"patch","created_at":"2025-12-23T17:18:29.800589245-08:00","updated_at":"2025-12-24T13:54:51.959308062-08:00","dependencies":[{"issue_id":"wf-cvz.2","depends_on_id":"wf-cvz","type":"parent-child","created_at":"2025-12-23T17:18:29.813270648-08:00","created_by":"daemon"}],"comments":[{"id":26,"issue_id":"wf-cvz.2","author":"patch","text":"Aborting work and removing branch per Producer request; preserve branch history if needed. Files changed: src/commands/ooda.ts. PR: https://github.com/SorraTheOrc/waif/pull/60","created_at":"2025-12-24T21:51:21Z"}]}
{"id":"wf-cvz.3","title":"Heuristics: define and unit-test Busy/Free rules","description":"Codify heuristics and add unit tests with simulated tmux outputs. Owner: forge.","notes":"Map: delegated /implement wf-cvz.3 to Probe (QA) via 'waif ask'. Commands executed: 1) bd show wf-cvz.3 --json 2) WAIF_TMUX_PANES=$'waif-workflow:specialist.1\\tProbe (QA)' npx tsx src/index.ts ask probe to /implement wf-cvz.3 --json. Ask log: /home/rgardler/.waif/logs/ask.log. Files referenced: .beads/issues.jsonl, .opencode/command/implement.md, .opencode/agent/probe.md. Files created/edited: none. Next actions: Probe should claim the issue (bd update wf-cvz.3 --status in_progress --assignee probe) and post PR URL when available. Remaining risks: none immediate; confirm Probe availability and tmux session access.","status":"open","priority":1,"issue_type":"task","assignee":"forge","created_at":"2025-12-23T17:18:32.649434435-08:00","updated_at":"2025-12-23T22:39:23.468129439-08:00","dependencies":[{"issue_id":"wf-cvz.3","depends_on_id":"wf-cvz","type":"parent-child","created_at":"2025-12-23T17:18:32.677337914-08:00","created_by":"daemon"}]}
{"id":"wf-cvz.4","title":"Logging: implement history/ persisted logs and redaction policy","description":"Implement --log behavior, file naming, permissions, and a redaction policy. Owner: patch.","status":"open","priority":1,"issue_type":"task","assignee":"patch","created_at":"2025-12-23T17:18:35.153091923-08:00","updated_at":"2025-12-23T17:18:35.153091923-08:00","dependencies":[{"issue_id":"wf-cvz.4","depends_on_id":"wf-cvz","type":"parent-child","created_at":"2025-12-23T17:18:35.160657132-08:00","created_by":"daemon"}]}
{"id":"wf-cvz.5","title":"Tests \u0026 QA: integration tests and manual acceptance","description":"Add integration tests for tmux parsing, CLI flags, and logging. Include manual acceptance checklist. Owner: qa.","status":"open","priority":1,"issue_type":"task","assignee":"qa","created_at":"2025-12-23T17:18:37.837378405-08:00","updated_at":"2025-12-23T17:18:37.837378405-08:00","dependencies":[{"issue_id":"wf-cvz.5","depends_on_id":"wf-cvz","type":"parent-child","created_at":"2025-12-23T17:18:37.850699698-08:00","created_by":"daemon"}]}
{"id":"wf-czs","title":"Implement CLI: waif ooda start/stop and logging","status":"closed","priority":1,"issue_type":"task","assignee":"patch","created_at":"2025-12-23T17:13:20.577208208-08:00","updated_at":"2025-12-23T17:19:54.928643931-08:00","closed_at":"2025-12-23T17:19:54.928643931-08:00","close_reason":"Replaced by hierarchical child wf-cvz.2","dependencies":[{"issue_id":"wf-czs","depends_on_id":"wf-cvz","type":"discovered-from","created_at":"2025-12-23T17:13:20.583280287-08:00","created_by":"daemon"},{"issue_id":"wf-czs","depends_on_id":"wf-cvz","type":"blocks","created_at":"2025-12-23T17:16:34.70448272-08:00","created_by":"daemon"}]}
{"id":"wf-dr1","title":"MVP: Show in-progress beads in waif next","description":"## Feature Request\n\nIn waif next, if there are any beads with status in_progress, display them in a table before the normal next-issue recommendation output.\n\nThe table info includes: ID, Title, Priority, Blockers (count), Assignee.\n\nThe code that renders the table must live in a reusable function so other commands/features can reuse it.\n\n## Motivation\n\nSurface active work immediately to avoid starting duplicate work and to encourage finishing in-flight items.\n\n## Use Cases\n\n1. Running waif next shows what is already in progress.\n2. Users avoid starting work already owned by someone else.\n\n## Proposed Solution\n\n- Query beads for in-progress issues at the start of waif next.\n- If any exist, print an In Progress section containing a table with the required columns.\n- Then print the existing next recommendation output unchanged.\n","notes":"PR: https://github.com/SorraTheOrc/wafi/pull/5","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-19T09:21:08.550415219-08:00","updated_at":"2025-12-19T11:10:03.19560855-08:00","closed_at":"2025-12-19T11:10:03.195614377-08:00","labels":["feature"]}
{"id":"wf-dt1","title":"Evaluate beads for issue tracking","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-16T16:30:48.189041177-08:00","updated_at":"2025-12-19T10:49:47.930625491-08:00","closed_at":"2025-12-19T10:49:47.930631533-08:00","labels":["Chore"]}
{"id":"wf-dt1.4","title":"Explore beads examples repository","description":"Review and learn from the example projects in https://github.com/steveyegge/beads/tree/main/examples\n\nThis will help understand real-world beads usage patterns and best practices.\n\n## Examples to Review:\n\n1. **Basic Examples**: Simple issue creation and management workflows\n2. **Integration Examples**: How beads integrates with other tools\n3. **Workflow Examples**: Complete development workflows using beads\n4. **Advanced Patterns**: Complex dependency graphs, epic management, etc.\n\n## Goals:\n\n- Understand common usage patterns\n- Learn best practices from example code\n- Identify useful patterns to apply in our evaluation\n- Document any interesting findings or techniques","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-16T16:54:22.459728697-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","dependencies":[{"issue_id":"wf-dt1.4","depends_on_id":"wf-dt1","type":"parent-child","created_at":"2025-12-16T16:54:22.463368698-08:00","created_by":"rogardle"}],"deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-dt1.6","title":"Evaluate beads-tui","description":"Evaluate https://github.com/andynu/beads-tui for suitability with this project: install/run notes, key features, UX, and how it compares to other beads UIs.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-17T09:50:33.00029606-08:00","updated_at":"2025-12-18T13:45:05.826156917-08:00","dependencies":[{"issue_id":"wf-dt1.6","depends_on_id":"wf-dt1","type":"parent-child","created_at":"2025-12-17T09:50:33.002077698-08:00","created_by":"rogardle"}],"deleted_at":"2025-12-18T13:45:05.826156917-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-fbo","title":"Decision: Choose release publish target and CI enforcement","description":"Decide whether to publish to npm, GitHub Releases, or both, and whether to enforce version/tag correctness in CI; document outcome in docs/release_management.md.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:44:44.861514996-08:00","updated_at":"2025-12-19T22:11:35.675900992-08:00","dependencies":[{"issue_id":"wf-fbo","depends_on_id":"wf-s5d","type":"parent-child","created_at":"2025-12-19T22:11:34.532513538-08:00","created_by":"daemon"}]}
{"id":"wf-gkf","title":"Config-driven tmux workflow agents","description":"# Overview\nstart-workflow-tmux.sh currently hard-codes the agent panes (pm/design/build/docs/review/user) and inlines the PM idle_task override. We need a declarative YAML config (e.g., config/workflow_agents.yaml) listing each agent pane plus their idle scheduler behavior so tweaks don\u0019t require editing the script.\n\n# Scope / Requirements\n- New YAML config entries should include: agent name/role, optional worktree override, optional env overrides (incl. BD_ACTOR call sign), optional idle settings (task snippet + frequency/variance numbers).\n- Update start-workflow-tmux.sh to parse the YAML (python or node helper) and spawn panes in the order defined; fall back to today\u0012s defaults when the config is missing.\n- When an idle.task is defined, define idle_task() with the provided shell snippet (single command for now) and source scripts/idle-scheduler.sh using the configured frequency/variance (default 30 \u001c10 when unspecified).\n- Apply env overrides before waif startWork, so BD_ACTOR can reflect each agent\u0019s call-sign.\n- Error loudly on malformed YAML or unknown agent names.\n- Document the config format/behavior in docs/Workflow.md and docs/dev/idle_scheduler_module.md.\n\n# Non-Goals\n- Sequential idle commands (can revisit later).\n- Changing pane layout or adding GUIs.\n- Introducing new background daemons beyond the existing idle scheduler.\n\n# Open Questions\n- Preferred YAML parser (python vs node)?\n- Should we allow pointing to an alternate config path via env var?\n- How should we validate missing agent files or idle scripts?","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T16:59:36.867772945-08:00","updated_at":"2025-12-20T22:35:02.492004875-08:00","closed_at":"2025-12-20T22:35:02.492004875-08:00"}
{"id":"wf-gn7","title":"OpenCode integration","description":"Problem\nBeads currently ships a Claude integration with custom commands, skills and agent instructions. OpenCode provides similar agent features and needs a dedicated setup and integration flow so developers can install, build, and configure OpenCode and required dependencies for local development.\n\nUsers\nPrimary users: the Producer and human developers who need to set up a reproducible development environment. Agents are not expected to use this setup command directly.\n\nSuccess criteria\nAbility to run waif setup that checks out required source repositories, installs and builds required dependencies from source where specified, and configures OpenCode and supporting tools so a developer can run standard OpenCode workflows. The command must support Linux (including WSL), delegate provider configuration to OpenCode via the opencode --prompt /configure invocation, surface actionable errors on failure, and be covered by full automated and manual tests validating happy-path and failure modes.\n\nConstraints\n- Priority: P0 (epic / parent)\n- Platform: Linux only (including WSL)\n- Integration is additive; Claude integration will remain disabled for this flow\n- System and third-party packages must be enumerated in an externally-editable YAML at config/opencode_setup_packages.yaml\n- Correct the typo swetup -\u003e setup in all user-facing docs/commands\n- On failure, provide clear, actionable errors and cleanup instructions\n- Full and extensive testing required (CI integration on Linux)\n\nExisting state\n- OpenCode configuration and command templates exist under .opencode/ (notably .opencode/command/prd.md and .opencode/command/intake.md)\n- Historical design notes in history/design-opencode-agent-integration-body.txt and history/wire-waif-prd-to-prd-agent-body.txt\n- Related PRD material in docs/dev/CLI_PRD.md and docs/Workflow.md\n\nDesired change\n- Create a parent Epic (this issue) and a focused PRD at docs/dev/opencode_integration_PRD.md describing the waif setup command, package YAML, provider configuration handoff, testing plan, and decomposition into child issues (skills, commands, agent workflows, CI tests)\n- Implement waif setup to perform the flow described above and consume config/opencode_setup_packages.yaml as the source of package requirements\n\nLikely duplicates / related docs\n- docs/dev/CLI_PRD.md\n- docs/Workflow.md\n- .opencode/command/prd.md\n- .opencode/command/intake.md\n- history/design-opencode-agent-integration-body.txt\n- history/wire-waif-prd-to-prd-agent-body.txt\n\nRelated issues\n- wf-73k ‚Äî Update /prd: accept bd issue ID as interview seed (tombstone; related wiring work)\n- wf-79y ‚Äî Epic: Git workflow enforcement \u0026 automation\n\nClarifying questions\n1) Confirm filename for the package list: I will place the initial file at config/opencode_setup_packages.yaml unless you prefer another name.\n2) Which providers should waif setup pre-configure or at least seed (examples: OpenAI, local LLM runtimes, custom model registries)? The flow will delegate interactive provider config to OpenCode via opencode --prompt /configure but we should list expected provider targets.\n3) Testing: do you want CI-integrated integration tests (containers/VMs) that exercise a clean Linux environment? Any preferred CI runners or images to target?\n4) System package installation policy: should waif setup attempt to run sudo apt install where possible, or only emit a list and instructions for the user to run?\n5) Rollback/cleanup policy: on partial failure should waif setup attempt automatic rollback or only provide cleanup instructions and diagnostics?\n\nProposed next step\n- NEW PRD at: docs/dev/opencode_integration_PRD.md\n- Packages YAML path: config/opencode_setup_packages.yaml\n- Recommended next command: /prd docs/dev/opencode_integration_PRD.md \u003cnew-issue-id\u003e\n","status":"in_progress","priority":0,"issue_type":"epic","created_at":"2025-12-24T12:07:41.589893752-08:00","updated_at":"2025-12-24T13:01:56.243363562-08:00"}
{"id":"wf-gn7.1","title":"WAIF OpenCode Plugin","description":"Problem\nWAIF should provide an OpenCode plugin so WAIF can register with an OpenCode runtime, receive OpenCode events, and react programmatically. Examples: the OODA loop monitor can detect when an agent indicates work is complete; WAIF can track when an agent requests a command so the team can consider adding a permanent permission.\n\nUsers\nPrimary users: WAIF agents that consume OpenCode events (agent-side consumers such as the OODA loop monitor and other workflow agents).\nSecondary stakeholders: integrators/developers building integrations, infra/devops, docs authors, and the OpenCode community.\n\nSuccess criteria\n- An automatically-installed WAIF plugin for OpenCode that can be installed as part of .\n- Developer documentation demonstrating how to add new handlers/features to the plugin.\n- End-to-end acceptance: the OODA loop reliably detects agent busy/awaiting-user states by consuming plugin events and links to the correct Beads issue when an agent signals completion.\n\nConstraints\n- Priority: P1 (as requested).\n- No other hard timeline or compatibility constraints provided.\n- Security/permission policies deferred to a later phase.\n\nExisting state\n- OpenCode integration materials exist in docs/dev/ and .opencode/ (notably docs/dev/integrations.md, docs/Workflow.md, docs/dev/CLI_PRD.md, and .opencode/command/prd.md). The repo already contains code that integrates with OpenCode (src/lib/opencode.ts, src/commands/ask.ts) and an existing OpenCode integration epic (wf-gn7).\n\nDesired change\n- Create an installable Node/TypeScript WAIF OpenCode plugin that registers with a local OpenCode server, subscribes to a starter set of events, and emits them into WAIF's OODA/agent pipeline.\n- Wire installation into the existing  flow so the plugin is installed/registered automatically for local development.\n- Provide developer docs and examples showing how to add additional event handlers.\n- Provide acceptance tests that exercise one end-to-end event (OODA loop detection of agent busy/awaiting-user) in CI/local environment.\n\nLikely duplicates / related docs (file paths)\n- docs/Workflow.md\n- docs/dev/CLI_PRD.md\n- docs/dev/integrations.md\n- docs/dev/prd-ooda-loop.md\n- docs/dev/context_pack_PRD.md\n- .opencode/command/prd.md\n- .opencode/command/intake.md\n\nRelated issues (Beads ids)\n- wf-gn7 ‚Äî OpenCode integration (parent epic)\n- wf-ba2.3.6, wf-ba2.3, wf-ba2.3.7 ‚Äî PRD/CLI/OpenCode wiring tasks\n- wf-ba2.5.4 ‚Äî Context Pack / intake related\n- wf-73k ‚Äî Update /prd: accept bd issue ID (tombstoned; historical)\n\nClarifying questions (remaining)\n1) Initial events (confirmed): agent.session.start, agent.session.end, message.sent, command.request (starter set).\n2) Install model (confirmed): plugin installation should be part of  so local dev receives the plugin automatically.\n3) Runtime (confirmed): Node + TypeScript.\n4) Acceptance tests (confirmed): E2E test verifying OODA loop reliably detects agent busy vs awaiting-user and links to the correct Beads issue.\n5) Permissions/security: deferred to later work.\n\nProposed next step\n- NEW PRD at: docs/dev/waif_opencode_plugin_PRD.md\n- Recommended next command: /prd docs/dev/waif_opencode_plugin_PRD.md \u003cnew-issue-id\u003e\n\nNotes\n- Parent: wf-gn7 (OpenCode integration epic) as requested; if you prefer a different parent provide its beads id.\n- After the PRD file is created, run  to link the PRD into the beads issue (the workflow  command can do this for you).","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-24T12:33:59.20203533-08:00","updated_at":"2025-12-24T12:33:59.20203533-08:00","dependencies":[{"issue_id":"wf-gn7.1","depends_on_id":"wf-gn7","type":"parent-child","created_at":"2025-12-24T12:33:59.203312934-08:00","created_by":"daemon"}]}
{"id":"wf-gn7.1.1","title":"Spike: review opencode-beads and prototype context injection","description":"Summary: Review opencode-beads (https://github.com/joshuadavidthomas/opencode-beads) and prototype a WAIF OpenCode context-injection spike.\\n\\nDetails:\\n- Repo reviewed: https://github.com/joshuadavidthomas/opencode-beads (README reviewed). The project integrates Beads with OpenCode and calls out: context injection (bd prime on session start/after compaction), /bd-* command surface mirroring the bd CLI, and a beads-task-agent for autonomous issue completion.\\n- Purpose: Pull implementation ideas and patterns (context injection, command wiring, task-agent architecture) into wf-gn7.1 while evaluating safety and scope.\\n\\nSuccess criteria:\\n1) A short report in history/wf-gn7.1-spike.md describing which opencode-beads features are reusable and which require changes (privacy, security, WAIF architecture).\\n2) A small prototype demonstrating context injection (bd prime style) that can be triggered in a WAIF/OpenCode session (proof-of-concept code or runnable instructions).\\n3) List of recommended follow-up issues (command wiring, task-agent evaluation, safety review) created and linked to this spike.\\n\\nSuggested next steps:\\n1) Clone and scan opencode-beads source for context injection and command wiring patterns.\\n2) Implement a 1-2 day spike to prototype context injection; document results in history/wf-gn7.1-spike.md.\\n3) Open follow-up feature/epic issues for any substantial work discovered.\\n\\nCommands run while creating this issue:\\n- waif recent (user)\\n- fetched opencode-beads README from raw.githubusercontent.com to review contents\\n\\nFiles created/edited:\\n- None yet. The spike will write history/wf-gn7.1-spike.md if accepted.\\n\\nRisks / follow-ups:\\n- Autonomous task-agent ideas require safety review (access controls, rate limits, audit logs).\\n- Context injection must be scoped to avoid leaking sensitive issue context between agents or sessions.\\n- Assign an owner and 1-2 day timebox for the spike.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T12:41:47.488820271-08:00","updated_at":"2025-12-24T12:41:47.488820271-08:00","dependencies":[{"issue_id":"wf-gn7.1.1","depends_on_id":"wf-gn7.1","type":"parent-child","created_at":"2025-12-24T12:41:47.489821282-08:00","created_by":"daemon"}]}
{"id":"wf-gn7.2","title":"Spike: review beads Claude integration and capture patterns for WAIF OpenCode plugin","description":"Summary: Review Beads' Claude integration design (docs/CLAUDE_INTEGRATION.md) and gather concrete patterns we should reuse for the WAIF OpenCode plugin and OODA integration.\\n\\nSource reviewed:\\n- https://github.com/steveyegge/beads/blob/main/docs/CLAUDE_INTEGRATION.md (raw reviewed)\\n- Related directory: https://github.com/steveyegge/beads/tree/main/.claude-plugin\\n\\nKey ideas to capture (from the doc):\\n- Prefer CLI + Hooks approach (bd prime + SessionStart/PreCompact hooks) for context injection rather than embedding large MCP tool schemas.\\n- Keep context small: bd prime ~1‚Äì2k tokens to preserve attention \u0026 reduce cost/latency.\\n- Avoid shipping Claude Skills as a default; make Claude-specific enhancements optional and plugin-scoped.\\n- Provide a lightweight setup/install flow for hooks (bd setup claude) and health checks.\\n- MCP server remains an optional alternative for environments without shell access.\\n\\nPurpose:\\n- Identify which of these patterns are directly applicable to WAIF's OpenCode plugin and OODA loop (context injection approach, hooks, install UX, and rule-of-thumb guidance about skills vs CLI).\\n\\nSuccess criteria:\\n1) history/wf-gn7.claude-spike.md created with a short analysis: which patterns to adopt, which to avoid, and why (security/WAIF constraints noted).\\n2) A recommended PRD/implementation checklist for adding Hooks (bd-prime style) to WAIF OpenCode plugin, including installation commands and a minimal test plan.\\n3) A list of follow-up bd issues created or recommended (hook installer, CLI surface, MCP fallback, optional Claude-specific plugin) linked to this spike.\\n\\nSuggested next steps:\\n1) Clone and read beads .claude-plugin and docs/CLAUDE_INTEGRATION.md for concrete install and hook examples.\\n2) Draft history/wf-gn7.claude-spike.md capturing findings and recommendations.\\n3) Open follow-up issues (hook installer, policy review on skills, MCP fallback) as needed.\\n\\nCommands run while creating this issue:\\n- fetched raw CLAUDE_INTEGRATION.md from GitHub to review contents\\n- bd create (this issue)\\n\\nFiles created/edited:\\n- None yet. Spike will write history/wf-gn7.claude-spike.md if accepted.\\n\\nRisks / follow-ups:\\n- Claude-specific guidance may not map 1:1 to OpenCode; evaluate differences in hook lifecycle and available extension points.\\n- Avoid enabling Claude Skills by default; if we expose plugin-specific skills, they must be opt-in and have clear deprecation/migration plans.\\n- Assign an owner and 1‚Äì2 day timebox for the spike.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T12:52:19.502889552-08:00","updated_at":"2025-12-24T12:52:19.502889552-08:00","dependencies":[{"issue_id":"wf-gn7.2","depends_on_id":"wf-gn7","type":"parent-child","created_at":"2025-12-24T12:52:19.503797385-08:00","created_by":"daemon"},{"issue_id":"wf-gn7.2","depends_on_id":"wf-gn7.1","type":"blocks","created_at":"2025-12-24T12:52:19.509061594-08:00","created_by":"daemon"}]}
{"id":"wf-gn7.3","title":"Spike: review and adapt Claude skills (anthropics/skills) for WAIF OpenCode","description":"Summary: Review the Claude skills repository (https://github.com/anthropics/skills) and identify skills that can be safely adapted or reimplemented for WAIF's OpenCode plugin.\\n\\nSource to review:\\n- https://github.com/anthropics/skills\\n\\nPurpose:\\n- Catalog skills that provide useful functionality (e.g., workflow helpers, context utilities, command wiring) and map them to WAIF/OpenCode extension points.\\n- Recommend which skills to reimplement as plugin-scoped, opt-in features vs. which to avoid for security/compatibility reasons.\\n\\nSuccess criteria:\\n1) history/wf-gn7.skills-anthropics.md created with a short catalog: skill name, purpose, feasibility (easy/moderate/high), recommended action (adopt/adapt/reject), and security notes.\\n2) A minimal adaptation plan for 1-2 high-value skills (implementation approach, required APIs/hooks, and test plan).\\n3) List of follow-up bd issues recommended (e.g., implement-adapt-skill-XYZ) linked to this spike.\\n\\nSuggested steps:\\n1) Browse the anthropics/skills repo and list available skills and their README/docs.\\n2) For each candidate skill, evaluate compatibility with OpenCode hook lifecycle and WAIF security model.\\n3) Draft history/wf-gn7.skills-anthropics.md capturing findings and recommended next steps.\\n4) Create follow-up issues for any skills we plan to implement or prototype.\\n\\nCommands run while creating this issue:\\n- none beyond creating this bd task (user-requested)\\n\\nFiles created/edited:\\n- None yet. Spike will write history/wf-gn7.skills-anthropics.md if accepted.\\n\\nRisks / follow-ups:\\n- Claude-specific skill lifecycles or assumptions may not match OpenCode; evaluate carefully.\\n- Skills that automate actions must be reviewed for permission and audit implications before enabling.\\n- Assign owner and timebox (recommended 1-2 days).\\n","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T12:56:46.886862828-08:00","updated_at":"2025-12-24T12:56:46.886862828-08:00","dependencies":[{"issue_id":"wf-gn7.3","depends_on_id":"wf-gn7","type":"parent-child","created_at":"2025-12-24T12:56:46.888698426-08:00","created_by":"daemon"}]}
{"id":"wf-gn7.4","title":"Spike: review Opencode-Workflows (IgorWarzocha) for workflow management ideas","description":"Summary: Review the Opencode-Workflows repo (https://github.com/IgorWarzocha/Opencode-Workflows) and capture actionable ideas we can adapt for WAIF's workflow management tooling (scheduling, orchestration, event handling, UI/UX patterns).\\n\\nSource to review:\\n- https://github.com/IgorWarzocha/Opencode-Workflows\\n\\nPurpose:\\n- Identify useful design patterns, architectures, CLI/agent wiring, and data models that align with WAIF's OODA/agent pipeline and OpenCode plugin plans.\\n- Produce a short decision record summarizing which components or ideas are reusable, which need adaptation, and license/compatibility notes.\\n\\nSuccess criteria:\\n1) history/wf-gn7.opencode-workflows.md created with a concise analysis: notable patterns, potential components to adopt, required changes to fit WAIF architecture, and license considerations.\\n2) At least 2 concrete follow-up bd issues recommended (eg. prototype scheduler integration, event wiring adapter) linked to this spike.\\n3) A recommended implementation approach and test plan for any prototyped idea.\\n\\nSuggested steps:\\n1) Browse the repository (readme, code, examples) and identify core components (scheduler, event handlers, CLI entrypoints, config formats).\\n2) Map components to WAIF/OpenCode extension points and note incompatibilities or gaps.\\n3) Draft history/wf-gn7.opencode-workflows.md capturing findings and proposed next actions.\\n4) Open follow-up bd issues for high-value items to prototype or implement.\\n\\nCommands run while creating this issue:\\n- bd create (this issue)\\n\\nFiles created/edited:\\n- None yet. Spike will write history/wf-gn7.opencode-workflows.md if accepted.\\n\\nRisks / follow-ups:\\n- Ensure license compatibility (avoid copying code incompatible with project license).\\n- Some patterns may assume runtime or infra WAIF doesn't have; adapt rather than transplant.\\n- Assign an owner and 1‚Äì2 day timebox for the spike.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T13:03:09.293731338-08:00","updated_at":"2025-12-24T13:03:09.293731338-08:00","dependencies":[{"issue_id":"wf-gn7.4","depends_on_id":"wf-gn7","type":"parent-child","created_at":"2025-12-24T13:03:09.294910838-08:00","created_by":"daemon"}]}
{"id":"wf-gn7.5","title":"Spike: review OpenSpec (Fission-AI/OpenSpec) for spec management ideas","description":"Summary: Review the OpenSpec project (https://github.com/Fission-AI/OpenSpec) and capture ideas we can adapt for WAIF's specification and schema management tooling (validation, doc generation, CI gating, and integration with OpenCode/Beads workflows).\\n\\nSource to review:\\n- https://github.com/Fission-AI/OpenSpec\\n\\nPurpose:\\n- Identify concrete techniques and components for managing machine-readable specifications, schema validation, doc generation, and CI enforcement that can be adapted to WAIF (e.g., spec linting, schema-ified PR checks, codegen hooks).\\n- Recommend how spec artifacts should live in repo (formats, paths), how they map to our history/ and docs/ conventions, and how to integrate validation into CI and plugin install flows.\\n\\nSuccess criteria:\\n1) history/wf-gn7.openspec.md produced with a decision record: notable patterns, recommended formats (YAML/JSON/other), suggested repo layout, CI integration patterns, and license/compatibility notes.\\n2) A short checklist for implementing spec validation (tooling, CI job outline, failure UX) that can be used as a follow-up work item.\\n3) A list of follow-up bd issues (eg. add-spec-lint-ci, spec-to-plugin-adapter, spec-docgen) linked to this spike.\\n\\nSuggested steps:\\n1) Browse OpenSpec README, examples, and tooling to identify key features (schema language, validators, generators).\\n2) Map those features to WAIF use cases: OpenCode plugin manifests, OODA heuristics config, workflow definitions, and PRD artifacts.\\n3) Draft history/wf-gn7.openspec.md capturing findings and recommendations.\\n4) Propose follow-up bd issues for implementation work.\\n\\nFiles created/edited:\\n- None yet. Spike will write history/wf-gn7.openspec.md if accepted.\\n\\nRisks / follow-ups:\\n- License compatibility: verify any copied approaches/tools are compatible with WAIF's license.\\n- Avoid over-design: start with a minimal schema and evolve as needs stabilize.\\n- Assign an owner and 1‚Äì2 day timebox for the spike.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-24T13:06:24.612873318-08:00","updated_at":"2025-12-24T13:06:24.612873318-08:00","dependencies":[{"issue_id":"wf-gn7.5","depends_on_id":"wf-gn7","type":"parent-child","created_at":"2025-12-24T13:06:24.613957079-08:00","created_by":"daemon"}]}
{"id":"wf-hb1","title":"Add start-agent bootstrap script","description":"Create an executable shell script invokable as: start-agent NAME. It must: (1) export BD_ACTOR=NAME, (2) cd into ./ (clone repo there if missing), create/switch to branch _Workspace, (3) run waif init .","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T14:46:17.826208057-08:00","updated_at":"2025-12-19T14:55:04.439045643-08:00","closed_at":"2025-12-19T14:55:04.439045643-08:00","dependencies":[{"issue_id":"wf-hb1","depends_on_id":"wf-bpa","type":"discovered-from","created_at":"2025-12-19T14:46:17.827454723-08:00","created_by":"daemon"}]}
{"id":"wf-hn4","title":"Cleanup wf-10f intake brief (remove resolved clarifying questions; point Linked PRD to new PRD)","description":"wf-10f intake brief has resolved clarifying questions + still says Linked PRD: docs/dev/CLI_PRD.md. Update wf-10f description to reference docs/dev/PRD-command-in-progress.md, and prune obsolete questions/sections now that decisions are locked in the PRD. Keep a short pointer to CLI_PRD.md if needed, but treat PRD-command-in-progress as canonical.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-22T11:57:44.587133529-08:00","updated_at":"2025-12-22T12:01:07.196478532-08:00","closed_at":"2025-12-22T12:01:07.196478532-08:00","dependencies":[{"issue_id":"wf-hn4","depends_on_id":"wf-10f","type":"discovered-from","created_at":"2025-12-22T11:57:44.593190834-08:00","created_by":"daemon"}]}
{"id":"wf-hxz","title":"Convert start-agent to git worktrees","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T15:41:42.262855467-08:00","updated_at":"2025-12-19T15:43:56.076062984-08:00","closed_at":"2025-12-19T15:43:56.076062984-08:00"}
{"id":"wf-ih9","title":"Docs: Add CHANGELOG and ROADMAP files","description":"Create docs/CHANGELOG.md and docs/dev/ROADMAP.md and ensure PRDs reference them correctly.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T21:44:24.03020252-08:00","updated_at":"2025-12-21T17:49:02.343394538-08:00","closed_at":"2025-12-21T17:49:02.343403136-08:00","dependencies":[{"issue_id":"wf-ih9","depends_on_id":"wf-s5d","type":"parent-child","created_at":"2025-12-19T22:11:34.107765968-08:00","created_by":"daemon"}]}
{"id":"wf-ij4","title":"Tests \u0026 QA: integration tests and manual acceptance","status":"closed","priority":1,"issue_type":"task","assignee":"qa","created_at":"2025-12-23T17:13:27.718047258-08:00","updated_at":"2025-12-23T17:20:04.929604707-08:00","closed_at":"2025-12-23T17:20:04.929604707-08:00","close_reason":"Replaced by hierarchical child wf-cvz.5","dependencies":[{"issue_id":"wf-ij4","depends_on_id":"wf-cvz","type":"discovered-from","created_at":"2025-12-23T17:13:27.721168461-08:00","created_by":"daemon"},{"issue_id":"wf-ij4","depends_on_id":"wf-cvz","type":"blocks","created_at":"2025-12-23T17:16:41.74485183-08:00","created_by":"daemon"}]}
{"id":"wf-jvw","title":"Rename project to WAFI","description":"Update repo naming to WAFI (Workflow Alien Intelligence), including CLI/package metadata, docs, and tests. Name intentionally jumbled; nod to nautical WAIF term; but project name is WAFI.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-18T14:03:30.427511194-08:00","updated_at":"2025-12-18T14:05:12.136164689-08:00","closed_at":"2025-12-18T14:05:12.136164689-08:00","dependencies":[{"issue_id":"wf-jvw","depends_on_id":"wf-ba2","type":"blocks","created_at":"2025-12-19T00:09:24.139869225-08:00","created_by":"daemon"}]}
{"id":"wf-kgp","title":"Chore: Add history/ directory and .gitignore entry","description":"Create history/ directory for AI planning docs and add optional .gitignore instructions; document usage in AGENTS.md if needed.","status":"open","priority":3,"issue_type":"chore","created_at":"2025-12-19T21:44:36.773611594-08:00","updated_at":"2025-12-19T22:11:35.54028336-08:00","dependencies":[{"issue_id":"wf-kgp","depends_on_id":"wf-s5d","type":"parent-child","created_at":"2025-12-19T22:11:34.390645737-08:00","created_by":"daemon"}]}
{"id":"wf-ku4","title":"Add gh to allowed commands for all agents","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T02:23:03.586505752-08:00","updated_at":"2025-12-22T02:23:03.586505752-08:00","dependencies":[{"issue_id":"wf-ku4","depends_on_id":"wf-5ay","type":"parent-child","created_at":"2025-12-22T16:04:44.659440563-08:00","created_by":"daemon"}]}
{"id":"wf-ky8","title":"P0: Enable parallel team work via WAIF_session_\u003cTeam\u003e tmux sessions","description":"Allow multiple teams to run independent WAIF tmux sessions by deriving a session name from the checkout directory. When a producer clones the repo into a directory named \u003cTeam\u003e and runs scripts/start-workflow-tmux.sh it should create/attach to a tmux session named \"WAIF_session_\u003cTeam\u003e\". This enables parallel, isolated team workflows where each team uses its own tmux session and panes without colliding with other teams running on the same host.\\n\\nRationale:\\n- Teams often need an isolated set of agent panes and environment so agents do not interfere with each other.\\n- Deriving the session name from the repo directory keeps the workflow discoverable and simple for producers (clone into my-team and run the script).\\n- This approach complements the existing start-workflow-tmux.sh layout and requires a small change to session naming/selection logic and documentation.","acceptance_criteria":"1) scripts/start-workflow-tmux.sh derives default session name from the repo directory and uses the pattern 'WAIF_session_\u003cTeam\u003e' when creating or attaching to tmux. 2) Multiple sessions with different \u003cTeam\u003e names can run concurrently on the same host without interfering. 3) The script preserves existing --session override behavior (explicit --session continues to work). 4) Documentation and example usage are added to docs/Workflow.md and scripts/start-workflow-tmux.sh comments. 5) No default behavior change for existing users unless they clone into a directory named with a Team identifier or explicitly pass --session. 6) Provide a short migration note and tests/instructions to validate parallel sessions.","status":"open","priority":0,"issue_type":"feature","created_at":"2025-12-24T16:51:54.955441531-08:00","updated_at":"2025-12-24T16:51:54.955441531-08:00","comments":[{"id":29,"issue_id":"wf-ky8","author":"map","text":"Implemented session-name derivation in scripts/start-workflow-tmux.sh. Default session now uses pattern 'WAIF_session_\u003cTeam\u003e' derived from the repo directory name. Preserves --session override behavior. Files changed: scripts/start-workflow-tmux.sh (.modified). Created issue wf-ky8. Next: add docs/Workflow.md update and tests to validate concurrent sessions.","created_at":"2025-12-25T00:58:04Z"},{"id":30,"issue_id":"wf-ky8","author":"map","text":"Added docs/Workflow.md update documenting WAIF_session_\u003cTeam\u003e behavior and created child tasks: wf-ky8.1 (docs) and wf-ky8.2 (integration test). Files changed: docs/Workflow.md, scripts/start-workflow-tmux.sh. Next: implement the integration test script under tests/integration and wire a CI job if desired.","created_at":"2025-12-25T01:09:56Z"},{"id":31,"issue_id":"wf-ky8","author":"map","text":"Assigned wf-ky8.1 to scribbler for docs updates. Files to edit: docs/Workflow.md (already updated). Next: scribbler to refine migration note and add examples. Remaining tasks: wf-ky8.2 (integration test) unassigned.","created_at":"2025-12-25T01:18:08Z"}]}
{"id":"wf-ky8.1","title":"Add docs: parallel tmux sessions","description":"Add documentation and example usage for WAIF_session_\u003cTeam\u003e behavior in docs/Workflow.md and include a short migration note. Ensure examples show clone+run steps and mention --session override.","status":"open","priority":2,"issue_type":"task","assignee":"scribbler","created_at":"2025-12-24T17:09:48.653173966-08:00","updated_at":"2025-12-24T17:18:06.156117428-08:00","dependencies":[{"issue_id":"wf-ky8.1","depends_on_id":"wf-ky8","type":"parent-child","created_at":"2025-12-24T17:09:48.665318792-08:00","created_by":"daemon"}]}
{"id":"wf-ky8.2","title":"Add integration test for parallel tmux sessions","description":"Add a small integration test script and CI instruction that validates multiple WAIF_session_\u003cTeam\u003e sessions can be created concurrently on the same host. The test should create two temp clones (teamA, teamB), run the start-workflow-tmux.sh script in --session derived mode, verify both tmux sessions exist, then clean up.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-24T17:09:53.097041175-08:00","updated_at":"2025-12-24T17:25:21.088358775-08:00","closed_at":"2025-12-24T17:25:21.088358775-08:00","close_reason":"Cancelled: integration test deferred; manual validation documented in docs/Workflow.md","dependencies":[{"issue_id":"wf-ky8.2","depends_on_id":"wf-ky8","type":"parent-child","created_at":"2025-12-24T17:09:53.116764373-08:00","created_by":"daemon"}]}
{"id":"wf-l3l","title":"Release management documentation","description":"Create docs/release_management.md with an initial recommended release process. Must include a version-number management section aligned with waif --version behavior (release semver vs dev stamps).","notes":"PR: https://github.com/SorraTheOrc/wafi/pull/4 (updated with README + docs edits)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T09:39:17.386809825-08:00","updated_at":"2025-12-19T10:08:04.53468642-08:00","closed_at":"2025-12-19T10:08:04.53468642-08:00","dependencies":[{"issue_id":"wf-l3l","depends_on_id":"wf-ad1","type":"discovered-from","created_at":"2025-12-19T09:39:17.394076022-08:00","created_by":"daemon"}]}
{"id":"wf-lp0","title":"waif ask: one-shot CLI agent query","description":"Problem\n\nSometimes we just want a quick, one-shot answer from an agent without starting an interactive CLI/TUI session. We need a `waif ask` command that accepts a prompt, sends it to an agent (default `Map`/`PM`), allows optionally prefixing the prompt with an agent name (e.g. `ask patch ...`), and returns the agent's response to the console in Markdown (or `--json`) with no session tracking (one-shot MVP).\n\nUsers\n\nPrimary: producers who need fast, ad-hoc answers in the terminal (PMs/engineers writing prompts).\nSecondary: CLI users and automation that may call `waif ask` from scripts; QA and docs teams who rely on predictable one-shot outputs.\n\nSuccess criteria\n\nMVP success is that a user can run `waif ask \"\u003cprompt\u003e\"` and receive a coherent agent response rendered as Markdown to the console (or machine-readable JSON when `--json` is passed). The UX/implementation goal: ask -\u003e get response (no session), responses are stable Markdown and usable in pipelines.\n\nConstraints\n\nNo timeline or special constraints were specified. No session tracking or state persistence in MVP. Default agent is `Map` (PM); agent override via prefixing the prompt is required. No privacy/security constraints specified by requester.\n\nExisting state\n\n- The CLI contains a PRD/CLI design effort (`docs/dev/CLI_PRD.md`) and PRD-agent wiring work (`wf-ba2.3.6`, `wf-ba2.3.1`) that overlap with PRD generation and OpenCode integration. There is not a dedicated `waif ask` command implemented today.\n\nDesired change\n\nAdd a new `waif ask` CLI command that:\n- Accepts a prompt string or reads from stdin\n- Sends the prompt to a chosen agent (default `Map`/`PM`), allowing an agent name prefix to override\n- Returns the agent's response to stdout rendered as Markdown, or `--json` for machine output\n- Is one-shot only (no session persistence)\n\nLikely duplicates / related docs\n\n- `docs/dev/CLI_PRD.md`\n- `docs/Workflow.md` (intake/PRD workflow)\n- `docs/dev/TUI_PRD.md`\n- `docs/dev/implemented/find_next_PRD.md`\n\nRelated issues\n\n- `wf-ba2.3.1` - Minimal PRD generator (writes Markdown file)\n- `wf-ba2.3.6` - Wire waif prd command to PRD Agent workflow\n- `wf-ba2.3` - PRD Template \u0026 Validation (epic)\n- `wf-7m7` - Add waif command to validate implementation plan integrity (related CLI expansion)\n- `wf-soh` - Integrate marked-terminal markdown rendering for all CLI output (rendering pipeline)\n\nClarifying questions\n\n1. Confirm default agent: should `Map` (PM) be the default for `waif ask`?  \n2. Which output modes are required beyond `--json` and rendered Markdown (e.g., raw text, exit codes for partial failures)?  \n3. Should `waif ask` support reading prompts from stdin or files for scripting?  \n4. Is any prompt auditing/logging required (even minimal), or must MVP avoid writing prompts anywhere?  \n5. Are there agent name parsing rules (single token prefix vs multiple-word agent names)?\n\nProposed next step\n\nNEW PRD at: `docs/dev/waif_ask_PRD.md`\nRecommended next command: `/prd docs/dev/waif_ask_PRD.md \u003cissue-id\u003e`","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T00:51:49.358764386-08:00","updated_at":"2025-12-22T15:55:32.463150759-08:00","closed_at":"2025-12-22T14:35:39.495289441-08:00","comments":[{"id":14,"issue_id":"wf-lp0","author":"patch","text":"PR #45 merged. Implemented ask prompt parsing so that when an agent name is provided and the following word is 'to', it is removed from the prompt. Added coverage in tests/ask.test.ts. Files touched: src/commands/ask.ts, tests/ask.test.ts. Validation: npm test tests/ask.test.ts.","created_at":"2025-12-24T00:43:53Z"}]}
{"id":"wf-mj5","title":"Docs: Resolve TBDs in docs/dev/CLI_PRD.md","description":"Address all TODO/TBD sections in docs/dev/CLI_PRD.md (enforcement, constraints, mechanisms, performance expectations).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:44:31.687929564-08:00","updated_at":"2025-12-19T22:11:35.442639289-08:00","dependencies":[{"issue_id":"wf-mj5","depends_on_id":"wf-s5d","type":"parent-child","created_at":"2025-12-19T22:11:34.2927395-08:00","created_by":"daemon"}]}
{"id":"wf-oib","title":"Tweak start-agent worktree naming + ignore worktrees","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T15:49:11.949677121-08:00","updated_at":"2025-12-19T15:49:54.0059182-08:00","closed_at":"2025-12-19T15:49:54.0059182-08:00"}
{"id":"wf-q6t","title":"tmp intake brief test","status":"closed","priority":4,"issue_type":"task","created_at":"2025-12-22T10:06:34.405052364-08:00","updated_at":"2025-12-22T16:08:06.752636359-08:00","closed_at":"2025-12-22T16:04:41.39965267-08:00"}
{"id":"wf-r4r","title":"Docs: Add feature flags config and flag-audit docs","description":"Add an example config/flags.json, document the 'flag-audit' and 'check-release' behaviors, and link to docs/release_management.md.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:44:29.273427787-08:00","updated_at":"2025-12-19T22:11:35.390701161-08:00","dependencies":[{"issue_id":"wf-r4r","depends_on_id":"wf-s5d","type":"parent-child","created_at":"2025-12-19T22:11:34.240101432-08:00","created_by":"daemon"}]}
{"id":"wf-rkq","title":"Feature: waif show ‚Äî display an issue with blockers and children","description":"Summary: Add CLI command 'waif show \u003cid\u003e' that prints a beads issue using the standard table output and includes its blockers and children in separate tables for quick triage.\\n\\nImplementation notes:\\n- New command: src/commands/show.ts\\n- Use src/lib/bd.ts to fetch issue with dependencies and src/lib/table.ts to render tables.\\n- Output: main issue table, then Blockers and Children tables (id, title, priority, status, assignee).\\n- Tests: add tests/show.test.ts covering display, error case (issue not found), and formatting.\\n\\nSuccess criteria:\\n1) 'waif show \u003cid\u003e' prints the issue and its blockers/children in table format.\\n2) Unit tests and README/help updated.\\n\\nSuggested owner: forge; timebox: 1-2 days.","notes":"Merged PR #62; feature landed and smoke-tested","status":"closed","priority":2,"issue_type":"feature","assignee":"rgardler","created_at":"2025-12-24T13:07:46.300344305-08:00","updated_at":"2025-12-24T16:38:53.48482585-08:00","closed_at":"2025-12-24T16:38:53.48483384-08:00"}
{"id":"wf-s5d","title":"Epic: Document Review","description":"Track documentation review and cleanup tasks across docs.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-19T22:11:27.11510783-08:00","updated_at":"2025-12-22T16:31:06.887751219-08:00","labels":["epic"]}
{"id":"wf-sbg","title":"Config-driven tmux workflow agents","description":"## Overview\n\n[Describe the high-level goal and scope of this epic]\n\n## Success Criteria\n\n- [ ] Criteria 1\n- [ ] Criteria 2\n- [ ] Criteria 3\n\n## Background\n\n[Provide context and motivation]\n\n## Scope\n\n**In Scope:**\n- Item 1\n- Item 2\n\n**Out of Scope:**\n- Item 1\n- Item 2\n","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-20T21:28:17.573994634-08:00","updated_at":"2025-12-20T22:35:02.47853008-08:00","closed_at":"2025-12-20T22:35:02.47853008-08:00","labels":["epic"]}
{"id":"wf-soh","title":"Integrate marked-terminal markdown rendering for all CLI output","description":"## Feature Request\n\nUpdate the waid/waif CLI so that **all user-facing console output is authored as Markdown** and is rendered to styled terminal output using `marked-terminal`.\n\nThis should apply to every command in `src/commands/*` and any shared output helpers in `src/lib/*`.\n\n## Motivation\n\n- Improve legibility of CLI output (headings, lists, code blocks, links).\n- Standardize output formatting across commands by using a single rendering pipeline.\n- Enable richer UX without hand-crafted table/string formatting in each command.\n\n## Use Cases\n\n1. **User runs any command**: Output includes headings, lists, and inline code with consistent styling.\n2. **Errors and warnings**: Output is still Markdown, rendered with emphasis and code blocks where appropriate.\n3. **Machine-readable mode** (if applicable): JSON output remains raw JSON (not Markdown-rendered) and should bypass rendering.\n\n## Proposed Solution\n\n- Add `marked` + `marked-terminal` dependency.\n- Implement a single output helper (e.g. `src/lib/consoleMarkdown.ts`) that takes Markdown and prints rendered output.\n- Refactor commands to produce Markdown strings instead of direct `console.log`/table output.\n- Maintain a clear bypass for JSON mode (where the CLI already supports it).\n\n## Alternatives Considered\n\n- Keep current ad-hoc formatting: continues inconsistent UX and repeated formatting logic.\n- Use `chalk`-only styling: less expressive than Markdown and harder to maintain.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-19T15:36:29.728802415-08:00","updated_at":"2025-12-19T15:36:55.569965075-08:00","labels":["cli","markdown","ux"]}
{"id":"wf-t31","title":"Add template usage guidance to bd onboard output","description":"## Feature Request\n\nUpdate the `bd onboard` command output to include guidance on when and how AI agents should use templates when creating issues.\n\n## Motivation\n\nCurrently, `bd onboard` provides comprehensive instructions for AI agents but doesn't mention the template system. This leads to AI agents creating minimal issues without the structured documentation that templates provide. Adding template guidance would:\n\n1. Improve issue quality by encouraging use of structured templates\n2. Ensure bugs include reproduction steps and environment details\n3. Ensure features capture design decisions and alternatives considered\n4. Maintain consistency across issues created by different AI agents\n\n## Use Cases\n\n1. **AI Agent Onboarding**: When a new AI agent runs `bd onboard`, it learns to use templates for bugs, features, and epics automatically\n2. **Existing Projects**: Teams can regenerate AGENTS.md with updated best practices by re-running `bd onboard`\n3. **Documentation Consistency**: All projects using beads get consistent, high-quality issue documentation\n\n## Proposed Solution\n\nModify the `bd onboard` command output in two places:\n\n1. **AGENTS.md content**: Update the \"Create new issues\" section to show template usage:\n   ```bash\n   # For bugs and features, use templates for structured documentation\n   bd create \"Bug title\" --from-template bug -p 1 --json\n   bd create \"Feature title\" --from-template feature -p 2 --json\n   ```\n\n2. **Add Templates section** after \"MCP Server\" section with:\n   - List of available templates (bug, feature, epic)\n   - When to use each template\n   - When to skip templates (tasks/chores)\n   - Template viewing commands\n\n3. **Update Important Rules** to include: \"Use templates (`--from-template`) for bugs, features, and epics\"\n\n## Alternatives Considered\n\n- **Alternative 1**: Add template suggestions to `bd create` command itself (e.g., prompt \"Use --from-template?\")\n  - Why not chosen: Too intrusive for human users who may prefer quick issue creation\n  \n- **Alternative 2**: Create separate `bd onboard --with-templates` flag\n  - Why not chosen: Splits the onboarding experience; templates should be default best practice","notes":"Reference implementation: This project's AGENTS.md and .github/copilot-instructions.md files contain the exact changes needed.\n\nUpstream repo: https://github.com/steveyegge/beads\n\nNext steps:\n1. Fork the beads repository\n2. Locate the onboard command source (likely cmd/onboard.go)\n3. Apply the template guidance additions shown in this project\n4. Test with 'bd onboard' in a fresh directory\n5. Submit PR with clear rationale (improves AI agent issue quality)","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-16T11:24:48.087806737-08:00","updated_at":"2025-12-18T11:04:24.280254518-08:00","labels":["documentation","feature"],"dependencies":[{"issue_id":"wf-t31","depends_on_id":"wf-dt1","type":"blocks","created_at":"2025-12-16T16:33:29.906240011-08:00","created_by":"rogardle"},{"issue_id":"wf-t31","depends_on_id":"wf-ba2","type":"blocks","created_at":"2025-12-19T00:18:26.92361752-08:00","created_by":"daemon"}]}
{"id":"wf-tgk","title":"Docs: update tooling integrations install-from-source","description":"Update docs/dev/integrations.md to (1) state WAIF uses bv graph analysis for prioritizing/managing work items and (2) ensure bd/bv/opencode install+upgrade steps are from-source builds.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T15:07:24.668871746-08:00","updated_at":"2025-12-20T15:07:36.063782003-08:00","closed_at":"2025-12-20T15:07:36.063782003-08:00","dependencies":[{"issue_id":"wf-tgk","depends_on_id":"wf-s5d","type":"discovered-from","created_at":"2025-12-20T15:07:24.682659268-08:00","created_by":"daemon"}]}
{"id":"wf-u5m","title":"Remove or gate lint references in workflow docs until lint exists","description":"Problem\\n- Docs and templates reference npm run lint, but the repo does not currently define a lint script. This leads to confusion and false checklists during handoffs/PR reviews.\\n\\nGoal\\n- Update docs/templates to either remove lint references or clearly mark lint as optional/placeholder until the repository adopts a linter.\\n\\nDeliverables\\n- Update docs/dev/git_workflow.md and PR template sections that mention lint\\n- Ensure handoff template and branch protection guidance do not imply a missing command\\n- Capture the chosen wording in a bd comment and link to any follow-up lint implementation issue\\n\\nNotes\\n- This should only proceed after wf-z3v decides to remove/gate lint rather than implementing lint.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T23:26:37.39040986-08:00","updated_at":"2025-12-22T23:27:16.506331418-08:00","dependencies":[{"issue_id":"wf-u5m","depends_on_id":"wf-z3v","type":"discovered-from","created_at":"2025-12-22T23:27:33.136908107-08:00","created_by":"daemon"}]}
{"id":"wf-udv","title":"waif ask: Intake brief","description":"Problem\n\nSometimes we just want a quick, one-shot answer from an agent without starting an interactive CLI/TUI session. We need a `waif ask` command that accepts a prompt, sends it to an agent (default `Map`/`PM`), allows optionally prefixing the prompt with an agent name (e.g. `ask patch ...`), and returns the agent's response to the console in Markdown (or `--json`) with no session tracking (one-shot MVP).\n\nUsers\n\nPrimary: producers who need fast, ad-hoc answers in the terminal (PMs/engineers writing prompts).\nSecondary: CLI users and automation that may call `waif ask` from scripts; QA and docs teams who rely on predictable one-shot outputs.\n\nSuccess criteria\n\nMVP success is that a user can run `waif ask \"\u003cprompt\u003e\"` and receive a coherent agent response rendered as Markdown to the console (or machine-readable JSON when `--json` is passed). The UX/implementation goal: ask -\u003e get response (no session), responses are stable Markdown and usable in pipelines.\n\nConstraints\n\nNo timeline or special constraints were specified. No session tracking or state persistence in MVP. Default agent is `Map` (PM); agent override via prefixing the prompt is required. No privacy/security constraints specified by requester.\n\nExisting state\n\n- The CLI contains a PRD/CLI design effort (`docs/dev/CLI_PRD.md`) and PRD-agent wiring work (`wf-ba2.3.6`, `wf-ba2.3.1`) that overlap with PRD generation and OpenCode integration. There is not a dedicated `waif ask` command implemented today.\n\nDesired change\n\nAdd a new `waif ask` CLI command that:\n- Accepts a prompt string or reads from stdin\n- Sends the prompt to a chosen agent (default `Map`/`PM`), allowing an agent name prefix to override\n- Returns the agent's response to stdout rendered as Markdown, or `--json` for machine output\n- Is one-shot only (no session persistence)\n\nLikely duplicates / related docs\n\n- `docs/dev/CLI_PRD.md`\n- `docs/Workflow.md` (intake/PRD workflow)\n- `docs/dev/TUI_PRD.md`\n- `docs/dev/implemented/find_next_PRD.md`\n\nRelated issues\n\n- `wf-ba2.3.1` - Minimal PRD generator (writes Markdown file)\n- `wf-ba2.3.6` - Wire waif prd command to PRD Agent workflow\n- `wf-ba2.3` - PRD Template \u0026 Validation (epic)\n- `wf-7m7` - Add waif command to validate implementation plan integrity (related CLI expansion)\n- `wf-soh` - Integrate marked-terminal markdown rendering for all CLI output (rendering pipeline)\n\nClarifying questions\n\n1. Confirm default agent: should `Map` (PM) be the default for `waif ask`?  \n2. Which output modes are required beyond `--json` and rendered Markdown (e.g., raw text, exit codes for partial failures)?  \n3. Should `waif ask` support reading prompts from stdin or files for scripting?  \n4. Is any prompt auditing/logging required (even minimal), or must MVP avoid writing prompts anywhere?  \n5. Are there agent name parsing rules (single token prefix vs multiple-word agent names)?\n\nProposed next step\n\nNEW PRD at: `docs/dev/waif_ask_PRD.md`\nRecommended next command: `/prd docs/dev/waif_ask_PRD.md \u003cissue-id\u003e`","notes":"OpenCode wiring added; enable with OPENCODE_ENABLED=1 and install OpenCode SDK. PR: https://github.com/SorraTheOrc/waif/pull/19","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T00:51:55.603388916-08:00","updated_at":"2025-12-21T02:28:02.410489552-08:00","closed_at":"2025-12-21T02:28:02.410489552-08:00"}
{"id":"wf-ug7","title":"Update the ask command to open opencode TUI rather than handle the exchange directly: Intake brief","description":"Problem: Current ask sends prompt to headless opencode server and hides interaction; prefer opening the agent's tmux pane with opencode TUI and injecting the prompt so the user can interact.\nUsers: Primary: human producer using ask; Secondary: agent pane context/observers in tmux.\nSuccess criteria: Running \"ask \u003cprompt\u003e\" (e.g., \"ask patch to implement bead bd-1\") opens opencode TUI in the target agent pane, injects the prompt, executes it there, while leaving focus in the originating pane.\nConstraints: No deadline; no need for backward compatibility; focus remains in invoking pane; target pane is the agent pane from start-workflow-tmux; add logging of date/time, target agent, and prompt in an AI-readable format.\nExisting state: ask calls headless opencode server and parses results for quick exchange.\nDesired change: Send command to the target agent tmux pane to launch opencode TUI with the prompt injected; keep invoking pane focus; log timestamp, agent, prompt for later AI analysis.\nLikely duplicates / related docs: docs/dev/CLI_PRD.md; docs/dev/TUI_PRD.md; docs/Workflow.md; scripts/start-workflow-tmux.sh.\nRelated issues: wf-lp0 waif ask: Intake brief; wf-ba2.3.6 Wire waif prd command to PRD Agent workflow; wf-bxn Docs: Resolve TBDs in docs/dev/TUI_PRD.md.\nClarifying questions: 1) Where to store the ask logs (file path/rotation)? 2) What fallback behavior if the target agent pane is missing? 3) Should ask detect/select agent pane by name, window, or config mapping? 4) Should ask surface errors inline or silently return after sending to tmux?\nProposed next step: UPDATE PRD at: docs/dev/CLI_PRD.md. Recommended next command: /prd docs/dev/CLI_PRD.md \u003cissue-id\u003e","notes":"PR opened: https://github.com/SorraTheOrc/waif/pull/38","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T11:03:06.001021001-08:00","updated_at":"2025-12-22T16:27:17.353277271-08:00","closed_at":"2025-12-22T14:27:17.119113803-08:00","comments":[{"id":15,"issue_id":"wf-ug7","author":"rgardler","text":"Linked PRD: docs/dev/CLI_PRD.md","created_at":"2025-12-24T00:43:53Z"}]}
{"id":"wf-urb","title":"Config-driven tmux workflow agents","description":"## Overview\n\nMake `start-workflow-tmux.sh` config-driven so agent panes (pm/design/build/docs/review/user) and their idle scheduler settings can be customized without editing the script.\n\n## Problem\n\nCurrently `start-workflow-tmux.sh` hard-codes:\n- The list of agent panes and their order\n- The PM idle_task override (inline in bash)\n- Environment overrides like BD_ACTOR\n\nTweaking agents or idle behavior requires editing the script, which is error-prone and makes upgrades harder.\n\n## Users\n\n- Developers running the multi-agent tmux workflow\n- Teams wanting custom agent configurations (e.g., different worktrees, extra agents)\n\n## Solution\n\nCreate a declarative YAML config (`config/workflow_agents.yaml`) that defines each agent pane with optional settings. Update the script to parse this config (via Python helper) and spawn panes accordingly.\n\n## Scope\n\n**In Scope:**\n- YAML config schema: agent name, worktree, env overrides, idle settings\n- Python parser helper (`scripts/parse-workflow-config.py`)\n- Update `start-workflow-tmux.sh` to use the parser\n- Fallback to current defaults when config is missing\n- Error loudly on malformed YAML\n- Documentation updates\n\n**Out of Scope:**\n- Sequential idle commands (future)\n- Changing pane layout or adding GUIs\n- New background daemons beyond idle scheduler\n\n## Constraints\n\n- Must preserve existing default behavior when config is absent\n- Python 3.x with PyYAML (standard on most systems)\n- Support `WORKFLOW_AGENTS_CONFIG` env var for alternate config path","notes":"PR opened: https://github.com/SorraTheOrc/waif/pull/16","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-20T21:29:18.634450562-08:00","updated_at":"2025-12-20T22:46:59.342149366-08:00","closed_at":"2025-12-20T22:46:59.342149366-08:00","labels":["epic"]}
{"id":"wf-urb.1","title":"Add config schema and example (config/workflow_agents.yaml)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T21:29:18.750941571-08:00","updated_at":"2025-12-20T21:44:18.313397086-08:00","closed_at":"2025-12-20T21:44:18.313404778-08:00","dependencies":[{"issue_id":"wf-urb.1","depends_on_id":"wf-urb","type":"parent-child","created_at":"2025-12-20T21:29:18.783210274-08:00","created_by":"daemon"}]}
{"id":"wf-urb.2","title":"Implement YAML parser helper (scripts/parse-workflow-config.py)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T21:29:18.877587481-08:00","updated_at":"2025-12-20T21:44:18.383236881-08:00","closed_at":"2025-12-20T21:44:18.383243625-08:00","dependencies":[{"issue_id":"wf-urb.2","depends_on_id":"wf-urb","type":"parent-child","created_at":"2025-12-20T21:29:18.878759212-08:00","created_by":"daemon"}]}
{"id":"wf-urb.3","title":"Update start-workflow-tmux.sh to read config and spawn panes","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T21:29:18.93925385-08:00","updated_at":"2025-12-20T21:44:18.431327102-08:00","closed_at":"2025-12-20T21:44:18.431333846-08:00","dependencies":[{"issue_id":"wf-urb.3","depends_on_id":"wf-urb","type":"parent-child","created_at":"2025-12-20T21:29:18.940159795-08:00","created_by":"daemon"}]}
{"id":"wf-urb.4","title":"Wire idle task override to scripts/idle-scheduler.sh","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T21:29:18.992397493-08:00","updated_at":"2025-12-20T21:44:18.485307226-08:00","closed_at":"2025-12-20T21:44:18.48531397-08:00","dependencies":[{"issue_id":"wf-urb.4","depends_on_id":"wf-urb","type":"parent-child","created_at":"2025-12-20T21:29:18.993198323-08:00","created_by":"daemon"}]}
{"id":"wf-urb.5","title":"Document config format in docs/Workflow.md and docs/dev/idle_scheduler_module.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T21:29:19.048537279-08:00","updated_at":"2025-12-20T21:44:18.531701956-08:00","closed_at":"2025-12-20T21:44:18.531708068-08:00","dependencies":[{"issue_id":"wf-urb.5","depends_on_id":"wf-urb","type":"parent-child","created_at":"2025-12-20T21:29:19.049234152-08:00","created_by":"daemon"}]}
{"id":"wf-ux2","title":"Login fails with special characters","description":"Priority: 1","status":"tombstone","priority":2,"issue_type":"task","created_at":"2025-12-16T12:44:06.717940292-08:00","updated_at":"2025-12-16T12:44:18.171003121-08:00","deleted_at":"2025-12-16T12:44:18.171003121-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"wf-v0m","title":"Delegate command to pass work to another agent: Intake brief","description":"Problem:\n- We have waif ask to send free-form prompts to agents, but repeating delegation patterns (bead id + intent + agent) is common and error-prone. A dedicated waif delegate shortcut accepting a bead id, a short action phrase, and an agent target would provide a concise, auditable, reproducible way to delegate routine tasks to agents.\n\nUsers:\n- Primary: Producer (human) who delegates work.\n- Secondary: agent roles (patch, probe, scribbler, ship) that receive delegations; repo maintainers who review delegated actions.\n\nSuccess criteria:\n- A CLI command \"waif delegate \u003cbd-id\u003e \u003caction\u003e to \u003cagent\u003e\" exists that validates the bead id, records a delegation audit note in the bead, and issues a deterministic waif ask to the target agent with a standard prompt template. Acceptance test: running \"waif delegate wf-123 implement to patch\" results in a beads note on wf-123 containing \"delegated-to:@patch (implement)\" and an entry in the ask log.\n\nConstraints:\n- Timeline: P2 default.\n- Risk tolerance: low for automation performing publishing actions; default behavior is ask-only and requires explicit delegation for push/merge.\n- Compatibility: reuse existing waif ask mechanics and beads audit conventions; do not perform push/merge unless explicitly delegated.\n\nExisting state:\n- waif ask exists (src/commands/ask.ts).\n- Docs reference delegation patterns and recording conventions.\n\nDesired change:\n- Add a CLI subcommand waif delegate that: 1) validates bead id exists and is open; 2) formats a standard delegation prompt; 3) records an idempotent beads note (delegated-to:@\u003cagent\u003e (\u003caction\u003e)); 4) invokes waif ask to send the prompt; 5) prevents risky actions by default and surfaces approvals required.\n\nLikely duplicates / related docs:\n- docs/Workflow.md\n- docs/dev/CLI_PRD.md\n- docs/dev/TUI_PRD.md\n- docs/dev/git_workflow.md\n- docs/.github/permissions_matrix.md\n- .opencode/command/implement.md\n- .opencode/command/intake.md\n\nRelated issues:\n- wf-2ia: PM Delegation Workflow\n- wf-70j: Define the PM process for selecting and assigning work: Intake brief\n- wf-79y.15: Permissions \u0026 enforcement matrix for git operations\n\nClarifying questions:\n1) Should waif delegate be a client-side helper that only writes the beads note and composes waif ask, or should it optionally perform push/merge when delegated to an actor (opt-in only)?\n2) What is the canonical prompt template to send to agents? (e.g., \"Please implement \u003cbd-id\u003e: \u003cshort action\u003e\").\n3) Which agents (if any) should be allowed push/merge rights by default?\n\nProposed next step:\n- NEW PRD at: docs/dev/delegate_command_PRD.md\n- Recommended command to continue: /prd docs/dev/delegate_command_PRD.md \u003cnew-issue-id\u003e","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-23T23:05:09.802393461-08:00","updated_at":"2025-12-23T23:05:09.802393461-08:00"}
{"id":"wf-vaq","title":"Ensure start-workflow-tmux exports BD_ACTOR and agent envs","notes":"start-workflow-tmux updated in PR 58 to export BD_ACTOR/WAIF_AGENT/OPENCODE_AGENT; validated tests and docs updated","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-23T20:13:21.797084879-08:00","updated_at":"2025-12-23T20:53:18.091758133-08:00","closed_at":"2025-12-23T20:53:18.091795856-08:00"}
{"id":"wf-xtd","title":"Align OpenCode agent definitions with template","description":"Audit every .opencode/agent/*.md definition against the Forge template, normalize structure/permissions, and apply improvements requested by Producer.","notes":"All .opencode/agent definitions rewritten to match template (Focus, Workflow, Repo rules, Boundaries) with least-privilege permissions; forge.md now canonical example.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T19:06:14.185278567-08:00","updated_at":"2025-12-20T19:12:43.18581296-08:00","closed_at":"2025-12-20T19:12:40.97934297-08:00"}
{"id":"wf-ygu","title":"Docs: Fix README typos and clarify naming","description":"Fix spelling (e.g., 'accomodate' -\u003e 'accommodate') and clarify WAIF/WAFI naming in README.md for clarity.","status":"open","priority":3,"issue_type":"chore","created_at":"2025-12-19T21:44:39.605504367-08:00","updated_at":"2025-12-19T22:11:35.584418906-08:00","dependencies":[{"issue_id":"wf-ygu","depends_on_id":"wf-s5d","type":"parent-child","created_at":"2025-12-19T22:11:34.443532972-08:00","created_by":"daemon"}]}
{"id":"wf-z3v","title":"Decide lint policy (add lint script vs update docs)","description":"Problem\\n- Workflow docs mention npm run lint as a standard quality gate, but the repo currently has no lint script in package.json. This creates inconsistent expectations and weakens branch protection guidance.\\n\\nGoal\\n- Decide which policy we want:\\n  A) Add a lint script (and optionally a CI lint check) so docs remain accurate, or\\n  B) Update docs/templates to stop referencing lint until the project adopts one.\\n\\nDecision criteria\\n- Do we have an eslint config (or other linter) we want to standardize on?\\n- Should lint be required in CI/branch protection or only optional locally?\\n\\nDeliverables\\n- A short decision recorded in bd comments on this issue that picks A or B and notes rationale.\\n- Close this issue once decision is made and the chosen implementation issue is unblocked.\\n\\nRelated follow-ups\\n- If A: see wf-1mv\\n- If B: see wf-u5m","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T23:26:27.086500222-08:00","updated_at":"2025-12-22T23:27:07.080538272-08:00","dependencies":[{"issue_id":"wf-z3v","depends_on_id":"wf-79y","type":"related","created_at":"2025-12-22T23:27:56.033937527-08:00","created_by":"daemon"}]}
{"id":"wf-zws","title":"Integration test: add waif show --json test","notes":"Assigned to probe to add integration test for 'waif show --json' per wf-3xw follow-up. PR branch: feature/wf-3xw-release-notes. Created PR: https://github.com/SorraTheOrc/waif/pull/63","status":"in_progress","priority":2,"issue_type":"task","assignee":"rgardler","created_at":"2025-12-24T16:45:38.688911704-08:00","updated_at":"2025-12-24T17:00:44.68053231-08:00","dependencies":[{"issue_id":"wf-zws","depends_on_id":"wf-3xw","type":"discovered-from","created_at":"2025-12-24T16:45:38.695564317-08:00","created_by":"daemon"}]}
